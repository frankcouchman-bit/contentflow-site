<!doctype html>
<html lang="en" class="h-full">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>ContentRepurpose.pro — AI Content Repurposing Tool & Generator</title>
  <meta name="description" content="Content repurposing AI that turns one idea into LinkedIn, X, Email & Instagram drafts. Export to Notion & Trello. BYOK supported." />
  <link rel="canonical" href="https://contentrepurpose.pro/">
  <meta name="theme-color" content="#0a0d18">
  <meta name="color-scheme" content="dark light">
  <meta name="robots" content="index,follow,max-video-preview:-1,max-image-preview:large,max-snippet:-1">

  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="ContentRepurpose.pro — AI Content Repurposing Tool">
  <meta property="og:description" content="Repurpose content with AI. Paste once → get LinkedIn, X, Email & Instagram drafts. Export to Notion & Trello. BYOK supported.">
  <meta property="og:url" content="https://contentrepurpose.pro/">
  <meta property="og:image" content="/og-cover.png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="ContentRepurpose.pro — AI Content Generator">
  <meta name="twitter:description" content="Content repurposing AI for multi-channel drafts. Export to Notion & Trello. BYOK supported.">
  <meta name="twitter:image" content="/og-cover.png">

  <!-- Fonts + Tailwind -->
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Global CSS -->
  <style>
    :root{ --brandA:#7AA2FF; --brandB:#FF2D2D; --ink:#0a0d18 }
    html,body{font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    .txt-grad{background:linear-gradient(135deg,var(--brandA),var(--brandB));-webkit-background-clip:text;background-clip:text;color:transparent}
    .bg-grad{background:linear-gradient(135deg,var(--brandA),var(--brandB))}
    .card{border-radius:1.25rem;border:1px solid rgba(15,23,42,.10);background:rgba(255,255,255,.80);box-shadow:0 12px 40px rgba(2,6,23,.08)}
    .badge{display:inline-flex;align-items:center;gap:.5rem;padding:.35rem .6rem;border-radius:9999px;border:1px solid rgba(255,255,255,.15);font-size:.75rem;background:rgba(255,255,255,.65)}
    .chip{font-size:.7rem;padding:.2rem .5rem;border-radius:9999px;border:1px solid rgba(148,163,184,.35)}
    .btn{padding:.6rem .9rem;border-radius:.9rem;border:1px solid rgba(148,163,184,.35)}
    .btn-primary{background:black;color:white}
    .glass{backdrop-filter: blur(12px); background:rgba(255,255,255,.62)}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace}
    .halo{position:absolute;filter:blur(60px);opacity:.55;pointer-events:none;transform:translateZ(0);
      background:radial-gradient(50% 50% at 50% 50%, rgba(122,162,255,.8), rgba(255,45,45,.65) 60%, transparent 70%);
      width:42rem;height:42rem;border-radius:50%;animation:float 16s ease-in-out infinite;}
    .halo.h2{width:34rem;height:34rem;right:-12rem;top:-6rem;animation-duration:18s;opacity:.5}
    .halo.h3{width:28rem;height:28rem;left:-10rem;top:26rem;animation-duration:22s;opacity:.45}
    @keyframes float{ 0%,100%{ transform: translate3d(0,0,0) } 50%{ transform: translate3d(0,-20px,0) } }
    .orbit{position:absolute;inset:-32px;border-radius:24px;pointer-events:none;
      background: conic-gradient(from 0deg, rgba(122,162,255,.25), rgba(255,45,45,.18), rgba(122,162,255,.25));
      -webkit-mask: radial-gradient(closest-side, transparent 88%, black 89%); mask: radial-gradient(closest-side, transparent 88%); animation: spin 18s linear infinite;}
    @keyframes spin{ to{ transform: rotate(360deg) } }
    .mock{border-radius:1rem;border:1px solid rgba(255,255,255,.12); background:linear-gradient(180deg,rgba(255,255,255,.75),rgba(255,255,255,.6));}
    @media (prefers-color-scheme:dark){ body{background:var(--ink);color:#e9eef6} .card{background:rgba(14,16,22,.6);border-color:rgba(255,255,255,.08);box-shadow:0 24px 96px rgba(122,162,255,.08),0 14px 60px rgba(255,45,45,.06)} .badge{background:rgba(255,255,255,.06);border-color:rgba(255,255,255,.12)} .mock{ background:linear-gradient(180deg,rgba(17,20,31,.88),rgba(17,20,31,.72)); } }
    .marquee{ display:grid; grid-auto-flow:column; gap:2rem; align-items:center; animation: scrollx 26s linear infinite }
    .marquee:hover{ animation-play-state: paused } @keyframes scrollx{ from{ transform: translateX(0) } to{ transform: translateX(-50%) } }
    .nav-sheet{position:fixed; inset:0 0 auto 0; background:rgba(0,0,0,.6); backdrop-filter:blur(8px); display:none}
    .nav-panel{position:absolute; top:0; right:0; width:82vw; max-width:380px; height:100%; background:rgba(14,16,22,.96); border-left:1px solid rgba(255,255,255,.08); padding:1rem}
    .nav-open .nav-sheet{display:block}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
    .icon { width: 1rem; height: 1rem; display: inline-block; vertical-align: -0.15em; }
    .touch-target{min-height:40px;min-width:40px}

    /* Plan-gating helpers */
    .only-guest{display:revert}
    .only-authed{display:none}
    .plan-free-only{display:none}
    .plan-starter-plus{display:none}
    .plan-creator-plus{display:none}
    .plan-business-only{display:none}
    body[data-auth="authed"] .only-guest{display:none}
    body[data-auth="authed"] .only-authed{display:revert}
    body[data-plan="free"] .plan-free-only{display:revert}
    body[data-plan="starter"] .plan-starter-plus,
    body[data-plan="creator"] .plan-starter-plus,
    body[data-plan="business"] .plan-starter-plus{display:revert}
    body[data-plan="creator"] .plan-creator-plus,
    body[data-plan="business"] .plan-creator-plus{display:revert}
    body[data-plan="business"] .plan-business-only{display:revert}
  </style>

  <!-- JSON-LD -->
  <script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","name":"ContentRepurpose.pro","url":"https://contentrepurpose.pro/","logo":"https://contentrepurpose.pro/logo.svg","sameAs":["https://x.com/contentrepurpose","https://www.linkedin.com/company/contentrepurpose"]}</script>
  <script type="application/ld+json">{"@context":"https://schema.org","@type":"WebSite","url":"https://contentrepurpose.pro/","name":"ContentRepurpose.pro","potentialAction":{"@type":"SearchAction","target":"https://contentrepurpose.pro/search?q={q}","query-input":"required name=q"}}</script>
  <script type="application/ld+json">{"@context":"https://schema.org","@type":"SoftwareApplication","name":"ContentRepurpose.pro","applicationCategory":"ContentCreationApplication","operatingSystem":"Web","offers":{"@type":"Offer","price":"0","priceCurrency":"USD"}}</script>

  <!-- Worker base -->
  <script>
    window.WORKER_BASE = "https://contentflow-worker.frank-couchman.workers.dev";
    window.SITE_ORIGIN = "https://contentrepurpose.pro";
  </script>

  <!-- Supabase v2 auth (magic link + Google OAuth) — hardened -->
  <script type="module">
    import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm";

    const SUPABASE_URL  = "https://ynkoavaeadlzlwylmfmu.supabase.co";
    const SUPABASE_ANON = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inlua29hdmFlYWRsemx3eWxtZm11Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc5OTAxNDgsImV4cCI6MjA3MzU2NjE0OH0.1yM5yDo0MI9Upzt4GkLyf1mqvDXfb3DXvC0ouOLtRoU";

    // 1) Init
    window.supabase = createClient(SUPABASE_URL, SUPABASE_ANON, {
      auth: {
        persistSession: true,
        autoRefreshToken: true,
        detectSessionInUrl: true   // handles magic-link redirect on this page
      }
    });

    // 2) Helpers
    window.getAuth = async () => {
      try {
        const { data } = await window.supabase.auth.getSession();
        const s = data?.session;
        return {
          token:  s?.access_token || "",
          userId: s?.user?.id || null,
          email:  s?.user?.email || null
        };
      } catch {
        return { token:"", userId:null, email:null };
      }
    };
    window.getAuthHeaders = async () => {
      const { token, userId } = await window.getAuth();
      const h = { "Content-Type": "application/json" };
      if (token)  h["Authorization"] = `Bearer ${token}`;
      if (userId) h["X-User-Id"]    = userId;
      return h;
    };

    // 3) Minimal UI paint to avoid “Plan: Member”
    function paintAuthBadge({authed, plan="free"}){
      document.body.setAttribute("data-auth", authed ? "authed" : "guest");
      document.body.setAttribute("data-plan", plan);
      const pretty = plan.charAt(0).toUpperCase()+plan.slice(1);
      const set = (id) => {
        const el = document.getElementById(id);
        if (el) el.textContent = `Plan: ${pretty}`;
      };
      set("planbadge"); set("planbadge_m");
      const show = (id, on) => {
        const el = document.getElementById(id);
        if (el) el.classList.toggle("hidden", !on);
      };
      show("loginBtn", !authed); show("loginBtn_m", !authed);
      show("logoutBtn", authed); show("logoutBtn_m", authed);
      show("manageBilling", authed); show("manageBilling_m", authed); show("manageBilling2", authed);
    }

    // 4) Magic link sender (uses current origin; ensure this origin is whitelisted in Supabase)
    async function doSendMagicLink() {
      const email = document.getElementById("authEmail")?.value?.trim();
      const note  = document.getElementById("authNote");
      if (!email) { if (note) note.textContent = "Enter a valid email."; return; }
      const redirectTo = window.SITE_ORIGIN || window.location.origin;
      const { error } = await window.supabase.auth.signInWithOtp({ email, options:{ emailRedirectTo: redirectTo } });
      note.textContent = error ? `Sign-in error: ${error.message}` : "Check your email for the magic link.";
    }
    window.doSendMagicLink = doSendMagicLink;

    // 5) OAuth/magic-link finisher — cleans URL (prevents stuck sessions)
    async function finishOAuthIfNeeded(){
      try{
        const u = new URL(location.href);
        const code = u.searchParams.get("code");
        const err  = u.searchParams.get("error_description");
        if (err) console.warn("OAuth error:", decodeURIComponent(err));
        if (code) {
          const { error } = await window.supabase.auth.exchangeCodeForSession({ code });
          if (error) console.warn("exchangeCodeForSession:", error.message);
          ["code","state","scope","provider_id","redirected_from"].forEach(p=> u.searchParams.delete(p));
          history.replaceState({}, "", u.toString());
        }
        if (location.hash.includes("access_token")) {
          await window.supabase.auth.getSession();
          history.replaceState({}, "", location.pathname + location.search);
        }
      }catch(e){ console.warn("finishOAuthIfNeeded:", e); }
    }

    // 6) Wire on load
    document.addEventListener("DOMContentLoaded", async () => {
      await finishOAuthIfNeeded();

      // Dialog buttons (hooked later too)
      document.getElementById("authSend")?.addEventListener("click", doSendMagicLink);
      document.getElementById("authGoogle")?.addEventListener("click", async () => {
        try {
          await window.supabase.auth.signInWithOAuth({ provider:"google", options:{ redirectTo: window.SITE_ORIGIN || window.location.origin }});
        } catch(e){ const note=document.getElementById("authNote"); if (note) note.textContent = e?.message || "Google sign-in failed."; }
      });

      // Initial paint
      const { data } = await window.supabase.auth.getSession();
      const authed = !!data?.session;
      paintAuthBadge({ authed, plan:"free" });

      // Live plan paint after sign-in/out
      window.supabase.auth.onAuthStateChange((_event, session) => {
        paintAuthBadge({ authed: !!session, plan:"free" });
      });
    });
  </script>
</head>
<body class="min-h-full" data-auth="guest" data-plan="free">
  <!-- Decorative halos -->
  <div class="halo" style="left:-14rem; top:-10rem;"></div>
  <div class="halo h2"></div>
  <div class="halo h3"></div>

  <!-- Top nav (desktop + mobile trigger) -->
  <header class="sticky top-0 z-40 backdrop-blur bg-white/55 dark:bg-black/20 border-b border-white/30">
    <div class="max-w-7xl mx-auto px-4 md:px-5 py-4 flex items-center justify-between">
      <a href="/" class="flex items-center gap-3" aria-label="ContentRepurpose home">
        <svg width="36" height="36" viewBox="0 0 48 48" class="rounded-xl" aria-hidden="true">
          <defs><linearGradient id="g" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#7AA2FF"/><stop offset="100%" stop-color="#FF2D2D"/></linearGradient></defs>
          <rect x="0" y="0" width="48" height="48" rx="12" fill="url(#g)"/>
          <path d="M14 16h10a6 6 0 0 1 0 12H20v4h-6V16zm6 6v4h4a2 2 0 1 0 0-4h-4z" fill="white"/>
          <path d="M28 16h6v16h-6z" fill="white" opacity=".9"/>
        </svg>
        <span class="font-semibold tracking-tight">Content<span class="txt-grad">Repurpose</span></span>
      </a>

      <nav class="hidden md:flex items-center gap-6 text-sm">
        <a href="#demo" class="hover:opacity-80">Live Demo</a>
        <a href="https://contentrepurpose.pro/blog/linkedin-post-templates/" class="hover:opacity-80">Templates</a>
        <a href="https://contentrepurpose.pro/#use-cases" class="hover:opacity-80">Use cases</a>
        <button id="openBestPicks" type="button" class="hover:opacity-80 underline decoration-dotted">Best picks</button>
        <a href="#pricing" class="hover:opacity-80">Pricing</a>
        <a href="/blog" class="hover:opacity-80">Blog</a>
        <span id="planbadge" class="px-3 py-1 rounded-full text-xs bg-white/70 dark:bg-white/10 border border-white/50">Plan: Free</span>
        <button id="manageBilling" class="px-3 py-1 rounded-lg border hidden">Manage billing</button>
        <div class="flex items-center gap-2">
          <button id="loginBtn" class="px-3 py-1 rounded-lg border only-guest">Sign in</button>
          <button id="logoutBtn" class="px-3 py-1 rounded-lg border only-authed hidden">Sign out</button>
        </div>
      </nav>

      <button id="navToggle" class="md:hidden touch-target px-3 py-2 rounded-lg border" aria-expanded="false" aria-controls="mobileNav" aria-label="Open menu">☰</button>
    </div>

    <!-- Promo strip -->
    <div class="border-t border-white/40 bg-white/70 dark:bg-white/10">
      <div class="max-w-7xl mx-auto px-4 md:px-5 py-2 flex flex-wrap items-center justify-between gap-3 text-sm">
        <div class="flex items-center gap-2">
          <span class="px-2 py-0.5 rounded-full text-[11px] bg-black/80 text-white">LIMITED</span>
          <span>Use <strong class="mono">CONTENTOFF90</strong> for <strong>90% off</strong> the Creator plan.</span>
        </div>
        <div class="flex items-center gap-2">
          <button id="copyPromoBtn" class="px-3 py-1 rounded-lg border">Copy code</button>
          <a href="#pricing" class="px-3 py-1 rounded-lg bg-black text-white">See pricing</a>
        </div>
      </div>
    </div>

    <!-- Mobile sheet -->
    <div id="mobileNav" class="nav-sheet" aria-hidden="true">
      <div class="nav-panel text-sm text-white">
        <div class="flex items-center justify-between">
          <span class="font-semibold">Menu</span>
          <button id="navClose" class="touch-target px-3 py-2 rounded-lg border border-white/20" aria-label="Close menu">✕</button>
        </div>
        <nav class="mt-4 grid gap-2">
          <a href="#demo" class="px-3 py-2 rounded-lg hover:bg-white/10">Live Demo</a>
          <a href="https://contentrepurpose.pro/blog/linkedin-post-templates/" class="px-3 py-2 rounded-lg hover:bg-white/10">Templates</a>
          <a href="https://contentrepurpose.pro/#use-cases" class="px-3 py-2 rounded-lg hover:bg-white/10">Use cases</a>
          <button id="openBestPicks_m" class="text-left px-3 py-2 rounded-lg hover:bg-white/10">Best picks</button>
          <a href="#pricing" class="px-3 py-2 rounded-lg hover:bg-white/10">Pricing</a>
          <a href="/blog" class="px-3 py-2 rounded-lg hover:bg-white/10">Blog</a>
        </nav>
        <div class="mt-6 grid gap-2">
          <span id="planbadge_m" class="px-3 py-1 rounded-full text-xs bg-white/10 border border-white/20 w-fit">Plan: Free</span>
          <button id="manageBilling_m" class="px-3 py-2 rounded-lg border border-white/20 hidden">Manage billing</button>
          <button id="loginBtn_m" class="px-3 py-2 rounded-lg border border-white/20 only-guest">Sign in</button>
          <button id="logoutBtn_m" class="px-3 py-2 rounded-lg border border-white/20 only-authed hidden">Sign out</button>
        </div>
      </div>
    </div>
  </header>

  <!-- ===== HERO + CTA rail ===== -->
  <section class="relative" id="hero">
    <div class="max-w-7xl mx-auto px-4 md:px-5 pt-10 md:pt-16 grid lg:grid-cols-2 gap-8 md:gap-10 items-center">
      <!-- Left: copy + CTAs -->
      <div>
        <!-- BADGE: show demo note to guests, plan badge to members -->
        <div id="heroBadgeWrap" class="inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs bg-white/70 dark:bg-white/10 border border-white/40">
          <span class="w-2 h-2 rounded-full bg-emerald-500"></span>
          <span class="only-guest">Demo — <strong class="mx-1">5 runs / month</strong> (no login)</span>
          <span class="only-authed hidden">Signed in — <strong id="heroPlanName">Free</strong> plan active</span>
        </div>

        <h1 class="mt-4 text-3xl md:text-5xl font-black leading-tight tracking-tight">
          AI <span class="txt-grad">Content Repurposing Tool</span> — turn one idea into everywhere content.
        </h1>

        <p class="mt-4 text-slate-600 dark:text-slate-300 max-w-xl">
          Paste content → get <strong>LinkedIn</strong>, <strong>X</strong>, <strong>Email</strong> &amp; <strong>Instagram</strong> drafts.
          Export to <strong>Notion</strong> or <strong>Trello</strong>. BYOK supported.
        </p>

        <!-- CTA rail -->
        <div class="mt-6 flex flex-wrap gap-3">
          <a href="#demo" class="px-4 py-3 rounded-xl font-semibold text-white bg-black hover:opacity-90 only-guest">Try the Live Demo</a>
          <a href="#demo" class="px-4 py-3 rounded-xl font-semibold text-white bg-black hover:opacity-90 only-authed hidden">Open Generator</a>
          <a href="#optimizer" class="px-4 py-3 rounded-xl font-semibold border border-slate-300/60">Optimize Article (SEO)</a>
          <a href="#pricing" class="px-4 py-3 rounded-xl font-semibold border border-slate-300/60">See pricing</a>
          <button id="heroSignIn" class="px-4 py-3 rounded-xl font-semibold border border-slate-300/60 only-guest">Sign in</button>
        </div>

        <div class="mt-6 flex items-center gap-3 text-xs text-slate-500 dark:text-slate-400">
          <span class="badge">AI Content Generator</span>
          <span class="badge">Repurposing Tool</span>
          <span class="badge">SEO-ready</span>
          <span class="badge">BYOK</span>
        </div>

        <!-- Trust strip -->
        <div class="mt-8 overflow-hidden">
          <div class="flex items-center gap-4 text-[11px] uppercase tracking-widest text-slate-500">
            <span class="chip">Creators</span>
            <span class="chip">Marketers</span>
            <span class="chip">Newsletters</span>
            <span class="chip">Teams</span>
          </div>
          <div class="relative mt-4">
            <div class="marquee opacity-70">
              <div class="chip">LinkedIn-first</div>
              <div class="chip">Editorial-friendly</div>
              <div class="chip">Email copy</div>
              <div class="chip">Instagram captions</div>
              <div class="chip">Notion export</div>
              <div class="chip">Trello sync</div>
              <div class="chip">Keyword-aware</div>
              <div class="chip">Tone controls</div>
              <!-- duplicate for seamless scroll -->
              <div class="chip">LinkedIn-first</div>
              <div class="chip">Editorial-friendly</div>
              <div class="chip">Email copy</div>
              <div class="chip">Instagram captions</div>
              <div class="chip">Notion export</div>
              <div class="chip">Trello sync</div>
              <div class="chip">Keyword-aware</div>
              <div class="chip">Tone controls</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Right: visual mocks -->
      <div class="relative">
        <div class="orbit" aria-hidden="true"></div>
        <div class="grid gap-4">
          <div class="mock p-4 card">
            <div class="text-xs text-slate-400">Command</div>
            <pre class="mono text-xs bg-black/85 text-emerald-200 rounded-xl p-4 h-40 overflow-auto" aria-label="CLI Preview">repurpose generate --channels linkedin,x,email,instagram
? outline created
? 3 social variants
? email subject + body ready
? instagram caption + hashtags</pre>
          </div>
          <div class="grid md:grid-cols-2 gap-4">
            <div class="mock p-4 card">
              <div class="text-xs text-slate-400">LinkedIn</div>
              <div class="mt-2 h-24 text-sm text-slate-200/90 leading-relaxed">
                • Hook that earns the scroll<br>
                • 6–10 crisp lines, one CTA<br>
                • On-brand tone &amp; keywords
              </div>
            </div>
            <div class="mock p-4 card">
              <div class="text-xs text-slate-400">X (Twitter)</div>
              <div class="mt-2 h-24 text-sm text-slate-200/90 leading-relaxed">
                Two fast variants<br>
                Always ≤ 280 chars<br>
                Ready to post ✓
              </div>
            </div>
          </div>
          <div class="grid md:grid-cols-2 gap-4">
            <div class="mock p-4 card">
              <div class="text-xs text-slate-400">Email</div>
              <div class="mt-2 h-20 text-sm text-slate-200/90 leading-relaxed">
                Subject &amp; body prepped<br>
                Preview &amp; send from your client
              </div>
            </div>
            <div class="mock p-4 card">
              <div class="text-xs text-slate-400">Instagram</div>
              <div class="mt-2 h-20 text-sm text-slate-200/90 leading-relaxed">
                Caption + 3–5 hashtags<br>
                Short, skimmable, on-brand
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Live activity strip (hero) -->
    <div class="mt-8 md:mt-10">
      <div class="max-w-7xl mx-auto px-4 md:px-5">
        <div class="card p-4 md:p-5">
          <div class="flex items-center justify-between flex-wrap gap-3">
            <div class="flex items-center gap-2">
              <span class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></span>
              <strong class="tracking-tight">Generations today</strong>
              <span class="chip" data-live-count>–</span>
            </div>
            <div class="text-xs text-slate-500">Real results update every 30s</div>
          </div>
          <div class="mt-3 overflow-hidden">
            <div class="flex gap-3 whitespace-nowrap text-[13px] will-change-transform" style="animation: scrollx 28s linear infinite" data-live-feed></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== BEST PICKS / PLAN ADVISOR (modal) ===== -->
  <dialog id="bestPicksDialog" class="rounded-xl p-0 w-[92vw] max-w-lg">
    <form method="dialog" class="p-5 grid gap-4">
      <div class="flex items-center justify-between">
        <h3 class="text-lg font-semibold">Best Picks for You</h3>
        <button class="btn" value="cancel">Close</button>
      </div>
      <p class="text-sm text-slate-600 dark:text-slate-300">
        Based on what most users with similar goals choose, here’s what we recommend:
      </p>
      <div class="grid gap-3">
        <div class="card p-4">
          <strong>Creator — $19/mo</strong>
          <p class="text-sm mt-1 text-slate-500">500 generations/month, Optimizer 15/day, Scheduler (multi-profile), Analytics Pro, Notion/Trello/Buffer.</p>
          <div class="mt-2 flex gap-2">
            <a href="#pricing" class="btn btn-primary">See Creator details</a>
            <button type="button" class="btn js-checkout" data-price="price_1S7y77JYjIKHzKcjKQYjiqZH">Start Creator</button>
          </div>
        </div>
        <div class="card p-4">
          <strong>Starter — $9/mo</strong>
          <p class="text-sm mt-1 text-slate-500">200 generations/month, Optimizer 5/day, Scheduler (single profile), Analytics basics.</p>
          <div class="mt-2 flex gap-2">
            <a href="#pricing" class="btn">See Starter details</a>
            <button type="button" class="btn js-checkout" data-price="price_1S7y58JYjIKHzKcjzL7cIKiB">Start Starter</button>
          </div>
        </div>
        <div class="card p-4">
          <strong>Business — $49/mo</strong>
          <p class="text-sm mt-1 text-slate-500">Unlimited (fair use), 3 seats, Team analytics, shared calendar, white-label export.</p>
          <div class="mt-2 flex gap-2">
            <a href="#pricing" class="btn">See Business details</a>
            <button type="button" class="btn js-checkout" data-price="price_1S7y8OJYjIKHzKcjqA9uJdyh">Start Business</button>
          </div>
        </div>
      </div>
      <p class="text-xs text-slate-500">Tip: Free users get a preview of all features, but some actions are locked until you upgrade.</p>
    </form>
  </dialog>

  <script>
    // Best Picks modal openers
    document.addEventListener("DOMContentLoaded", function(){
      var d = document.getElementById("bestPicksDialog");
      var open1 = document.getElementById("openBestPicks");
      var open2 = document.getElementById("openBestPicks_m");
      function openDlg(e){ try{ e && e.preventDefault(); d && d.showModal(); }catch{} }
      open1 && open1.addEventListener("click", openDlg);
      open2 && open2.addEventListener("click", openDlg);
    });
  </script>
  <!-- ===== LIVE DEMO / GENERATOR ===== -->
  <section id="demo" class="relative scroll-mt-24">
    <div class="max-w-7xl mx-auto px-4 md:px-5 py-14 md:py-20">
      <div class="flex items-end justify-between gap-4 mb-6">
        <div>
          <h2 class="text-2xl md:text-3xl font-black tracking-tight">Generator</h2>
          <p class="mt-1 text-slate-500 dark:text-slate-300 text-sm only-guest">
            No login needed — <span class="font-semibold">5 runs/month</span> on the public pool.
          </p>
          <p class="mt-1 text-slate-500 dark:text-slate-300 text-sm only-authed hidden">
            Signed in — your plan limits apply per day/month by tier.
          </p>
        </div>
        <div class="flex items-center gap-3">
          <a href="#pricing" class="btn">See pricing</a>
          <button class="btn btn-primary js-open-auth only-guest" type="button">Sign in</button>
        </div>
      </div>

      <!-- Promo rail -->
      <div class="card p-4 md:p-5 mb-6">
        <div class="flex flex-wrap items-center justify-between gap-3">
          <div class="flex items-center gap-2 text-sm">
            <span class="badge">LIMITED</span>
            <span>Use <strong class="mono">CONTENTOFF90</strong> for <strong>90% off</strong> the Creator plan.</span>
          </div>
          <div class="flex items-center gap-2">
            <button id="copyPromoBtn2" class="btn" type="button">Copy code</button>
            <a class="btn btn-primary" href="#pricing">Upgrade</a>
          </div>
        </div>
      </div>

      <!-- Generator Form -->
      <div class="card p-5 md:p-6">
        <!-- Hard guards to prevent navigation even if JS is late -->
        <form id="demoForm" class="grid gap-6" method="post" action="javascript:void(0)" onsubmit="return false" autocomplete="off" novalidate>
          <!-- Source selector -->
          <fieldset>
            <legend class="text-sm font-semibold">Source</legend>
            <div class="mt-2 grid md:grid-cols-3 gap-3">
              <label class="tab flex items-center justify-between">
                <span class="flex items-center gap-2">
                  <input type="radio" name="sourceType" value="paragraph" checked>
                  Paragraph / Notes
                </span>
                <span class="chip">fastest</span>
              </label>
              <label class="tab flex items-center">
                <input type="radio" name="sourceType" value="blog" class="mr-2">
                Full Blog
              </label>
              <label class="tab flex items-center">
                <input type="radio" name="sourceType" value="url" class="mr-2">
                URL
              </label>
            </div>
            <div class="mt-3">
              <textarea id="sourceText" class="w-full rounded-xl border p-4 min-h-[140px]"
                placeholder="Paste your paragraph or blog. If you selected URL, paste it here."></textarea>
            </div>
          </fieldset>

          <!-- Optimizer options (light) -->
          <fieldset>
            <legend class="text-sm font-semibold">Article Optimizer (optional)</legend>
            <div class="mt-2 grid sm:grid-cols-2 lg:grid-cols-3 gap-2">
              <label class="flex items-center gap-2"><input type="checkbox" name="opt_humanize" checked> Humanize content</label>
              <label class="flex items-center gap-2"><input type="checkbox" name="opt_lengthen"> Lengthen content</label>
              <label class="flex items-center gap-2"><input type="checkbox" name="opt_faqs"> Add FAQs (+ JSON-LD)</label>
              <label class="flex items-center gap-2"><input type="checkbox" name="opt_headings" checked> Auto-headings (H2/H3)</label>
              <label class="flex items-center gap-2"><input type="checkbox" name="opt_svg"> Add platform-fit SVG image ideas</label>
              <label class="flex items-center gap-2"><input type="checkbox" name="opt_seo"> Check SEO basics (title/meta/alt-text)</label>
            </div>
            <div class="mt-2 text-[12px] text-slate-500">
              <span class="chip">Starter: up to 5/day</span>
              <span class="chip">Creator: up to 15/day</span>
              <span class="chip">Business: up to 30/day</span>
            </div>
          </fieldset>

          <!-- Channels -->
          <fieldset>
            <legend class="text-sm font-semibold">Channels to generate</legend>
            <div class="mt-2 grid sm:grid-cols-2 lg:grid-cols-4 gap-2">
              <label class="flex items-center gap-2"><input type="checkbox" name="ch_linkedin" checked> LinkedIn</label>
              <label class="flex items-center gap-2"><input type="checkbox" name="ch_x" checked> X (Twitter)</label>
              <label class="flex items-center gap-2"><input type="checkbox" name="ch_email" checked> Email</label>
              <label class="flex items-center gap-2"><input type="checkbox" name="ch_instagram"> Instagram</label>
              <label class="flex items-center gap-2"><input type="checkbox" name="ch_reddit" checked> Reddit</label>
              <label class="flex items-center gap-2"><input type="checkbox" name="ch_facebook"> Facebook</label>
              <label class="flex items-center gap-2"><input type="checkbox" name="ch_quora"> Quora</label>
              <label class="flex items-center gap-2"><input type="checkbox" name="ch_tiktok"> TikTok</label>
            </div>
          </fieldset>

          <!-- Channel-specific extras -->
          <div class="grid md:grid-cols-2 gap-6">
            <fieldset class="card p-4">
              <legend class="text-sm font-semibold">LinkedIn</legend>
              <label class="flex items-center gap-2 mt-2"><input type="checkbox" name="li_article"> Also generate a LinkedIn Article</label>
            </fieldset>

            <fieldset class="card p-4">
              <legend class="text-sm font-semibold">X (Twitter)</legend>
              <div class="mt-2 flex items-center gap-3">
                <label class="flex items-center gap-2"><input type="checkbox" name="x_sequence" checked> Output as sequence</label>
                <label class="flex items-center gap-2">
                  Max posts:
                  <select name="x_posts" class="border rounded-lg px-2 py-1">
                    <option>2</option><option selected>4</option><option>6</option>
                  </select>
                </label>
              </div>
            </fieldset>

            <fieldset class="card p-4">
              <legend class="text-sm font-semibold">Reddit</legend>
              <label class="flex items-center gap-2 mt-2"><input type="checkbox" name="rdt_communities" checked> Suggest best communities (with rules & flair tips)</label>
              <label class="flex items-center gap-2 mt-2"><input type="checkbox" name="rdt_comments" checked> Include 3 starter comment angles</label>
            </fieldset>

            <fieldset class="card p-4">
              <legend class="text-sm font-semibold">TikTok</legend>
              <label class="flex items-center gap-2 mt-2"><input type="checkbox" name="tt_hooks" checked> Provide 3 hook variants</label>
              <label class="flex items-center gap-2 mt-2"><input type="checkbox" name="tt_onscreen" checked> Include on-screen text plan</label>
            </fieldset>
          </div>

          <!-- Actions -->
          <div class="flex flex-wrap items-center gap-3">
            <!-- Buttons are type=button to avoid any native submit navigation -->
            <button id="generateBtn" type="button" class="px-4 py-3 rounded-xl font-semibold text-white bg-black hover:opacity-90 only-guest">
              Generate (demo)
            </button>
            <button id="generateBtn_member" type="button" class="px-4 py-3 rounded-xl font-semibold text-white bg-black hover:opacity-90 only-authed hidden">
              Generate
            </button>
            <button type="button" id="clearBtn" class="px-4 py-3 rounded-xl font-semibold border">Clear</button>

            <div class="text-sm text-slate-500 only-guest">
              You have <span id="demoQuota">—</span> demo runs left this month.
            </div>
            <div class="text-sm text-slate-500 only-authed hidden">
              You have <span id="memberQuota">—</span> runs left today.
            </div>

            <a href="#pricing" class="text-sm underline hover:opacity-80 ml-auto">Need more? See plans</a>
          </div>
        </form>
      </div>

      <!-- OUTPUT -->
      <div id="demoOutput" class="mt-8 grid gap-6" aria-live="polite" aria-busy="false">
        <!-- Channel cards will be injected here -->
      </div>

      <!-- Quick Publish (authed only; Free can see, guests can’t) -->
      <div class="mt-10 card p-5 only-authed hidden">
        <div class="flex items-center justify-between flex-wrap gap-3">
          <strong class="tracking-tight">Quick publish</strong>
          <div class="text-xs text-slate-500">Works with your last generation’s outputs.</div>
        </div>
        <div class="mt-4 grid sm:grid-cols-2 lg:grid-cols-4 gap-3">
          <button id="qp-x" class="btn">Post to X</button>
          <button id="qp-reddit" class="btn">Open Reddit submit</button>
          <button id="qp-linkedin" class="btn">Copy for LinkedIn & open</button>
          <button id="qp-email" class="btn">Send email draft</button>
        </div>

        <div class="mt-4 grid sm:grid-cols-2 gap-3 plan-creator-plus">
          <button id="li-notion" class="btn">Export to Notion</button>
          <button id="li-trello" class="btn">Send to Trello</button>
        </div>
        <div class="mt-2 text-xs text-slate-500 plan-creator-plus">
          Notion/Trello require connecting once from this device. Find them in Settings → Integrations.
        </div>
      </div>

      <!-- Live strip -->
      <div class="mt-10">
        <div class="card p-4 md:p-5">
          <div class="flex items-center justify-between flex-wrap gap-3">
            <div class="flex items-center gap-2">
              <span class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></span>
              <strong class="tracking-tight">Generations today</strong>
              <span id="liveCount" class="chip">–</span>
            </div>
            <div class="text-xs text-slate-500">Real results update every 30s</div>
          </div>
          <div class="mt-3 overflow-hidden">
            <div id="liveFeed" class="flex gap-3 whitespace-nowrap text-[13px] will-change-transform" style="animation: scrollx 28s linear infinite"></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== ARTICLE OPTIMIZER (SEO) ===== -->
  <section id="optimizer" class="relative scroll-mt-24">
    <div class="max-w-7xl mx-auto px-4 md:px-5 py-14 md:py-20">
      <div class="flex items-end justify-between gap-4 mb-6">
        <div>
          <h2 class="text-2xl md:text-3xl font-black tracking-tight">Optimize Article (SEO)</h2>
          <p class="mt-1 text-slate-500 dark:text-slate-300 text-sm only-guest">
            Sign in to run the optimizer. Free accounts get 1 verified run.
          </p>
          <p class="mt-1 text-slate-500 dark:text-slate-300 text-sm only-authed hidden">
            Starter: 5/day • Creator: 15/day • Business: 30/day
          </p>
        </div>
        <div class="flex items-center gap-3">
          <a href="#pricing" class="btn">See pricing</a>
          <button class="btn btn-primary js-open-auth only-guest" type="button">Sign in</button>
        </div>
      </div>

      <!-- Optimizer form -->
      <div class="card p-5 md:p-6">
        <form id="optimizerForm" class="grid gap-6" method="post" action="javascript:void(0)" onsubmit="return false" autocomplete="off" novalidate>
          <!-- Input -->
          <fieldset>
            <legend class="text-sm font-semibold">Source (URL or Article)</legend>
            <div class="grid md:grid-cols-3 gap-3">
              <label class="grid gap-1 md:col-span-2">
                <span class="text-xs text-slate-500">URL (optional)</span>
                <input id="optUrl" type="url" class="border rounded-xl px-3 py-2" placeholder="https://example.com/your-article" />
              </label>
              <label class="grid gap-1">
                <span class="text-xs text-slate-500">Target keyword</span>
                <input id="optKeyword" type="text" class="border rounded-xl px-3 py-2" placeholder="e.g. content repurposing for SEO" />
              </label>
            </div>
            <label class="grid gap-1 mt-3">
              <span class="text-xs text-slate-500">Paste article (Markdown or plain text)</span>
              <textarea id="optArticle" class="w-full rounded-xl border p-4 min-h-[180px]" placeholder="Paste your article content…"></textarea>
            </label>
          </fieldset>

          <!-- Options -->
          <fieldset>
            <legend class="text-sm font-semibold">What to improve</legend>
            <div class="mt-2 grid sm:grid-cols-2 lg:grid-cols-3 gap-2">
              <label class="flex items-center gap-2"><input type="checkbox" name="opt_len30" checked> Lengthen by ~30%</label>
              <label class="flex items-center gap-2"><input type="checkbox" name="opt_h2h3" checked> Improve H2/H3 structure</label>
              <label class="flex items-center gap-2"><input type="checkbox" name="opt_faqs_ld" checked> Add FAQs (with JSON-LD)</label>
              <label class="flex items-center gap-2"><input type="checkbox" name="opt_meta" checked> Better meta title & description</label>
              <label class="flex items-center gap-2"><input type="checkbox" name="opt_ctr" checked> CTR ideas (A/B titles)</label>
              <label class="flex items-center gap-2"><input type="checkbox" name="opt_rank" checked> Likelihood to rank + gaps</label>
              <label class="flex items-center gap-2"><input type="checkbox" name="opt_altkw" checked> Alternative keywords to target</label>
            </div>
          </fieldset>

          <!-- Actions (locked UI hint for free) -->
          <div class="flex flex-wrap items-center gap-3">
            <button id="runOptimizerBtn" type="button" class="px-4 py-3 rounded-xl font-semibold text-white bg-black hover:opacity-90 only-authed hidden">
              Optimize article
            </button>
            <button type="button" class="px-4 py-3 rounded-xl font-semibold border only-guest">
              Unlock Optimizer (free preview)
            </button>
            <a href="#pricing" class="text-sm underline hover:opacity-80 ml-auto">See plans</a>
          </div>
        </form>
      </div>

      <!-- Optimizer Output -->
      <div id="optimizerOutput" class="mt-8 grid gap-6" aria-live="polite" aria-busy="false"></div>

      <!-- Internal resources for topical authority -->
      <div class="mt-10">
        <div class="card p-5">
          <strong class="tracking-tight">Learn & get more from the Optimizer</strong>
          <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-3 mt-3 text-sm">
            <a class="underline hover:opacity-80" href="https://contentrepurpose.pro/blog/content-repurposing-for-seo/" target="_blank" rel="noopener">Content repurposing for SEO</a>
            <a class="underline hover:opacity-80" href="https://contentrepurpose.pro/blog/ai-content-repurposing/" target="_blank" rel="noopener">AI content repurposing</a>
            <a class="underline hover:opacity-80" href="https://contentrepurpose.pro/blog/paste-once-multi-channel/" target="_blank" rel="noopener">Paste once, multi-channel</a>
            <a class="underline hover:opacity-80" href="https://contentrepurpose.pro/blog/ai-social-media-post-generator/" target="_blank" rel="noopener">AI social media post generator</a>
            <a class="underline hover:opacity-80" href="https://contentrepurpose.pro/blog/repurpose-blog-post-for-social-media/" target="_blank" rel="noopener">Repurpose blog → social</a>
            <a class="underline hover:opacity-80" href="http://contentrepurpose.pro/blog/free-ai-linkedin-post-generator/" target="_blank" rel="noopener">Free AI LinkedIn post generator</a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Guard: disable native submit on these forms if any script races -->
  <script>
    (function(){
      try{
        ["demoForm","optimizerForm"].forEach(function(id){
          var f = document.getElementById(id);
          if (!f) return;
          f.setAttribute("method","post");
          f.setAttribute("action","javascript:void(0)");
          f.addEventListener("submit", function(e){ e.preventDefault(); return false; });
        });
        // Also prevent default on the Generate buttons in case listeners attach late
        var gb = document.getElementById("generateBtn");
        var gm = document.getElementById("generateBtn_member");
        [gb,gm].filter(Boolean).forEach(function(b){
          b.addEventListener("click", function(e){ e.preventDefault(); /* handlers in Part 6 will run */ });
        });
        var ro = document.getElementById("runOptimizerBtn");
        if (ro) ro.addEventListener("click", function(e){ e.preventDefault(); /* actual handler in Part 6 */ });
      }catch(e){}
    })();
  </script>
  <!-- ===== USE CASES ===== -->
  <section id="use-cases" class="relative scroll-mt-24">
    <div class="max-w-7xl mx-auto px-4 md:px-5 py-14 md:py-20">
      <div class="text-center mb-10">
        <h2 class="text-3xl md:text-4xl font-black tracking-tight">Use cases</h2>
        <p class="mt-2 text-slate-600 dark:text-slate-300">From one idea → everywhere content.</p>
      </div>

      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- Solo creator (Free → Starter) -->
        <article class="card p-5 relative">
          <div class="flex items-center gap-2">
            <span class="chip">Solo</span>
            <span class="chip">Writing cadence</span>
          </div>
          <h3 class="mt-3 text-lg font-bold">Turn blogs into weekly LinkedIn + X</h3>
          <p class="mt-2 text-sm text-slate-500 dark:text-slate-300">
            Paste a paragraph or full blog, get platform-native drafts + optional LinkedIn Article.
          </p>
          <ul class="mt-4 text-sm space-y-1">
            <li>• Generator (multi-channel)</li>
            <li>• Sequence threads for X</li>
            <li class="opacity-70">• Scheduler queue <span class="chip">Starter+</span></li>
          </ul>
          <div class="mt-5 flex gap-2">
            <a class="btn btn-primary" href="#demo">Try generator</a>
            <button class="btn" type="button" data-open-advisor="solo">See best plan</button>
          </div>
          <div class="absolute top-3 right-3 text-xs px-2 py-1 rounded bg-white/70 dark:bg-white/10 border">Free-friendly</div>
        </article>

        <!-- SEO content team (Starter → Creator) -->
        <article class="card p-5 relative">
          <div class="flex items-center gap-2">
            <span class="chip">SEO</span>
            <span class="chip">Content ops</span>
          </div>
          <h3 class="mt-3 text-lg font-bold">Revive posts with SEO & repurpose</h3>
          <p class="mt-2 text-sm text-slate-500 dark:text-slate-300">
            Optimize articles for a target keyword, auto-H2/H3, FAQs (JSON-LD) and CTR titles — then repurpose.
          </p>
          <ul class="mt-4 text-sm space-y-1">
            <li>• Article Optimizer <span class="chip">Starter+</span></li>
            <li>• LinkedIn + Email repurposing</li>
            <li class="opacity-70">• Notion/Trello export <span class="chip">Creator+</span></li>
          </ul>
          <div class="mt-5 flex gap-2">
            <a class="btn btn-primary" href="#optimizer">Run optimizer</a>
            <button class="btn" type="button" data-open-advisor="seo">See best plan</button>
          </div>
          <div class="absolute top-3 right-3 text-xs px-2 py-1 rounded bg-white/70 dark:bg-white/10 border">Starter+</div>
        </article>

        <!-- Team workflows (Business) -->
        <article class="card p-5 relative">
          <div class="flex items-center gap-2">
            <span class="chip">Team</span>
            <span class="chip">Org-wide</span>
          </div>
          <h3 class="mt-3 text-lg font-bold">Multi-seat calendar & analytics</h3>
          <p class="mt-2 text-sm text-slate-500 dark:text-slate-300">
            Shared scheduler, team presets, org analytics and white-label exports.
          </p>
          <ul class="mt-4 text-sm space-y-1">
            <li>• Shared calendar & queue</li>
            <li>• Team presets & review</li>
            <li>• Org analytics dashboard</li>
          </ul>
          <div class="mt-5 flex gap-2">
            <a class="btn btn-primary" href="#pricing">Compare plans</a>
            <button class="btn" type="button" data-open-advisor="team">See best plan</button>
          </div>
          <div class="absolute top-3 right-3 text-xs px-2 py-1 rounded bg-white/70 dark:bg-white/10 border">Business</div>
        </article>

        <!-- Locked example tiles (visible to Free; no interaction) -->
        <article class="card p-5 plan-starter-plus">
          <div class="flex items-center gap-2">
            <span class="chip">Queues</span>
            <span class="chip">Timing</span>
          </div>
          <h3 class="mt-3 text-lg font-bold">Schedule the week in 10 minutes</h3>
          <p class="mt-2 text-sm text-slate-500 dark:text-slate-300">Drag-drop queue and calendar view.</p>
          <div class="mt-4 flex gap-2">
            <a class="btn" href="#demo">Open scheduler</a>
          </div>
        </article>

        <article class="card p-5 relative">
          <div class="absolute inset-0 rounded-xl bg-black/5 dark:bg-white/5 backdrop-blur-sm flex items-center justify-center plan-free-only"></div>
          <div class="absolute top-3 right-3 text-xs px-2 py-1 rounded bg-white/70 dark:bg-white/10 border plan-free-only">Locked</div>
          <div class="flex items-center gap-2">
            <span class="chip">Export</span>
            <span class="chip">Workflows</span>
          </div>
          <h3 class="mt-3 text-lg font-bold">Ship to Notion & Trello</h3>
          <p class="mt-2 text-sm text-slate-500 dark:text-slate-300">Send drafts to your workspace in one click.</p>
          <div class="mt-4 flex gap-2">
            <button class="btn plan-creator-plus" type="button" id="tryNotionBtn">Try Notion export</button>
            <button class="btn plan-creator-plus" type="button" id="tryTrelloBtn">Try Trello export</button>
            <a class="btn plan-free-only" href="#pricing">Unlock on Creator</a>
          </div>
        </article>

        <article class="card p-5 relative">
          <div class="absolute inset-0 rounded-xl bg-black/5 dark:bg-white/5 backdrop-blur-sm flex items-center justify-center plan-free-only"></div>
          <div class="absolute top-3 right-3 text-xs px-2 py-1 rounded bg-white/70 dark:bg-white/10 border plan-free-only">Locked</div>
          <div class="flex items-center gap-2">
            <span class="chip">Analytics</span>
            <span class="chip">Growth</span>
          </div>
          <h3 class="mt-3 text-lg font-bold">Channel analytics</h3>
          <p class="mt-2 text-sm text-slate-500 dark:text-slate-300">Per-channel breakdown and org-level stats.</p>
          <div class="mt-4 text-sm text-slate-500 plan-creator-plus">Connect channels to see data.</div>
          <a class="btn plan-free-only mt-4" href="#pricing">Unlock on Starter+</a>
        </article>
      </div>

      <!-- Templates deep link (always visible) -->
      <div class="text-center mt-12">
        <a class="inline-flex items-center gap-2 btn btn-primary"
           href="https://contentrepurpose.pro/blog/linkedin-post-templates/"
           target="_blank" rel="noopener">
          Browse LinkedIn Templates
          <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M7 17 17 7M7 7h10v10"/></svg>
        </a>
      </div>
    </div>
  </section>

  <!-- ===== BEST PICKS (Advisor) ===== -->
  <section id="best-picks" class="relative scroll-mt-24">
    <div class="max-w-7xl mx-auto px-4 md:px-5 py-14 md:py-20">
      <div class="text-center mb-10">
        <h2 class="text-3xl md:text-4xl font-black tracking-tight">Best picks</h2>
        <p class="mt-2 text-slate-600 dark:text-slate-300">Tell us how you publish — we’ll recommend the right plan.</p>
      </div>

      <div class="grid md:grid-cols-3 gap-6">
        <!-- Card options open the advisor -->
        <article class="card p-5 text-center">
          <h3 class="text-lg font-bold">Solo creator</h3>
          <p class="mt-2 text-sm text-slate-500 dark:text-slate-300">1 profile • 2–4 posts/week</p>
          <button class="btn btn-primary mt-4" type="button" data-open-advisor="solo">See my pick</button>
        </article>
        <article class="card p-5 text-center">
          <h3 class="text-lg font-bold">Growing brand</h3>
          <p class="mt-2 text-sm text-slate-500 dark:text-slate-300">Multi-channel • templates & exports</p>
          <button class="btn btn-primary mt-4" type="button" data-open-advisor="brand">See my pick</button>
        </article>
        <article class="card p-5 text-center">
          <h3 class="text-lg font-bold">Team / Agency</h3>
          <p class="mt-2 text-sm text-slate-500 dark:text-slate-300">3+ seats • shared calendar</p>
          <button class="btn btn-primary mt-4" type="button" data-open-advisor="team">See my pick</button>
        </article>
      </div>
    </div>
  </section>

  <!-- Advisor Modal -->
  <dialog id="advisor" class="rounded-xl p-0 w-[92vw] max-w-lg">
    <form method="dialog" class="p-5 grid gap-4">
      <div class="flex items-center justify-between">
        <h3 class="text-lg font-semibold">Recommended plan</h3>
        <button class="btn" value="cancel">Close</button>
      </div>
      <div id="advisorCopy" class="text-sm text-slate-600 dark:text-slate-300">
        <!-- filled by script -->
      </div>
      <div class="grid sm:grid-cols-2 gap-2">
        <!-- Buttons trigger Worker checkout with price ids already in your pricing section -->
        <button class="btn btn-primary" type="button" data-advisor-checkout="" id="advisorCta">Continue</button>
        <a class="btn" href="#pricing">Compare all plans</a>
      </div>
    </form>
  </dialog>

  <!-- Wiring for advisor + template targets (minimal; full app wiring in Part 6) -->
  <script>
    (function(){
      function cap(s){ return (s||"").slice(0,1).toUpperCase()+ (s||"").slice(1); }
      var dlg = document.getElementById("advisor");
      var copy = document.getElementById("advisorCopy");
      var cta  = document.getElementById("advisorCta");

      var PRICE = {
        starter:  "price_1S7y58JYjIKHzKcjzL7cIKiB",
        creator:  "price_1S7y77JYjIKHzKcjKQYjiqZH",
        business: "price_1S7y8OJYjIKHzKcjqA9uJdyh"
      };

      function openAdvisor(kind){
        var plan = "starter", perks = [];
        if (kind==="solo"){ plan="starter"; perks=["Scheduler queue","200 generations/mo","Basic analytics"]; }
        if (kind==="brand" || kind==="seo"){ plan="creator"; perks=["Notion & Trello export","500 generations/mo","Analytics Pro","Multi-profile scheduler"]; }
        if (kind==="team"){ plan="business"; perks=["3 seats included","Org-wide analytics","White-label export"]; }

        copy.innerHTML =
          "<p class='mb-2'>We recommend the <strong>"+ cap(plan) +"</strong> plan.</p>"+
          "<ul class='list-disc pl-5 space-y-1'>" + perks.map(function(p){ return "<li>"+p+"</li>"; }).join("") + "</ul>";

        cta.setAttribute("data-advisor-checkout", PRICE[plan]);
        try{ dlg.showModal(); }catch(e){ /* ignore */ }
      }

      document.querySelectorAll("[data-open-advisor]").forEach(function(b){
        b.addEventListener("click", function(){ openAdvisor(b.getAttribute("data-open-advisor")); });
      });

      // Checkout via Worker (same flow as pricing buttons in Part 2)
      cta && cta.addEventListener("click", async function(){
        var price = cta.getAttribute("data-advisor-checkout");
        if (!price){ return; }
        cta.disabled = true; var old = cta.textContent; cta.textContent = "Opening…";
        try{
          const r = await fetch((window.WORKER_BASE||"") + "/api/billing/checkout", {
            method:"POST",
            headers: await (window.getAuthHeaders ? window.getAuthHeaders() : Promise.resolve({ "Content-Type":"application/json" })),
            body: JSON.stringify({
              price,
              success_url: (window.SITE_ORIGIN||location.origin) + "/?billing=success",
              cancel_url:  (window.SITE_ORIGIN||location.origin) + "/?billing=cancel"
            })
          });
          const j = await r.json();
          if (!r.ok) throw new Error(j?.error?.message || "Checkout error");
          location.href = j.url;
        }catch(e){
          alert(e.message || "Checkout failed");
        }finally{
          cta.disabled = false; cta.textContent = old;
        }
      });

      // Optional “try export” buttons: if locked, nudge to pricing
      var n = document.getElementById("tryNotionBtn");
      var t = document.getElementById("tryTrelloBtn");
      [n,t].forEach(function(btn){
        if (!btn) return;
        btn.addEventListener("click", function(){
          // Real wiring lives in Part 6 (integrations). Here we simply scroll to demo.
          try{ document.getElementById("demo").scrollIntoView({behavior:"smooth"}); }catch{}
        });
      });
    })();
  </script>
  <!-- ===== PRICING REFINEMENTS (add-on rail) ===== -->
  <section aria-label="Pricing assurance" class="relative">
    <div class="max-w-7xl mx-auto px-4 md:px-5 pb-6">
      <div class="card p-4 md:p-5 flex flex-col md:flex-row items-start md:items-center justify-between gap-3">
        <div>
          <div class="text-sm font-semibold">No-risk guarantee</div>
          <p class="text-sm text-slate-600 dark:text-slate-300 mt-1">
            Upgrade now — cancel anytime from your dashboard. Your plan stays active until the end of the cycle.
          </p>
        </div>
        <div class="flex items-center gap-2">
          <a class="btn" href="#pricing">Compare plans</a>
          <button id="pricingManageBilling_inline" class="btn only-authed hidden" type="button">Manage billing</button>
          <button class="btn btn-primary js-open-auth only-guest" type="button">Sign in to upgrade</button>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== STICKY BEST-PICKS RAIL ===== -->
  <div id="stickyRail" class="fixed inset-x-0 bottom-3 z-50 px-3 md:px-0 hidden" role="region" aria-label="Quick actions">
    <div class="max-w-3xl mx-auto card p-3 md:p-4 flex items-center gap-2 md:gap-3">
      <button id="stickyClose" class="btn" type="button" aria-label="Hide">✕</button>
      <div class="text-sm flex-1">
        <strong>Find your best plan</strong>
        <span class="hidden sm:inline text-slate-500 dark:text-slate-400">— 3 questions, 10 seconds.</span>
      </div>
      <button class="btn btn-primary" type="button" data-open-advisor="solo">Best pick for me</button>
      <a class="btn" href="#pricing">See pricing</a>
      <a class="btn" href="https://contentrepurpose.pro/blog/linkedin-post-templates/" target="_blank" rel="noopener">Templates</a>
    </div>
  </div>

  <script>
    (function(){
      // Manage billing button (uses Worker portal)
      var mb = document.getElementById("pricingManageBilling_inline");
      if (mb){
        mb.addEventListener("click", async function(){
          mb.disabled = true; var old = mb.textContent; mb.textContent = "Opening…";
          try{
            const r = await fetch((window.WORKER_BASE||"") + "/api/billing/portal",{
              method:"POST", headers: await (window.getAuthHeaders? window.getAuthHeaders() : Promise.resolve({"Content-Type":"application/json"})),
              body: JSON.stringify({ return_url: location.href })
            });
            const j = await r.json();
            if (!r.ok) throw new Error(j?.error?.message || "Portal error");
            location.href = j.url;
          }catch(e){ alert(e.message||"Portal error"); mb.disabled=false; mb.textContent=old; }
        });
      }

      // Sticky rail behavior (shows after user scrolls a bit; persists dismissal)
      var rail  = document.getElementById("stickyRail");
      var close = document.getElementById("stickyClose");
      var KEY   = "crp:sticky:dismissed";
      function show(){ if (!localStorage.getItem(KEY)) rail.classList.remove("hidden"); }
      function hide(){ rail.classList.add("hidden"); localStorage.setItem(KEY, "1"); }
      if (close) close.addEventListener("click", hide);

      var shown = false;
      window.addEventListener("scroll", function(){
        if (shown) return;
        if (window.scrollY > 900) { shown = true; show(); }
      }, { passive:true });

      // Respect auth paint: reveal Manage Billing only when authed
      document.addEventListener("DOMContentLoaded", function(){
        try{
          var authed = document.body.getAttribute("data-auth")==="authed";
          if (authed) { mb && mb.classList.remove("hidden"); }
        }catch{}
      });
    })();
  </script>

  <!-- ===== FEATURED READS (Topical authority & internal links) ===== -->
  <section id="featured-reads" class="relative scroll-mt-24">
    <div class="max-w-7xl mx-auto px-4 md:px-5 py-14 md:py-20">
      <div class="text-center mb-8">
        <h2 class="text-2xl md:text-3xl font-black tracking-tight">Featured reads</h2>
        <p class="mt-2 text-slate-600 dark:text-slate-300">Proven strategies & workflows for repurposing.</p>
      </div>

      <div class="grid md:grid-cols-3 gap-6">
        <a class="card p-5 block hover:opacity-90" href="https://contentrepurpose.pro/blog/content-repurposing-for-seo/" target="_blank" rel="noopener">
          <div class="chip">SEO</div>
          <h3 class="mt-3 font-bold">Content Repurposing for SEO</h3>
          <p class="mt-2 text-sm text-slate-500 dark:text-slate-300">Rank better by expanding, restructuring, and interlinking your best posts.</p>
        </a>

        <a class="card p-5 block hover:opacity-90" href="https://contentrepurpose.pro/blog/ai-social-media-post-generator/" target="_blank" rel="noopener">
          <div class="chip">AI generator</div>
          <h3 class="mt-3 font-bold">AI Social Media Post Generator</h3>
          <p class="mt-2 text-sm text-slate-500 dark:text-slate-300">Turn a paragraph into native posts for LinkedIn, X, Email & Instagram.</p>
        </a>

        <a class="card p-5 block hover:opacity-90" href="https://contentrepurpose.pro/blog/paste-once-multi-channel/" target="_blank" rel="noopener">
          <div class="chip">Workflows</div>
          <h3 class="mt-3 font-bold">Paste Once → Multi-channel</h3>
          <p class="mt-2 text-sm text-slate-500 dark:text-slate-300">One input → multiple ready-to-ship drafts without context switching.</p>
        </a>

        <a class="card p-5 block hover:opacity-90" href="https://contentrepurpose.pro/blog/ai-content-repurposing-examples-workflows/" target="_blank" rel="noopener">
          <div class="chip">Examples</div>
          <h3 class="mt-3 font-bold">AI Repurposing Examples & Workflows</h3>
          <p class="mt-2 text-sm text-slate-500 dark:text-slate-300">See practical flows from blog → LinkedIn, X, and email sequences.</p>
        </a>

        <a class="card p-5 block hover:opacity-90" href="https://contentrepurpose.pro/blog/best-ai-content-repurposing-tools-2025/" target="_blank" rel="noopener">
          <div class="chip">2025</div>
          <h3 class="mt-3 font-bold">Best AI Content Repurposing Tools (2025)</h3>
          <p class="mt-2 text-sm text-slate-500 dark:text-slate-300">Where we shine vs. alternatives and when to combine tools.</p>
        </a>

        <a class="card p-5 block hover:opacity-90" href="http://contentrepurpose.pro/blog/free-ai-linkedin-post-generator/" target="_blank" rel="noopener">
          <div class="chip">Free tool</div>
          <h3 class="mt-3 font-bold">Free AI LinkedIn Post Generator</h3>
          <p class="mt-2 text-sm text-slate-500 dark:text-slate-300">Spin up LinkedIn posts fast — then upgrade for scheduling & analytics.</p>
        </a>
      </div>

      <!-- Inline shortcuts -->
      <div class="text-center mt-8 flex flex-wrap items-center justify-center gap-2">
        <a class="btn" href="https://contentrepurpose.pro/blog/linkedin-post-templates/" target="_blank" rel="noopener">Templates</a>
        <a class="btn" href="#use-cases">Use cases</a>
        <button class="btn btn-primary" type="button" data-open-advisor="brand">Best pick</button>
      </div>
    </div>
  </section>
<!-- ===== FINAL BOOT/POLISH (no redirects, plan previews, advisor wiring) ===== -->
<script>
(function(){
  /* ---------- Safe helpers ---------- */
  const $  = (s, r=document)=> r.querySelector(s);
  const $$ = (s, r=document)=> Array.from(r.querySelectorAll(s));
  const SITE_ORIGIN = window.SITE_ORIGIN || location.origin;
  const WORKER_BASE = window.WORKER_BASE || "";

  async function getAuthHeaders(){
    try{
      if (window.getAuthHeaders) return await window.getAuthHeaders();
      if (window.supabase){
        const { data } = await window.supabase.auth.getSession();
        const h = { "Content-Type":"application/json" };
        const tok = data?.session?.access_token;
        const uid = data?.session?.user?.id;
        if (tok) h.Authorization = `Bearer ${tok}`;
        if (uid) h["X-User-Id"] = uid;
        return h;
      }
    }catch{}
    return { "Content-Type":"application/json" };
  }

  /* ---------- 0) Make sure “Generate” never navigates ---------- */
  document.addEventListener("DOMContentLoaded", function(){
    const form = document.getElementById("demoForm");
    if (form){
      // Kill any action/hash from HTML or browser autofill
      form.setAttribute("action", "");
      form.setAttribute("method", "post");

      // Defuse Enter on textareas from causing navigation
      const src = document.getElementById("sourceText");
      if (src){
        src.addEventListener("keydown", (e)=>{
          if (e.key === "Enter" && (e.metaKey || e.ctrlKey)) {
            e.preventDefault();
            form.requestSubmit && form.requestSubmit();
          }
        });
      }

      // Clean URL after a programmatic submit (prevents leftover ?query or #pricing)
      const genBtns = ["generateBtn", "generateBtn_member"];
      genBtns.forEach(id=>{
        const b = document.getElementById(id);
        if (b) b.addEventListener("click", ()=>{
          try{
            const u = new URL(location.href);
            if (u.search) { u.search = ""; history.replaceState({}, "", u.toString()); }
            if (u.hash   && u.hash !== "#demo") { u.hash = ""; history.replaceState({}, "", u.toString()); }
          }catch{}
        });
      });
    }
  });

  /* ---------- 1) Advisor modal wiring (Best Picks) ---------- */
  function openAdvisor(preset){
    const dlg = document.getElementById("planAdvisor");
    if (!dlg || !dlg.showModal){ location.hash = "#pricing"; return; }
    if (preset){
      try{
        // optional: preselect radio/option by data-plan key
        const el = dlg.querySelector(`[data-preset="${preset}"]`);
        if (el) el.click();
      }catch{}
    }
    dlg.showModal();
  }
  document.addEventListener("click", (e)=>{
    const t = e.target.closest("[data-open-advisor]");
    if (t){
      e.preventDefault();
      openAdvisor(t.getAttribute("data-open-advisor") || "");
    }
  });
  // Any anchor to #best-picks opens advisor instead of jumping
  document.addEventListener("DOMContentLoaded", ()=>{
    $$('a[href="#best-picks"]').forEach(a=>{
      a.addEventListener("click", (e)=>{ e.preventDefault(); openAdvisor("solo"); });
    });
  });

  /* ---------- 2) Route “Templates” to the article, “Use cases” to section ---------- */
  document.addEventListener("DOMContentLoaded", ()=>{
    const templatesUrl = "https://contentrepurpose.pro/blog/linkedin-post-templates/";
    // Top nav + mobile nav + shortcuts
    $$('a[href="#templates"]').forEach(a=> a.setAttribute("href", templatesUrl));
    // In case any link actually says “Templates” but has wrong href
    $$('a').forEach(a=>{
      if ((a.textContent||"").trim().toLowerCase() === "templates") a.setAttribute("href", templatesUrl);
    });
  });

  /* ---------- 3) Manage Billing buttons (guard for auth) ---------- */
  async function openBillingPortal(btn){
    const old = btn.textContent; btn.disabled = true; btn.textContent = "Opening…";
    try{
      const r = await fetch(`${WORKER_BASE}/api/billing/portal`,{
        method:"POST", headers: await getAuthHeaders(),
        body: JSON.stringify({ return_url: location.href })
      });
      const j = await r.json();
      if (!r.ok) throw new Error(j?.error?.message || "Portal error");
      location.href = j.url;
    }catch(e){ alert(e.message||"Portal error"); btn.disabled=false; btn.textContent=old; }
  }
  document.addEventListener("DOMContentLoaded", ()=>{
    ["manageBilling","manageBilling_m","manageBilling2","pricingManageBilling_inline"].forEach(id=>{
      const b = document.getElementById(id);
      if (b) b.addEventListener("click", ()=> openBillingPortal(b));
    });
  });

  /* ---------- 4) Locked previews for plan-gated features (visible but non-interactive) ---------- */
  function addLockedOverlay(el, label){
    if (!el || el.__lockedApplied) return;
    el.__lockedApplied = true;
    el.classList.add("relative");
    // Prevent interaction
    el.style.pointerEvents = "none";
    el.style.userSelect = "none";
    el.style.opacity = "0.72";

    const ov = document.createElement("div");
    ov.setAttribute("aria-hidden","true");
    ov.className = "absolute inset-0 rounded-xl flex items-end justify-end p-3";
    ov.style.pointerEvents = "auto"; // overlay catches clicks
    ov.innerHTML = `
      <div class="flex items-center gap-2">
        <span class="px-2 py-1 rounded-full text-xs bg-black text-white">Locked</span>
        <button type="button" class="btn btn-primary">Unlock ${label}</button>
      </div>`;
    // Click → if authed, open Pricing; if guest, open Auth
    ov.addEventListener("click", (e)=>{
      e.stopPropagation();
      const authed = document.body.getAttribute("data-auth")==="authed";
      if (authed) { location.hash = "#pricing"; }
      else {
        const dlg = document.getElementById("auth");
        dlg && dlg.showModal ? dlg.showModal() : (location.hash="#pricing");
      }
    });
    el.appendChild(ov);
  }

  // Show previews for Starter+/Creator+/Business sections to guests and free users
  function enablePlanPreviews(){
    const plan = (document.body.getAttribute("data-plan")||"free").toLowerCase();
    const isGuest = (document.body.getAttribute("data-auth")||"guest")!=="authed";
    if (plan==="free" || isGuest){
      // Force-visualize gated blocks and overlay them
      const styleId = "gate-preview-style";
      if (!document.getElementById(styleId)){
        const st = document.createElement("style");
        st.id = styleId;
        st.textContent = `
          body[data-plan="free"] .plan-starter-plus,
          body[data-plan="free"] .plan-creator-plus,
          body[data-plan="free"] .plan-business-only,
          body[data-auth="guest"] .plan-starter-plus,
          body[data-auth="guest"] .plan-creator-plus,
          body[data-auth="guest"] .plan-business-only{ display: block !important; }
        `;
        document.head.appendChild(st);
      }
      // Apply overlays with tier labels
      $$(".plan-starter-plus").forEach(el=> addLockedOverlay(el, "Starter"));
      $$(".plan-creator-plus").forEach(el=> addLockedOverlay(el, "Creator"));
      $$(".plan-business-only").forEach(el=> addLockedOverlay(el, "Business"));
      // Quick publish is authed-only; preview it to guests too
      $$(".only-authed").forEach(el=>{
        if (getComputedStyle(el).display === "none"){
          // show and overlay
          el.style.display = "block";
          addLockedOverlay(el, "Starter");
        }
      });
    }
  }

  /* ---------- 5) Finalize auth paint & previews on load and auth change ---------- */
  async function refreshAfterAuth(){
    try{
      // Repaint status via existing function from Part 1/4 if present
      if (window.fetchStatusAndPaint) await window.fetchStatusAndPaint();
    }catch{}
    enablePlanPreviews();
  }

  document.addEventListener("DOMContentLoaded", refreshAfterAuth);
  // If Supabase is present, react to auth changes too
  document.addEventListener("DOMContentLoaded", ()=>{
    try{
      if (window.supabase && window.supabase.auth){
        window.supabase.auth.onAuthStateChange(()=> refreshAfterAuth());
      }
    }catch{}
  });

  /* ---------- 6) Minor UX guards ---------- */
  // If any link still points to “/#best-picks”, intercept to advisor
  document.addEventListener("click", (e)=>{
    const a = e.target.closest('a[href$="#best-picks"]');
    if (a){ e.preventDefault(); openAdvisor("solo"); }
  });

  // Smooth scroll to #use-cases if present
  document.addEventListener("DOMContentLoaded", ()=>{
    const link = $('a[href="#use-cases"]');
    if (link){
      link.addEventListener("click", (e)=>{
        const sec = document.getElementById("use-cases");
        if (sec){ e.preventDefault(); sec.scrollIntoView({behavior:"smooth",block:"start"}); }
      });
    }
  });

  // Clean magic-link residue if any (extra belt & braces)
  document.addEventListener("DOMContentLoaded", ()=>{
    try{
      if (location.hash && /access_token|refresh_token|type=recovery/i.test(location.hash)){
        history.replaceState({}, "", location.pathname + location.search);
      }
    }catch{}
  });
})();
</script>
<!-- ===== /FINAL BOOT/POLISH ===== -->
<body>
</html>
</body>
