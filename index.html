<!doctype html>
<html lang="en" class="h-full">
<head>
  <!-- Google Ads / gtag -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=AW-17511593434"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'AW-17511593434');
  </script>

  <!-- Core meta -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ContentRepurpose.pro — AI Content Repurposing Software for LinkedIn, X (Twitter), Instagram, TikTok, Reddit, Facebook, Quora + Article Optimizer, Scheduler & Analytics</title>
  <meta name="description" content="Paste a URL, blog, or idea and instantly generate platform-perfect posts for LinkedIn, X, Instagram, TikTok, Reddit, Facebook, Quora and Email. Includes Article Optimizer, per-platform Optimize actions, Scheduler, and lightweight Analytics. BYOK supported." />
  <link rel="canonical" href="https://contentrepurpose.pro/">
  <meta name="robots" content="index,follow,max-image-preview:large,max-snippet:-1,max-video-preview:-1" />
  <meta name="theme-color" content="#0a0d18">
  <meta name="color-scheme" content="dark light">

  <!-- Optional: Supabase (fill these if you want direct client auth as well) -->
  <meta name="supabase-url" content="https://ynkoavaeadlzlwylmfmu.supabase.co">
  <meta name="supabase-anon" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inlua29hdmFlYWRsemx3eWxtZm11Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc5OTAxNDgsImV4cCI6MjA3MzU2NjE0OH0.1yM5yDo0MI9Upzt4GkLyf1mqvDXfb3DXvC0ouOLtRoU">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2" defer></script>

  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="ContentRepurpose.pro — Paste once. Publish everywhere.">
  <meta property="og:description" content="AI content repurposing across LinkedIn, X, Instagram, TikTok, Reddit, Facebook, Quora + Article Optimizer, Scheduler & Analytics." />
  <meta property="og:image" content="/og-cover.png">
  <meta property="og:url" content="https://contentrepurpose.pro/">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="ContentRepurpose.pro — AI Content Repurposing">
  <meta name="twitter:description" content="Turn any URL or idea into platform-perfect content.">
  <meta name="twitter:image" content="/og-cover.png">

  <!-- (Optional, not used by rankings but harmless) -->
  <meta name="keywords" content="content repurposing, ai content repurposing, linkedin post generator, twitter thread generator, instagram caption generator, tiktok script generator, reddit post generator, quora answer generator, email newsletter generator, article optimizer, ai social media tool, content scheduler, content analytics, byok openrouter" />

  <!-- Preconnects -->
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <!-- Fonts & CSS -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- (Chart.js if needed later in member analytics) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js" defer></script>

  <!-- Global App Config -->
  <script>
    window.APP_CONFIG = {
      demo: { monthlyLimit: 5, upsellAfter: 2 },
      plans: {
        Free:     { platformDaily: 5,  byokDaily: 5,   scheduler: false, analytics: false },
        Starter:  { platformDaily: 25, byokDaily: 100, scheduler: true,  analytics: true  },
        Creator:  { platformDaily: 50, byokDaily: 300, scheduler: true,  analytics: true  },
        Business: { platformDaily: 100, byokDaily: Infinity, scheduler: true, analytics: true }
      },
      platforms: [
        { key:"linkedin", label:"LinkedIn",  icon:"#i-li" },
        { key:"x",        label:"X (Twitter)", icon:"#i-x" },
        { key:"email",    label:"Email",     icon:"#i-mail" },
        { key:"instagram",label:"Instagram", icon:"#i-ig" },
        { key:"tiktok",   label:"TikTok",    icon:"#i-tt" },
        { key:"reddit",   label:"Reddit",    icon:"#i-reddit" },
        { key:"facebook", label:"Facebook",  icon:"#i-fb" },
        { key:"quora",    label:"Quora",     icon:"#i-quora" },
        { key:"li-article", label:"LinkedIn Article", icon:"#i-li" }
      ],
      pixels: { meta:"", tiktok:"", quora:"" }
    };

    (function(){
      try{
        const p=new URLSearchParams(location.search);
        const utm=['utm_source','utm_medium','utm_campaign','utm_term','utm_content'].reduce((o,k)=>(p.get(k)&&(o[k]=p.get(k))),{});
        if(Object.keys(utm).length){ localStorage.setItem('first_touch_utm', JSON.stringify(utm)); }
        if(!localStorage.getItem('session_id')) localStorage.setItem('session_id','sess_'+Math.random().toString(36).slice(2));
      }catch(e){}
    })();
  </script>

  <!-- Base styles -->
  <style>
    :root{ --brandA:#7AA2FF; --brandB:#FF2D2D; --ink:#0a0d18; --ink-2:#101425; --ring:rgba(122,162,255,.28); }
    html,body{font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    .txt-grad{background:linear-gradient(135deg,var(--brandA),var(--brandB));-webkit-background-clip:text;background-clip:text;color:transparent}
    .bg-grad{background:linear-gradient(135deg,var(--brandA),var(--brandB))}
    .card{border-radius:1.25rem;border:1px solid rgba(15,23,42,.10);background:rgba(255,255,255,.80);box-shadow:0 12px 40px rgba(2,6,23,.08)}
    .btn{padding:.65rem .95rem;border-radius:.9rem;border:1px solid rgba(148,163,184,.35)}
    .btn-primary{background:#0b0f1c;color:#fff}
    .chip{font-size:.72rem;padding:.22rem .52rem;border-radius:9999px;border:1px solid rgba(148,163,184,.35)}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace}
    .member-only{display:none!important;}
    [data-auth="member"] .guest-only{display:none!important;}
    [data-auth="member"] .member-only{display:initial!important;}
    .halo{position:absolute;filter:blur(60px);opacity:.55;pointer-events:none;transform:translateZ(0);background:radial-gradient(50% 50% at 50% 50%, rgba(122,162,255,.8), rgba(255,45,45,.65) 60%, transparent 70%);width:42rem;height:42rem;border-radius:50%;animation:float 16s ease-in-out infinite}
    .halo.h2{width:34rem;height:34rem;left:auto;right:-12rem;top:-6rem;animation-duration:18s;opacity:.5}
    .halo.h3{width:28rem;height:28rem;left:-10rem;top:26rem;animation-duration:22s;opacity:.45}
    @keyframes float{0%,100%{transform:translate3d(0,0,0)}50%{transform:translate3d(0,-20px,0)}}
    .orbit{position:absolute;inset:-32px;border-radius:24px;pointer-events:none;background:conic-gradient(from 0deg, rgba(122,162,255,.25), rgba(255,45,45,.18), rgba(122,162,255,.25));-webkit-mask:radial-gradient(closest-side,transparent 88%, black 89%);mask:radial-gradient(closest-side,transparent 88%, black 89%);animation:spin 18s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}
    .mock{border-radius:1rem;border:1px solid rgba(255,255,255,.12);background:linear-gradient(180deg,rgba(255,255,255,.75),rgba(255,255,255,.6))}
    @media (prefers-color-scheme:dark){.mock{background:linear-gradient(180deg,rgba(17,20,31,.88),rgba(17,20,31,.72))}
      body{background:var(--ink);color:#e9eef6}
      .card{background:rgba(14,16,22,.6);border-color:rgba(255,255,255,.08);box-shadow:0 24px 96px rgba(122,162,255,.08),0 14px 60px rgba(255,45,45,.06)}
    }
    .nav-sheet{position:fixed;inset:0 0 auto 0;background:rgba(0,0,0,.6);backdrop-filter:blur(8px);display:none}
    .nav-panel{position:absolute;top:0;right:0;width:82vw;max-width:380px;height:100%;background:rgba(14,16,22,.96);border-left:1px solid rgba(255,255,255,.08);padding:1rem}
    .nav-open .nav-sheet{display:block}
    .touch-target{min-height:44px;min-width:44px}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
  </style>

  <!-- Icons sprite -->
  <svg xmlns="http://www.w3.org/2000/svg" style="display:none">
    <symbol id="i-li" viewBox="0 0 24 24"><path fill="currentColor" d="M4.98 3.5C4.98 4.88 3.86 6 2.5 6S0 4.88 0 3.5 1.12 1 2.5 1s2.48 1.12 2.48 2.5zM.5 8h4V23h-4zM8 8h3.8v2.05h.05c.53-1.01 1.84-2.08 3.79-2.08C20.42 8 21 11.05 21 14.77V23h-4v-7.03c0-1.68-.03-3.85-2.35-3.85-2.35 0-2.71 1.83-2.71 3.72V23H8z"/></symbol>
    <symbol id="i-x" viewBox="0 0 24 24"><path fill="currentColor" d="M18.9 2H22l-8 9.13L23.3 22H16l-6-7.05L3 22H0l8.6-9.83L-0.2 2H6.9l5 6.1z"/></symbol>
    <symbol id="i-mail" viewBox="0 0 24 24"><path fill="currentColor" d="M2 4h20v16H2z"/><path fill="#fff" d="M2 6l10 7L22 6"/></symbol>
    <symbol id="i-ig" viewBox="0 0 24 24"><path fill="currentColor" d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm5 5a5 5 0 1 0 .001 10.001A5 5 0 0 0 12 7zm6-1a1 1 0 1 0 .001 2.001A1 1 0 0 0 18 6z"/></symbol>
    <symbol id="i-tt" viewBox="0 0 24 24"><path fill="currentColor" d="M16 2c1 2.5 2.7 4.1 5 4.3v4.1c-1.9-.1-3.6-.6-5-1.5v7.3c0 4-3.3 6.7-6.7 6.7C6 23 3 20 3 16.7 3 13.3 5.7 10 9.7 10c.5 0 1 .1 1.5.2V14c-.5-.1-1-.2-1.5-.2-2 0-3.7 1.6-3.7 3.7 0 2 1.6 3.7 3.7 3.7 2 0 3.7-1.6 3.7-3.7V2z"/></symbol>
    <symbol id="i-reddit" viewBox="0 0 24 24"><path fill="currentColor" d="M20 12.5c.6.5 1 1.2 1 2 0 2.8-4 5-9 5s-9-2.2-9-5c0-.8.4-1.5 1-2 .2-2.3 2.3-4 5.1-4.6l1-4.5 3.4.7-.6 2.7c2.9.1 5.2 1.8 5.1 3.7z"/></symbol>
    <symbol id="i-fb" viewBox="0 0 24 24"><path fill="currentColor" d="M13 22V12h3l1-4h-4V6.5C13 5.7 13.3 5 14.6 5H17V1h-3c-3 0-5 1.8-5 5v2H6v4h3v10z"/></symbol>
    <symbol id="i-quora" viewBox="0 0 24 24"><path fill="currentColor" d="M12 2c5.3 0 8.6 3.7 8.6 8.8 0 3.7-1.7 6.6-4.6 7.9l2.5 3.3-3.5 0-1.8-2.5c-.4.1-.8.1-1.2.1C7 19.6 3.4 16.2 3.4 10.8 3.4 5.7 6.7 2 12 2zm0 3.6c-3 0-4.9 2.3-4.9 5.2 0 3.3 1.9 5.2 4.9 5.2.5 0 .9 0 1.3-.2l-1.3-1.8 3.4 0 .6.8c1.5-1 2.3-2.7 2.3-4.9 0-2.9-1.9-5.2-4.9-5.2z"/></symbol>
    <symbol id="i-schedule" viewBox="0 0 24 24"><path fill="currentColor" d="M7 2h2v3H7V2m8 0h2v3h-2V2M3 7h18v14H3V7m8 2v5h5v-2h-3V9h-2z"/></symbol>
    <symbol id="i-analytics" viewBox="0 0 24 24"><path fill="currentColor" d="M3 3h2v18H3V3m4 8h2v10H7V11m4-6h2v16h-2V5m4 10h2v6h-2v-6m4-12h2v18h-2V3z"/></symbol>
  </svg>

  <!-- JSON-LD: Organization / Website / SoftwareApplication -->
  <script type="application/ld+json">{
    "@context":"https://schema.org",
    "@type":"Organization",
    "name":"ContentRepurpose.pro",
    "url":"https://contentrepurpose.pro/",
    "logo":"https://contentrepurpose.pro/logo.svg",
    "sameAs":["https://x.com/contentrepurpose","https://www.linkedin.com/company/contentrepurpose"]
  }</script>
  <script type="application/ld+json">{
    "@context":"https://schema.org",
    "@type":"WebSite",
    "url":"https://contentrepurpose.pro/",
    "name":"ContentRepurpose.pro",
    "potentialAction":{"@type":"SearchAction","target":"https://contentrepurpose.pro/search?q={q}","query-input":"required name=q"}
  }</script>
  <script type="application/ld+json">{
    "@context":"https://schema.org",
    "@type":"SoftwareApplication",
    "name":"ContentRepurpose.pro",
    "applicationCategory":"ContentCreationApplication",
    "operatingSystem":"Web",
    "offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},
    "featureList":[
      "AI Content Repurposing",
      "LinkedIn, X, Instagram, TikTok, Reddit, Facebook, Quora, Email",
      "Per-platform Optimize actions",
      "Article Optimizer (headings, FAQs, SEO)",
      "Scheduler (Starter+)",
      "Analytics (Starter+)",
      "BYOK via OpenRouter and providers"
    ]
  }</script>
</head>
<body class="min-h-full" data-auth="guest">
  <!-- background halos -->
  <div class="halo" style="left:-14rem; top:-10rem;"></div>
  <div class="halo h2"></div>
  <div class="halo h3"></div>

  <!-- HEADER / NAV -->
  <header class="sticky top-0 z-40 backdrop-blur bg-white/55 dark:bg-black/20 border-b border-white/30">
    <div class="max-w-7xl mx-auto px-4 md:px-5 py-4 flex items-center justify-between">
      <a href="/" class="flex items-center gap-3" aria-label="ContentRepurpose home">
        <svg width="36" height="36" viewBox="0 0 48 48" class="rounded-xl" aria-hidden="true">
          <defs><linearGradient id="g" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#7AA2FF"/><stop offset="100%" stop-color="#FF2D2D"/></linearGradient></defs>
          <rect x="0" y="0" width="48" height="48" rx="12" fill="url(#g)"/>
          <path d="M14 16h10a6 6 0 0 1 0 12H20v4h-6V16zm6 6v4h4a2 2 0 1 0 0-4h-4z" fill="white"/>
          <path d="M28 16h6v16h-6z" fill="white" opacity=".9"/>
        </svg>
        <span class="font-semibold tracking-tight">Content<span class="txt-grad">Repurpose</span></span>
      </a>

      <!-- Desktop nav -->
      <nav class="hidden md:flex items-center gap-6 text-sm">
        <a href="#demo" class="hover:opacity-80 guest-only">Live Demo</a>
        <a href="#how-it-works" class="hover:opacity-80 guest-only">How it works</a>
        <a href="#templates" class="hover:opacity-80 guest-only">Templates</a>
        <a href="#use-cases" class="hover:opacity-80 guest-only">Use cases</a>
        <a href="#pricing" class="hover:opacity-80">Pricing</a>

        <a href="#analytics" class="hover:opacity-80 member-only inline-flex items-center gap-2"><svg class="w-4 h-4"><use href="#i-analytics"/></svg> Analytics</a>
        <a href="#scheduler" class="hover:opacity-80 member-only inline-flex items-center gap-2"><svg class="w-4 h-4"><use href="#i-schedule"/></svg> Scheduler</a>

        <span id="planbadge" class="px-3 py-1 rounded-full text-xs bg-white/70 dark:bg-white/10 border border-white/50">Plan: Free</span>
        <button id="manageBilling" class="px-3 py-1 rounded-lg border hidden">Manage billing</button>

        <div class="flex items-center gap-2">
          <button id="loginBtn" class="px-3 py-1 rounded-lg border">Sign in</button>
          <button id="logoutBtn" class="px-3 py-1 rounded-lg border hidden">Sign out</button>
        </div>
      </nav>

      <!-- Mobile burger -->
      <button id="navToggle" class="md:hidden touch-target px-3 py-2 rounded-lg border" aria-expanded="false" aria-controls="mobileNav" aria-label="Open menu">
        <svg class="w-5 h-5" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2"/></svg>
      </button>
    </div>

    <!-- Mobile sheet -->
    <div id="mobileNav" class="nav-sheet" aria-hidden="true">
      <div class="nav-panel text-sm text-white">
        <div class="flex items-center justify-between">
          <span class="font-semibold">Menu</span>
          <button id="navClose" class="touch-target px-3 py-2 rounded-lg border border-white/20" aria-label="Close menu">
            <svg class="w-5 h-5" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M19 6.4 17.6 5 12 10.6 6.4 5 5 6.4 10.6 12 5 17.6 6.4 19 12 13.4 17.6 19 19 17.6 13.4 12z"/></svg>
          </button>
        </div>
        <nav class="mt-4 grid gap-2">
          <a href="#demo" class="px-3 py-2 rounded-lg hover:bg-white/10 guest-only">Live Demo</a>
          <a href="#how-it-works" class="px-3 py-2 rounded-lg hover:bg-white/10 guest-only">How it works</a>
          <a href="#templates" class="px-3 py-2 rounded-lg hover:bg-white/10 guest-only">Templates</a>
          <a href="#use-cases" class="px-3 py-2 rounded-lg hover:bg-white/10 guest-only">Use cases</a>
          <a href="#pricing" class="px-3 py-2 rounded-lg hover:bg-white/10">Pricing</a>
          <a href="#analytics" class="px-3 py-2 rounded-lg hover:bg-white/10 member-only inline-flex items-center gap-2"><svg class="w-4 h-4"><use href="#i-analytics"/></svg> Analytics</a>
          <a href="#scheduler" class="px-3 py-2 rounded-lg hover:bg-white/10 member-only inline-flex items-center gap-2"><svg class="w-4 h-4"><use href="#i-schedule"/></svg> Scheduler</a>
        </nav>
        <div class="mt-6 grid gap-2">
          <span id="planbadge_m" class="px-3 py-1 rounded-full text-xs bg-white/10 border border-white/20 w-fit">Plan: Free</span>
          <button id="manageBilling_m" class="px-3 py-2 rounded-lg border border-white/20 hidden">Manage billing</button>
          <button id="loginBtn_m" class="px-3 py-2 rounded-lg border border-white/20">Sign in</button>
          <button id="logoutBtn_m" class="px-3 py-2 rounded-lg border border-white/20 hidden">Sign out</button>
        </div>
      </div>
    </div>
  </header>
  <!-- HERO (marketing) -->
  <section class="relative guest-only" id="hero">
    <div class="max-w-7xl mx-auto px-4 md:px-5 pt-10 md:pt-16 grid lg:grid-cols-2 gap-8 md:gap-10 items-center">
      <div>
        <div id="heroBadgeWrap" class="inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs bg-white/70 dark:bg-white/10 border border-white/40">
          <span class="w-2 h-2 rounded-full bg-emerald-500"></span>
          <span id="heroBadge">Demo — <strong class="mx-1">5 runs / month</strong> (no login)</span>
        </div>

        <h1 class="mt-4 text-3xl md:text-5xl font-black leading-tight tracking-tight">
          Paste once. <span class="txt-grad">Publish everywhere.</span>
        </h1>
        <p class="mt-4 text-slate-600 dark:text-slate-300 max-w-xl">
          Turn any <strong>URL, blog, or idea</strong> into channel-ready drafts for
          <strong>LinkedIn</strong>, <strong>X</strong>, <strong>Instagram</strong>, <strong>TikTok</strong>,
          <strong>Reddit</strong>, <strong>Facebook</strong>, <strong>Quora</strong>, and <strong>Email</strong> —
          plus a one-click <strong>LinkedIn Article</strong>. Optimize per platform, schedule, and track performance.
        </p>

        <div class="mt-6 flex flex-wrap gap-3">
          <a href="#demo" class="px-4 py-3 rounded-xl font-semibold text-white bg-black hover:opacity-90">Try the Live Demo</a>
          <a href="#pricing" class="px-4 py-3 rounded-xl font-semibold border border-slate-300/60 hover:bg-white/50">See pricing</a>
          <button id="heroSignIn" class="px-4 py-3 rounded-xl font-semibold border border-slate-300/60">Sign in</button>
        </div>

        <!-- Platform strip -->
        <div class="mt-7 grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-3 max-w-lg">
          <span class="chip inline-flex items-center gap-2"><svg class="w-4 h-4"><use href="#i-li"/></svg> LinkedIn</span>
          <span class="chip inline-flex items-center gap-2"><svg class="w-4 h-4"><use href="#i-x"/></svg> X</span>
          <span class="chip inline-flex items-center gap-2"><svg class="w-4 h-4"><use href="#i-mail"/></svg> Email</span>
          <span class="chip inline-flex items-center gap-2"><svg class="w-4 h-4"><use href="#i-ig"/></svg> Instagram</span>
          <span class="chip inline-flex items-center gap-2"><svg class="w-4 h-4"><use href="#i-tt"/></svg> TikTok</span>
          <span class="chip inline-flex items-center gap-2"><svg class="w-4 h-4"><use href="#i-reddit"/></svg> Reddit</span>
          <span class="chip inline-flex items-center gap-2"><svg class="w-4 h-4"><use href="#i-fb"/></svg> Facebook</span>
          <span class="chip inline-flex items-center gap-2"><svg class="w-4 h-4"><use href="#i-quora"/></svg> Quora</span>
          <span class="chip inline-flex items-center gap-2"><svg class="w-4 h-4"><use href="#i-li"/></svg> LI Article</span>
        </div>

        <!-- Trust strip -->
        <div class="mt-6 flex items-center gap-3 text-xs text-slate-500 dark:text-slate-400">
          <span class="chip">Article Optimizer</span>
          <span class="chip">Per-platform Optimize</span>
          <span class="chip">Scheduler (Starter+)</span>
          <span class="chip">Analytics (Starter+)</span>
          <span class="chip">BYOK supported</span>
        </div>
      </div>

      <!-- Visual mock side -->
      <div class="relative">
        <div class="orbit" aria-hidden="true"></div>
        <div class="grid gap-4">
          <div class="mock p-4 card">
            <div class="text-xs text-slate-400">Command</div>
            <pre class="mono text-xs bg-black/85 text-emerald-200 rounded-xl p-4 h-40 overflow-auto" aria-label="CLI Preview">repurpose generate --channels linkedin,x,email,instagram,tiktok,reddit,facebook,quora
? outline created
? 2 X hooks + thread
? LI post + Article draft
? IG caption + hashtags
? TikTok script + on-screen text
? Reddit title + subreddit picks
? Email subject + body ready</pre>
          </div>
          <div class="grid md:grid-cols-2 gap-4">
            <div class="mock p-4 card">
              <div class="text-xs text-slate-400">LinkedIn</div>
              <div class="mt-2 h-24 text-sm text-slate-200/90 leading-relaxed">
                • Hook → value → CTA<br>
                • 6–10 lines, keywords kept<br>
                • One-click: LinkedIn Article
              </div>
            </div>
            <div class="mock p-4 card">
              <div class="text-xs text-slate-400">X (Twitter)</div>
              <div class="mt-2 h-24 text-sm text-slate-200/90 leading-relaxed">
                2 fast variants (≤ 280)<br>
                Thread expander on click<br>
                Hook bank A/B/C/D
              </div>
            </div>
          </div>
          <div class="grid md:grid-cols-2 gap-4">
            <div class="mock p-4 card">
              <div class="text-xs text-slate-400">Reddit</div>
              <div class="mt-2 h-24 text-sm text-slate-200/90 leading-relaxed">
                Title ideas + longform<br>
                Suggested subreddits<br>
                Credible sources prompt
              </div>
            </div>
            <div class="mock p-4 card">
              <div class="text-xs text-slate-400">TikTok</div>
              <div class="mt-2 h-24 text-sm text-slate-200/90 leading-relaxed">
                30–45s script beats<br>
                On-screen text plan<br>
                Hashtag sets
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Live activity strip (wired by JS) -->
    <div class="mt-8 md:mt-10">
      <div class="max-w-7xl mx-auto px-4 md:px-5">
        <div class="card p-4 md:p-5">
          <div class="flex items-center justify-between flex-wrap gap-3">
            <div class="flex items-center gap-2">
              <span class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></span>
              <strong class="tracking-tight">Generations today</strong>
              <span id="liveCount" class="chip">–</span>
            </div>
            <div class="text-xs text-slate-500">Real results update every 30s</div>
          </div>
          <div class="mt-3 overflow-hidden">
            <div id="liveFeed" class="flex gap-3 whitespace-nowrap text-[13px] will-change-transform"></div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- DEMO / GENERATOR (Guest) -->
  <section id="demo" class="relative guest-only scroll-mt-24">
    <div class="max-w-7xl mx-auto px-4 md:px-5 py-10 md:py-14">
      <!-- Demo quota banner -->
      <div class="mb-4 p-3 rounded-xl border card flex items-center justify-between flex-wrap gap-2">
        <div class="text-sm" id="demoCapBanner">You have 5 demo runs left this month.</div>
        <span id="quotaDemo" class="px-3 py-1 rounded-full text-xs bg-white/70 dark:bg-white/10 border border-white/50">This month: 0/5</span>
      </div>

      <div class="grid lg:grid-cols-12 gap-6 md:gap-8 items-start">
        <!-- LEFT: Inputs -->
        <div class="lg:col-span-5">
          <div class="card p-4 md:p-5">
            <div class="flex items-start justify-between">
              <div>
                <h2 class="text-xl md:text-2xl font-bold tracking-tight">Live Demo — No login</h2>
                <p class="mt-1 text-sm text-slate-500 dark:text-slate-400">Paste a URL or text. Pick channels. Generate.</p>
              </div>
            </div>

            <!-- Input: URL or Text (single box works for both) -->
            <div class="mt-5 grid gap-2">
              <label for="source_d" class="text-sm font-medium">Source (URL or text)</label>
              <textarea id="source_d" class="w-full p-3 rounded-xl border min-h-[160px]" placeholder="Paste a blog post, transcript, notes, or a URL like https://example.com/blog…"></textarea>
              <div class="text-xs text-slate-500">We’ll fetch and clean URLs, or summarize long text to keep coverage.</div>
            </div>

            <!-- Channel selector -->
            <div class="mt-5">
              <div class="text-sm font-medium">Choose channels</div>
              <div id="channelSelector" class="mt-3 flex flex-wrap gap-2">
                <button class="chip channel-pill" data-channel="linkedin" aria-pressed="true">LinkedIn</button>
                <button class="chip channel-pill" data-channel="x" aria-pressed="true">X</button>
                <button class="chip channel-pill" data-channel="email" aria-pressed="true">Email</button>
                <button class="chip channel-pill" data-channel="instagram" aria-pressed="true">Instagram</button>
                <button class="chip channel-pill" data-channel="tiktok" aria-pressed="false">TikTok</button>
                <button class="chip channel-pill" data-channel="reddit" aria-pressed="false">Reddit</button>
                <button class="chip channel-pill" data-channel="facebook" aria-pressed="false">Facebook</button>
                <button class="chip channel-pill" data-channel="quora" aria-pressed="false">Quora</button>
                <button class="chip channel-pill" data-channel="li_article" aria-pressed="false">LinkedIn Article</button>
              </div>
            </div>

            <!-- Optional intent -->
            <details class="mt-4">
              <summary class="cursor-pointer text-sm text-slate-500">Tone, audience & keywords (optional)</summary>
              <div class="grid grid-cols-1 sm:grid-cols-2 gap-2 mt-3">
                <select id="tone_d" class="p-3 rounded-xl border">
                  <option value="">Tone: Auto</option>
                  <option value="helpful">Helpful</option>
                  <option value="authoritative">Authoritative</option>
                  <option value="friendly">Friendly</option>
                  <option value="technical">Technical</option>
                  <option value="persuasive">Persuasive</option>
                  <option value="witty">Witty</option>
                </select>
                <select id="audience_d" class="p-3 rounded-xl border">
                  <option value="">Audience: General</option>
                  <option value="marketers">Marketers</option>
                  <option value="founders">Founders</option>
                  <option value="engineers">Engineers</option>
                  <option value="creators">Creators</option>
                </select>
              </div>
              <input id="primaryKeywords_d" class="mt-2 w-full p-3 rounded-xl border" placeholder="Primary keywords (comma separated)">
            </details>

            <!-- BYOK quick settings (demo) -->
            <details class="mt-4">
              <summary class="cursor-pointer text-sm text-slate-500">Use your own API key (BYOK)</summary>
              <div class="grid md:grid-cols-3 gap-3 mt-3">
                <input id="model_d" class="p-2 rounded-xl border" placeholder="Preferred model (optional)" />
                <select id="byok_provider_d" class="p-2 rounded-xl border">
                  <option value="">Provider (auto)</option>
                  <option value="openrouter">OpenRouter</option>
                  <option value="openai">OpenAI</option>
                  <option value="anthropic">Anthropic</option>
                  <option value="together">Together</option>
                  <option value="groq">Groq</option>
                  <option value="custom">Custom (OpenAI-compatible)</option>
                </select>
                <input id="byok_key_d" class="p-2 rounded-xl border" placeholder="Your API key" />
                <input id="byok_base_d" class="p-2 rounded-xl border md:col-span-2" placeholder="Custom base URL (if custom provider)" />
              </div>
              <p class="text-xs text-slate-500 mt-2">Your BYOK is used only when you click “Generate with your BYOK”.</p>
            </details>

            <!-- Actions -->
            <div class="mt-6 flex flex-wrap items-center gap-3">
              <button id="run_d" class="px-4 py-3 rounded-xl font-semibold text-white bg-black hover:opacity-90" type="button">Generate (Selected)</button>
              <button id="run-byok_d" class="px-4 py-3 rounded-xl font-semibold text-white bg-emerald-600 hover:opacity-90" type="button">Generate with your BYOK</button>
              <button id="clear_d" class="px-4 py-3 rounded-xl font-semibold border" type="button">Clear</button>
              <span id="status_d" class="text-sm text-slate-500" role="status" aria-live="polite"></span>
            </div>
          </div>

          <!-- Integrations (disabled in guest) -->
          <div class="mt-4 card p-4 md:p-5">
            <div class="flex items-center justify-between">
              <h3 class="font-semibold">Exports & Integrations</h3>
              <span class="chip">Sign in to connect</span>
            </div>
            <div class="mt-3 grid grid-cols-2 gap-2">
              <button class="px-3 py-2 rounded-lg border opacity-50 cursor-not-allowed" title="Sign in to connect Notion">Export to Notion</button>
              <button class="px-3 py-2 rounded-lg border opacity-50 cursor-not-allowed" title="Sign in to connect Trello">Export to Trello</button>
              <button class="px-3 py-2 rounded-lg border opacity-50 cursor-not-allowed" title="Sign in to connect Buffer">Send to Buffer</button>
              <button class="px-3 py-2 rounded-lg border opacity-50 cursor-not-allowed" title="Sign in to download CSVs">Download CSV</button>
            </div>
            <p class="mt-3 text-xs text-slate-500">Connect after you sign in. We support Notion, Trello, and Buffer OAuth.</p>
          </div>
        </div>

        <!-- RIGHT: Outputs -->
        <div class="lg:col-span-7" id="demoOutputs">
          <!-- Tabs -->
          <div class="card p-0 overflow-hidden">
            <div class="border-b flex flex-wrap">
              <button class="tab px-4 py-3 text-sm font-medium border-r active" data-tab="linkedin">LinkedIn</button>
              <button class="tab px-4 py-3 text-sm font-medium border-r" data-tab="li-article">LI Article</button>
              <button class="tab px-4 py-3 text-sm font-medium border-r" data-tab="x">X</button>
              <button class="tab px-4 py-3 text-sm font-medium border-r" data-tab="instagram">Instagram</button>
              <button class="tab px-4 py-3 text-sm font-medium border-r" data-tab="tiktok">TikTok</button>
              <button class="tab px-4 py-3 text-sm font-medium border-r" data-tab="reddit">Reddit</button>
              <button class="tab px-4 py-3 text-sm font-medium border-r" data-tab="facebook">Facebook</button>
              <button class="tab px-4 py-3 text-sm font-medium border-r" data-tab="quora">Quora</button>
              <button class="tab px-4 py-3 text-sm font-medium" data-tab="email">Email</button>
            </div>

            <!-- Panels -->
            <div id="panels_d" class="p-4 md:p-5">
              <!-- LinkedIn -->
              <div data-panel="linkedin">
                <div class="flex items-center justify-between gap-3">
                  <h4 class="font-semibold">LinkedIn Post</h4>
                  <div class="flex items-center gap-2">
                    <button id="optimize-li_d" class="btn">Optimize</button>
                    <button id="copy-li_d" class="btn">Copy</button>
                    <button id="publish-li_d" class="btn">Open LinkedIn</button>
                  </div>
                </div>
                <pre id="out-li_d" class="mt-3 whitespace-pre-wrap text-sm"></pre>
              </div>

              <!-- LI Article -->
              <div data-panel="li-article" class="hidden">
                <div class="flex items-center justify-between gap-3">
                  <h4 class="font-semibold">LinkedIn Article</h4>
                  <div class="flex items-center gap-2">
                    <button id="optimize-li-article_d" class="btn">Optimize</button>
                    <button id="copy-li-article_d" class="btn">Copy</button>
                    <button id="publish-li-article_d" class="btn">Open Publisher</button>
                  </div>
                </div>
                <pre id="out-li-article_d" class="mt-3 whitespace-pre-wrap text-sm"></pre>
              </div>

              <!-- X -->
              <div data-panel="x" class="hidden">
                <div class="flex items-center justify-between gap-3">
                  <h4 class="font-semibold">X (Twitter)</h4>
                  <div class="flex items-center gap-2">
                    <button id="optimize-x_d" class="btn">Optimize</button>
                    <button id="copy-x_d" class="btn">Copy</button>
                    <button id="publish-x_d" class="btn">Open Composer</button>
                  </div>
                </div>
                <pre id="out-x_d" class="mt-3 whitespace-pre-wrap text-sm"></pre>
              </div>

              <!-- Instagram -->
              <div data-panel="instagram" class="hidden">
                <div class="flex items-center justify-between gap-3">
                  <h4 class="font-semibold">Instagram</h4>
                  <div class="flex items-center gap-2">
                    <button id="optimize-ig_d" class="btn">Optimize</button>
                    <button id="copy-ig_d" class="btn">Copy</button>
                    <button id="publish-ig_d" class="btn">Open Creator Studio</button>
                  </div>
                </div>
                <pre id="out-ig_d" class="mt-3 whitespace-pre-wrap text-sm"></pre>
              </div>

              <!-- TikTok -->
              <div data-panel="tiktok" class="hidden">
                <div class="flex items-center justify-between gap-3">
                  <h4 class="font-semibold">TikTok Script</h4>
                  <div class="flex items-center gap-2">
                    <button id="optimize-tt_d" class="btn">Optimize</button>
                    <button id="copy-tt_d" class="btn">Copy</button>
                    <button id="publish-tt_d" class="btn">Open Upload</button>
                  </div>
                </div>
                <pre id="out-tt_d" class="mt-3 whitespace-pre-wrap text-sm"></pre>
              </div>

              <!-- Reddit -->
              <div data-panel="reddit" class="hidden">
                <div class="flex items-center justify-between gap-3">
                  <h4 class="font-semibold">Reddit</h4>
                  <div class="flex items-center gap-2">
                    <button id="optimize-reddit_d" class="btn">Optimize</button>
                    <button id="copy-reddit_d" class="btn">Copy</button>
                    <button id="publish-reddit_d" class="btn">Open Submit</button>
                  </div>
                </div>
                <pre id="out-reddit_d" class="mt-3 whitespace-pre-wrap text-sm"></pre>
              </div>

              <!-- Facebook -->
              <div data-panel="facebook" class="hidden">
                <div class="flex items-center justify-between gap-3">
                  <h4 class="font-semibold">Facebook</h4>
                  <div class="flex items-center gap-2">
                    <button id="optimize-fb_d" class="btn">Optimize</button>
                    <button id="copy-fb_d" class="btn">Copy</button>
                    <button id="publish-fb_d" class="btn">Open Composer</button>
                  </div>
                </div>
                <pre id="out-fb_d" class="mt-3 whitespace-pre-wrap text-sm"></pre>
              </div>

              <!-- Quora -->
              <div data-panel="quora" class="hidden">
                <div class="flex items-center justify-between gap-3">
                  <h4 class="font-semibold">Quora</h4>
                  <div class="flex items-center gap-2">
                    <button id="optimize-quora_d" class="btn">Optimize</button>
                    <button id="copy-quora_d" class="btn">Copy</button>
                    <button id="publish-quora_d" class="btn">Open Quora</button>
                  </div>
                </div>
                <div class="text-xs text-slate-400">Question ideas</div>
                <ul id="quora-qs_d" class="mt-1 text-sm space-y-1"></ul>
                <pre id="out-quora_d" class="mt-3 whitespace-pre-wrap text-sm"></pre>
              </div>

              <!-- Email -->
              <div data-panel="email" class="hidden">
                <div class="flex items-center justify-between gap-3">
                  <h4 class="font-semibold">Email</h4>
                  <div class="flex items-center gap-2">
                    <button id="optimize-em_d" class="btn">Optimize</button>
                    <button id="copy-em_d" class="btn">Copy</button>
                    <button id="publish-em_d" class="btn">Preview &amp; Send</button>
                  </div>
                </div>
                <div class="text-xs text-slate-400">Subject:</div>
                <pre id="out-em-subj_d" class="whitespace-pre-wrap text-sm mt-1"></pre>
                <div class="text-xs text-slate-400 mt-3">Body:</div>
                <pre id="out-em-body_d" class="whitespace-pre-wrap text-sm mt-1"></pre>
              </div>
            </div>
          </div>

          <!-- Helper: Keyword coverage & reading level (visual only) -->
          <div class="mt-4 grid md:grid-cols-2 gap-4">
            <div class="card p-4 md:p-5">
              <h4 class="font-semibold">Keyword Coverage</h4>
              <p class="text-xs text-slate-500 mt-1">We’ll ensure your chosen keywords appear naturally in outputs.</p>
              <ul id="kwCoverage" class="mt-3 text-sm grid gap-2"></ul>
            </div>
            <div class="card p-4 md:p-5">
              <h4 class="font-semibold">Readability</h4>
              <p class="text-xs text-slate-500 mt-1">We aim for concise, skimmable, platform-fit content.</p>
              <div class="mt-3">
                <div class="flex items-center justify-between text-sm">
                  <span>Estimated Grade Level</span><strong id="readGrade">—</strong>
                </div>
                <div class="mt-2">
                  <div class="w-full h-2 rounded-full bg-white/30 overflow-hidden">
                    <div id="readScoreBar" class="h-2 bg-grad" style="width: 0%"></div>
                  </div>
                </div>
                <div id="readTips" class="mt-2 text-xs text-slate-500"></div>
              </div>
            </div>
          </div>

          <!-- Save row (guest disabled) -->
          <div class="mt-4 card p-4 md:p-5">
            <div class="flex items-center justify-between">
              <div class="text-sm">
                <strong>Want to save outputs?</strong> Sign in for a personal history, per-platform libraries, and exports.
              </div>
              <div class="flex items-center gap-2">
                <button class="px-3 py-2 rounded-lg border guest-only" id="signinFromOutputs">Sign in</button>
              </div>
            </div>
          </div>

        </div> <!-- /RIGHT -->
      </div> <!-- /grid -->
    </div>
  </section>
<!-- === PART 5 / 8 — Trust, FAQs, Upsell Modal === -->

  <!-- TRUST / PROOF -->
  <section id="trust" class="scroll-mt-24">
    <div class="max-w-7xl mx-auto px-4 md:px-5 py-12">
      <div class="grid md:grid-cols-3 gap-4">
        <div class="p-5 rounded-2xl border card">
          <div class="text-xs text-slate-500">Generations today</div>
          <div class="text-3xl font-extrabold mt-1"><span id="proofCount">–</span></div>
          <p class="text-sm text-slate-500 mt-1">Real usage refreshes every 30 seconds.</p>
        </div>
        <div class="p-5 rounded-2xl border card">
          <div class="text-xs text-slate-500">Repurposing time saved</div>
          <div class="text-3xl font-extrabold mt-1">5× faster</div>
          <p class="text-sm text-slate-500 mt-1">Avg. from brief → platform-ready drafts.</p>
        </div>
        <div class="p-5 rounded-2xl border card">
          <div class="text-xs text-slate-500">Supported channels</div>
          <div class="text-3xl font-extrabold mt-1">9</div>
          <p class="text-sm text-slate-500 mt-1">LinkedIn, X, Instagram, TikTok, Reddit, Facebook, Quora, Email, LI Article.</p>
        </div>
      </div>

      <div class="mt-6 grid md:grid-cols-3 gap-4">
        <div class="p-5 rounded-2xl border">
          <strong>“Makes every platform feel native.”</strong>
          <p class="text-sm text-slate-500 mt-2">We turned one 900-word post into a LinkedIn article, Reddit longform, X thread, and IG caption in minutes.</p>
          <div class="mt-3 text-xs text-slate-400">— B2B Creator</div>
        </div>
        <div class="p-5 rounded-2xl border">
          <strong>“Finally using LinkedIn Articles.”</strong>
          <p class="text-sm text-slate-500 mt-2">Auto headings + takeaways + clean HTML export. Looks like we hand-crafted it.</p>
          <div class="mt-3 text-xs text-slate-400">— Content Lead</div>
        </div>
        <div class="p-5 rounded-2xl border">
          <strong>“Scheduler saves my mornings.”</strong>
          <p class="text-sm text-slate-500 mt-2">Preset bundles + weekly cadence = consistent posting without chaos.</p>
          <div class="mt-3 text-xs text-slate-400">— Solo Founder</div>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQS (Expanded) -->
  <section id="faqs" class="scroll-mt-24">
    <div class="max-w-5xl mx-auto px-4 md:px-5 py-12">
      <h2 class="text-2xl md:text-3xl font-extrabold tracking-tight">FAQs</h2>
      <div class="mt-5 space-y-3">
        <details class="p-4 rounded-xl border">
          <summary class="font-semibold">What’s new in this release?</summary>
          <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">
            TikTok, Reddit, Facebook, and Quora support; Article Optimizer with humanize/lengthen/FAQs/SEO; platform-specific “Optimize”; Scheduler &amp; Analytics (Starter+); and a refined UI that feels instant.
          </p>
        </details>

        <details class="p-4 rounded-xl border">
          <summary class="font-semibold">How does the platform-specific “Optimize” work?</summary>
          <p class="mt-2 text-sm">
            Click <em>Optimize</em> on any channel card. Examples: Reddit suggests communities and adapts tone; LinkedIn turns a post into an Article; X adds hooks and thread splits; Quora proposes questions and answer outlines; TikTok generates a 30–45s script with on-screen text; Email adds subject A/Bs and preheaders.
          </p>
        </details>

        <details class="p-4 rounded-xl border">
          <summary class="font-semibold">What are the Free plan limits?</summary>
          <p class="mt-2 text-sm">
            Free includes <strong>5 daily platform generations</strong>, <strong>BYOK 5/day</strong>, and <strong>Article Optimizer 1/day</strong>. Starter+ unlocks all platforms, Scheduler, and Analytics.
          </p>
        </details>

        <details class="p-4 rounded-xl border">
          <summary class="font-semibold">How do I use the Article Optimizer?</summary>
          <p class="mt-2 text-sm">
            Go to <em>Article Optimizer</em>, paste your article or add a URL. Choose passes (Humanize, Lengthen, FAQs, SEO, Headings) and click <strong>Optimize</strong>. Copy or download clean HTML, export to Notion/Trello, or generate drafts for selected channels.
          </p>
        </details>

        <details class="p-4 rounded-xl border">
          <summary class="font-semibold">What’s BYOK and why use it?</summary>
          <p class="mt-2 text-sm">
            <strong>Bring Your Own Key</strong> lets you use your own LLM provider (OpenRouter, OpenAI, Anthropic, Together, Groq, or a custom OpenAI-compatible base). You control costs and models. We enforce fair daily limits by plan.
          </p>
        </details>

        <details class="p-4 rounded-xl border">
          <summary class="font-semibold">Can I publish directly?</summary>
          <p class="mt-2 text-sm">
            Yes—connect <strong>Buffer</strong> to queue posts or export to <strong>Notion</strong>/<strong>Trello</strong>. Additionally, you can open each platform’s native composer for final tweaks before posting.
          </p>
        </details>

        <details class="p-4 rounded-xl border">
          <summary class="font-semibold">How do quotas and the demo work?</summary>
          <p class="mt-2 text-sm">
            The anonymous Live Demo is capped at <strong>5 runs / month</strong> per IP. After your second demo, you’ll see a prompt to <strong>sign in</strong> for daily limits (5/day on Free) and member features. Paid plans increase daily platform and BYOK limits.
          </p>
        </details>

        <details class="p-4 rounded-xl border">
          <summary class="font-semibold">Do you support teams and white-label?</summary>
          <p class="mt-2 text-sm">
            <strong>Business</strong> includes team seats, shared presets, and white-label exports. Invite teammates and manage seats under the Team section.
          </p>
        </details>

        <details class="p-4 rounded-xl border">
          <summary class="font-semibold">Which keywords describe ContentRepurpose best?</summary>
          <p class="mt-2 text-sm">
            AI content repurposing tool, social media post generator, LinkedIn post generator, Twitter/X thread generator, Instagram caption writer, TikTok script generator, Reddit post writer, Quora answer generator, article optimizer, scheduler, analytics, BYOK.
          </p>
        </details>
      </div>
    </div>

    <!-- FAQPage JSON-LD -->
    <script type="application/ld+json">
    {
      "@context":"https://schema.org",
      "@type":"FAQPage",
      "mainEntity":[
        {"@type":"Question","name":"What’s new in this release?","acceptedAnswer":{"@type":"Answer","text":"TikTok, Reddit, Facebook, and Quora support; Article Optimizer; platform Optimizer actions; Scheduler & Analytics; and improved UI."}},
        {"@type":"Question","name":"How does the platform-specific Optimizer work?","acceptedAnswer":{"@type":"Answer","text":"Click Optimize on any channel card to add Reddit communities, LinkedIn Articles, X hooks/threads, Quora questions/answers, TikTok scripts, and Email subject A/Bs."}},
        {"@type":"Question","name":"What are the Free plan limits?","acceptedAnswer":{"@type":"Answer","text":"Free includes 5 daily platform generations, BYOK 5/day, and Article Optimizer 1/day. Starter+ unlocks all platforms, Scheduler, and Analytics."}},
        {"@type":"Question","name":"How do I use the Article Optimizer?","acceptedAnswer":{"@type":"Answer","text":"Paste your article or add a URL, choose passes (Humanize, Lengthen, FAQs, SEO, Headings), click Optimize, then copy/download HTML or export."}},
        {"@type":"Question","name":"What’s BYOK and why use it?","acceptedAnswer":{"@type":"Answer","text":"Bring Your Own Key allows using your own LLM provider via OpenRouter, OpenAI, Anthropic, Together, Groq, or custom OpenAI-compatible base."}},
        {"@type":"Question","name":"Can I publish directly?","acceptedAnswer":{"@type":"Answer","text":"Yes—queue via Buffer or export to Notion/Trello. You can also open native composers for each platform."}},
        {"@type":"Question","name":"How do quotas and the demo work?","acceptedAnswer":{"@type":"Answer","text":"Anonymous demo is 5 runs/month per IP. After two runs we prompt sign-in for 5/day on Free and member features. Paid plans raise limits."}},
        {"@type":"Question","name":"Do you support teams and white-label?","acceptedAnswer":{"@type":"Answer","text":"Business includes team seats, shared presets, and white-label exports."}}
      ]
    }
    </script>
  </section>

  <!-- DEMO → SIGN-IN UPSELL MODAL (appears after 2 demo runs) -->
  <div id="upsellModal" class="fixed inset-0 z-[100] hidden" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="absolute inset-0 bg-black/60 backdrop-blur-sm"></div>
    <div class="relative mx-auto mt-24 w-[92vw] max-w-md">
      <div class="p-5 rounded-2xl border card bg-white/90 dark:bg-black/70">
        <div class="flex items-start justify-between">
          <h3 class="text-lg font-bold">Get 5/day + Scheduler &amp; Analytics</h3>
          <button id="upsellClose" class="px-2 py-1 rounded-lg border" aria-label="Close">✕</button>
        </div>
        <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">
          You’ve tried the demo. Create your free account for <strong>5 daily</strong> runs, save BYOK, and unlock member features.
        </p>
        <ul class="mt-3 text-sm list-disc pl-5 space-y-1">
          <li>Platform-perfect drafts for 9 channels</li>
          <li>Article Optimizer with clean HTML export</li>
          <li>Starter+: Scheduler &amp; Analytics</li>
        </ul>
        <div class="mt-4 grid grid-cols-2 gap-2">
          <button id="upsellLogin" class="px-4 py-2 rounded-lg border" type="button">Sign in</button>
          <button id="upsellUpgrade" class="px-4 py-2 rounded-lg bg-black text-white" type="button">Start Starter</button>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== MEMBER VIEW (SIGNED IN) ===== -->
  <section id="memberView" class="hidden member-only scroll-mt-24">
    <div class="max-w-7xl mx-auto px-4 md:px-5 pb-12">
      <!-- Header -->
      <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mt-8 mb-6">
        <div>
          <h2 class="text-2xl md:text-3xl font-extrabold tracking-tight">Dashboard</h2>
          <p class="text-slate-600 dark:text-slate-300">Welcome back, <span id="userEmail" class="font-medium"></span></p>
        </div>
        <div class="flex items-center gap-3">
          <span id="memberPlanBadge" class="px-3 py-1 rounded-full text-xs bg-white/70 dark:bg-white/10 border border-white/50">Plan: Free</span>
          <button id="manageBilling2" class="px-3 py-1 rounded-lg border hidden" type="button">Manage billing</button>
          <button id="logoutBtn2" class="px-3 py-1 rounded-lg border" type="button">Sign out</button>
        </div>
      </div>

      <!-- Quota tiles -->
      <div id="quotaCards" class="grid sm:grid-cols-2 lg:grid-cols-4 gap-5 mb-6"></div>

      <!-- Member Generator -->
      <div class="card p-6" id="memberGenerator">
        <div class="flex items-center justify-between gap-3 flex-wrap">
          <h3 class="text-xl font-bold tracking-tight">Create new content</h3>
          <div class="flex items-center gap-3 flex-wrap">
            <label class="text-xs flex items-center gap-2">
              <input id="whitelabel" type="checkbox" class="hidden">
              <span id="wlLabel" class="chip hidden">White-label export</span>
            </label>
            <button id="exportPack" class="btn hidden" type="button">Export Project Pack (.md)</button>
            <span id="quotaMember" class="px-3 py-1 rounded-full text-xs bg-white/70 dark:bg-white/10 border border-white/50">Today: 0/5</span>
          </div>
        </div>

        <!-- Channel selector -->
        <div class="mt-4">
          <div class="text-xs text-slate-500 mb-2">Select channels</div>
          <div id="channelSelector_m" class="flex flex-wrap gap-2">
            <button class="chip channel-pill" data-channel="linkedin" aria-pressed="true">LinkedIn</button>
            <button class="chip channel-pill" data-channel="x" aria-pressed="true">X</button>
            <button class="chip channel-pill" data-channel="email" aria-pressed="true">Email</button>
            <button class="chip channel-pill" data-channel="instagram" aria-pressed="true">Instagram</button>
            <button class="chip channel-pill" data-channel="tiktok" aria-pressed="false">TikTok</button>
            <button class="chip channel-pill" data-channel="reddit" aria-pressed="false">Reddit</button>
            <button class="chip channel-pill" data-channel="facebook" aria-pressed="false">Facebook</button>
            <button class="chip channel-pill" data-channel="quora" aria-pressed="false">Quora</button>
            <button class="chip channel-pill" data-channel="li_article" aria-pressed="false">LinkedIn Article</button>
          </div>
        </div>

        <textarea id="source_m" class="mt-4 w-full h-40 p-3 rounded-xl border border-slate-200/70 focus:outline-none focus:ring-2 focus:ring-slate-300 dark:bg-black/30" placeholder="Paste a paragraph, blog snippet, or outline…"></textarea>

        <!-- BYOK quick settings -->
        <details class="mt-4">
          <summary class="cursor-pointer text-sm text-slate-500">BYOK settings (optional)</summary>
          <div class="grid md:grid-cols-3 gap-3 mt-3">
            <input id="model_m" class="p-2 rounded-xl border border-slate-200/70 dark:bg-black/30" placeholder="Preferred model (optional)" />
            <select id="byok_provider_m" class="p-2 rounded-xl border border-slate-200/70 dark:bg-black/30">
              <option value="">Provider (auto)</option>
              <option value="openrouter">OpenRouter</option>
              <option value="openai">OpenAI</option>
              <option value="anthropic">Anthropic</option>
              <option value="together">Together</option>
              <option value="groq">Groq</option>
              <option value="custom">Custom (OpenAI-compatible)</option>
            </select>
            <input id="byok_key_m" class="p-2 rounded-xl border border-slate-200/70 dark:bg-black/30" placeholder="Your API key (BYOK)" />
            <input id="byok_base_m" class="p-2 rounded-xl border border-slate-200/70 dark:bg-black/30 md:col-span-2" placeholder="Custom base URL (if custom provider)" />
            <button id="save_m" class="px-4 py-2 rounded-xl font-semibold border border-slate-300/60 hover:bg-white/50" type="button">Save to my account</button>
          </div>
          <p class="text-xs text-slate-500 mt-2">Your BYOK is only used when you click “Generate with your BYOK”.</p>
        </details>

        <div class="mt-4 flex flex-wrap items-center gap-3">
          <button id="run_m" class="px-4 py-2 rounded-xl font-semibold text-white bg-black hover:opacity-90" type="button">Generate (Selected)</button>
          <button id="run-byok_m" class="px-4 py-2 rounded-xl font-semibold text-white bg-emerald-600 hover:opacity-90" type="button">Generate with your BYOK</button>
          <button id="clear_m" class="px-4 py-2 rounded-xl font-semibold border border-slate-300/60 hover:bg-white/50" type="button">Clear</button>
          <span id="status_m" class="text-sm text-slate-500" role="status" aria-live="polite"></span>
        </div>
      </div>

      <!-- Batch Inputs -->
      <div class="card p-6 mt-6" id="memberBatch">
        <div class="flex items-center justify-between">
          <h3 class="text-lg font-bold">Batch inputs</h3>
          <small id="batchNote" class="text-slate-500"></small>
        </div>
        <p class="text-sm text-slate-500 mt-2">Add one idea or URL per line. Your plan controls how many lines per run.</p>
        <textarea id="batch_inputs" class="mt-3 w-full h-40 p-3 rounded-xl border border-slate-200/70 focus:outline-none focus:ring-2 focus:ring-slate-300 dark:bg-black/30" placeholder="Line 1: …&#10;Line 2: …&#10;Line 3: …" disabled></textarea>
        <div class="mt-3 flex items-center gap-3">
          <button id="run_batch" class="px-4 py-2 rounded-xl font-semibold text-white bg-black hover:opacity-90 hidden" type="button">Run batch</button>
          <span class="text-xs text-slate-500">Progress:</span>
        </div>
        <ul id="batch_progress" class="mt-3 text-sm space-y-1"></ul>
      </div>

      <!-- Outputs + Publish -->
      <div class="grid lg:grid-cols-2 gap-5 mt-6" id="memberOutputs">
        <!-- LinkedIn -->
        <div class="card p-5">
          <div class="flex justify-between items-center gap-2 flex-wrap">
            <strong class="tracking-tight inline-flex items-center gap-2">LinkedIn</strong>
            <div class="flex items-center gap-2">
              <button id="optimize-li_m" class="px-3 py-1 rounded-full text-xs border" type="button">Optimize</button>
              <button id="copy-li_m" class="px-3 py-1 rounded-full text-xs border" type="button">Copy</button>
              <button id="publish-li_m" class="px-3 py-1 rounded-full text-xs border" type="button">Publish</button>
              <button id="li-notion" class="px-3 py-1 rounded-full text-xs border hidden" type="button">Export to Notion</button>
              <button id="li-trello" class="px-3 py-1 rounded-full text-xs border hidden" type="button">Send to Trello</button>
              <button id="li-buffer" class="px-3 py-1 rounded-full text-xs border hidden" type="button">Queue in Buffer</button>
            </div>
          </div>
          <pre id="out-li_m" class="whitespace-pre-wrap text-sm mt-3"></pre>
        </div>

        <!-- X -->
        <div class="card p-5">
          <div class="flex justify-between items-center gap-2 flex-wrap">
            <strong class="tracking-tight inline-flex items-center gap-2">X (Twitter)</strong>
            <div class="flex items-center gap-2">
              <button id="optimize-x_m" class="px-3 py-1 rounded-full text-xs border" type="button">Optimize</button>
              <button id="copy-x_m" class="px-3 py-1 rounded-full text-xs border" type="button">Copy</button>
              <button id="publish-x_m" class="px-3 py-1 rounded-full text-xs border" type="button">Publish</button>
              <button id="x-notion" class="px-3 py-1 rounded-full text-xs border hidden" type="button">Export to Notion</button>
              <button id="x-trello" class="px-3 py-1 rounded-full text-xs border hidden" type="button">Send to Trello</button>
              <button id="x-buffer" class="px-3 py-1 rounded-full text-xs border hidden" type="button">Queue in Buffer</button>
            </div>
          </div>
          <pre id="out-x_m" class="whitespace-pre-wrap text-sm mt-3"></pre>
        </div>

        <!-- Email -->
        <div class="card p-5">
          <div class="flex justify-between items-center gap-2 flex-wrap">
            <strong class="tracking-tight inline-flex items-center gap-2">Email</strong>
            <div class="flex items-center gap-2">
              <button id="optimize-em_m" class="px-3 py-1 rounded-full text-xs border" type="button">Optimize</button>
              <button id="copy-em_m" class="px-3 py-1 rounded-full text-xs border" type="button">Copy</button>
              <button id="publish-em_m" class="px-3 py-1 rounded-full text-xs border" type="button">Preview &amp; Send</button>
              <button id="em-notion" class="px-3 py-1 rounded-full text-xs border hidden" type="button">Export to Notion</button>
              <button id="em-trello" class="px-3 py-1 rounded-full text-xs border hidden" type="button">Send to Trello</button>
              <button id="em-buffer" class="px-3 py-1 rounded-full text-xs border hidden" type="button">Queue in Buffer</button>
            </div>
          </div>
          <div class="text-xs text-slate-400">Subject:</div>
          <pre id="out-em-subj_m" class="whitespace-pre-wrap text-sm mt-1"></pre>
          <div class="text-xs text-slate-400 mt-3">Body:</div>
          <pre id="out-em-body_m" class="whitespace-pre-wrap text-sm mt-1"></pre>
        </div>

        <!-- Instagram -->
        <div class="card p-5">
          <div class="flex justify-between items-center gap-2 flex-wrap">
            <strong class="tracking-tight inline-flex items-center gap-2">Instagram</strong>
            <div class="flex items-center gap-2">
              <button id="optimize-ig_m" class="px-3 py-1 rounded-full text-xs border" type="button">Optimize</button>
              <button id="copy-ig_m" class="px-3 py-1 rounded-full text-xs border" type="button">Copy</button>
              <button id="publish-ig_m" class="px-3 py-1 rounded-full text-xs border" type="button">Open Creator Studio</button>
              <button id="ig-notion" class="px-3 py-1 rounded-full text-xs border hidden" type="button">Export to Notion</button>
              <button id="ig-trello" class="px-3 py-1 rounded-full text-xs border hidden" type="button">Send to Trello</button>
              <button id="ig-buffer" class="px-3 py-1 rounded-full text-xs border hidden" type="button">Queue in Buffer</button>
            </div>
          </div>
          <pre id="out-ig_m" class="whitespace-pre-wrap text-sm mt-3"></pre>
        </div>

        <!-- TikTok -->
        <div class="card p-5">
          <div class="flex justify-between items-center gap-2 flex-wrap">
            <strong class="tracking-tight inline-flex items-center gap-2">TikTok</strong>
            <div class="flex items-center gap-2">
              <button id="optimize-tt_m" class="px-3 py-1 rounded-full text-xs border" type="button">Optimize</button>
              <button id="copy-tt_m" class="px-3 py-1 rounded-full text-xs border" type="button">Copy</button>
              <button id="publish-tt_m" class="px-3 py-1 rounded-full text-xs border" type="button">Open Upload</button>
            </div>
          </div>
          <pre id="out-tt_m" class="whitespace-pre-wrap text-sm mt-3"></pre>
        </div>

        <!-- Reddit -->
        <div class="card p-5">
          <div class="flex justify-between items-center gap-2 flex-wrap">
            <strong class="tracking-tight inline-flex items-center gap-2">Reddit</strong>
            <div class="flex items-center gap-2">
              <button id="optimize-reddit_m" class="px-3 py-1 rounded-full text-xs border" type="button">Optimize</button>
              <button id="copy-reddit_m" class="px-3 py-1 rounded-full text-xs border" type="button">Copy</button>
              <button id="publish-reddit_m" class="px-3 py-1 rounded-full text-xs border" type="button">Open Submit</button>
            </div>
          </div>
          <div class="text-xs text-slate-400">Suggested communities</div>
          <div class="mt-1">
            <input id="redditSearch_m" class="w-full p-2 rounded-xl border border-slate-200/70 dark:bg-black/30" placeholder="Search communities (e.g., r/marketing)" />
            <ul id="redditSuggestions_m" class="mt-2 text-sm space-y-1"></ul>
          </div>
          <pre id="out-reddit_m" class="whitespace-pre-wrap text-sm mt-3"></pre>
        </div>

        <!-- Facebook -->
        <div class="card p-5">
          <div class="flex justify-between items-center gap-2 flex-wrap">
            <strong class="tracking-tight inline-flex items-center gap-2">Facebook</strong>
            <div class="flex items-center gap-2">
              <button id="optimize-fb_m" class="px-3 py-1 rounded-full text-xs border" type="button">Optimize</button>
              <button id="copy-fb_m" class="px-3 py-1 rounded-full text-xs border" type="button">Copy</button>
              <button id="publish-fb_m" class="px-3 py-1 rounded-full text-xs border" type="button">Open Composer</button>
            </div>
          </div>
          <pre id="out-fb_m" class="whitespace-pre-wrap text-sm mt-3"></pre>
        </div>

        <!-- Quora -->
        <div class="card p-5">
          <div class="flex justify-between items-center gap-2 flex-wrap">
            <strong class="tracking-tight inline-flex items-center gap-2">Quora</strong>
            <div class="flex items-center gap-2">
              <button id="optimize-quora_m" class="px-3 py-1 rounded-full text-xs border" type="button">Optimize</button>
              <button id="copy-quora_m" class="px-3 py-1 rounded-full text-xs border" type="button">Copy</button>
              <button id="publish-quora_m" class="px-3 py-1 rounded-full text-xs border" type="button">Open Quora</button>
            </div>
          </div>
          <div class="text-xs text-slate-400">Question ideas</div>
          <ul id="quora-qs_m" class="mt-1 text-sm space-y-1"></ul>
          <pre id="out-quora_m" class="whitespace-pre-wrap text-sm mt-3"></pre>
        </div>

        <!-- LinkedIn Article -->
        <div class="card p-5">
          <div class="flex justify-between items-center gap-2 flex-wrap">
            <strong class="tracking-tight inline-flex items-center gap-2">LinkedIn Article</strong>
            <div class="flex items-center gap-2">
              <button id="optimize-li-article_m" class="px-3 py-1 rounded-full text-xs border" type="button">Optimize</button>
              <button id="copy-li-article_m" class="px-3 py-1 rounded-full text-xs border" type="button">Copy</button>
              <button id="publish-li-article_m" class="px-3 py-1 rounded-full text-xs border" type="button">Open Publisher</button>
            </div>
          </div>
          <pre id="out-li-article_m" class="whitespace-pre-wrap text-sm mt-3"></pre>
        </div>
      </div>
    </div>
  </section>

  <!-- === PART 7 / 8 — Member Extras: Optimizer, Scheduler, Analytics, Presets, Growth, Integrations, Team === -->
<section id="memberExtras" class="member-only scroll-mt-24">
  <div class="max-w-7xl mx-auto px-4 md:px-5">

    <!-- Article Optimizer -->
    <section id="article-optimizer" class="card p-6 mt-6">
      <div class="flex items-center justify-between gap-3 flex-wrap">
        <h3 class="text-xl font-bold tracking-tight">Article Optimizer</h3>
        <span id="ao_status" class="text-sm text-slate-500"></span>
      </div>

      <div class="grid lg:grid-cols-2 gap-5 mt-4">
        <div>
          <label for="ao_source_url" class="text-xs text-slate-500">Source URL (optional)</label>
          <input id="ao_source_url" class="mt-1 w-full p-2 rounded-xl border border-slate-200/70 dark:bg-black/30" placeholder="https://example.com/article" />
          <label for="ao_source" class="text-xs text-slate-500 mt-4 block">Or paste article text</label>
          <textarea id="ao_source" class="mt-1 w-full h-56 p-3 rounded-xl border border-slate-200/70 focus:outline-none focus:ring-2 focus:ring-slate-300 dark:bg-black/30" placeholder="Paste full article…"></textarea>

          <div class="mt-4">
            <div class="text-xs text-slate-500 mb-2">Optimize for</div>
            <div class="flex flex-wrap gap-2">
              <label class="chip"><input id="ao_opt_humanize" type="checkbox" class="sr-only"> Humanize</label>
              <label class="chip"><input id="ao_opt_lengthen" type="checkbox" class="sr-only"> Lengthen</label>
              <label class="chip"><input id="ao_opt_addfaqs" type="checkbox" class="sr-only"> Add FAQs</label>
              <label class="chip"><input id="ao_opt_reoutline" type="checkbox" class="sr-only"> Re-outline</label>
              <label class="chip"><input id="ao_opt_headings" type="checkbox" class="sr-only"> Auto headings</label>
              <label class="chip"><input id="ao_opt_seo" type="checkbox" class="sr-only"> SEO pass</label>
            </div>
          </div>

          <div class="mt-4 flex flex-wrap items-center gap-3">
            <button id="ao_run" class="px-4 py-2 rounded-xl font-semibold text-white bg-black hover:opacity-90" type="button">Optimize</button>
            <button id="ao_run_byok" class="px-4 py-2 rounded-xl font-semibold text-white bg-emerald-600 hover:opacity-90" type="button">Optimize with BYOK</button>
            <button id="ao_to_drafts" class="px-4 py-2 rounded-xl font-semibold border border-slate-300/60 hover:bg-white/50" type="button">Generate Drafts for Selected Channels</button>
          </div>
        </div>

        <div>
          <div class="flex items-center justify-between gap-2">
            <strong class="tracking-tight">Optimized HTML</strong>
            <div class="flex items-center gap-2">
              <button id="ao_copy_html" class="px-3 py-1 rounded-full text-xs border" type="button">Copy</button>
              <button id="ao_download_html" class="px-3 py-1 rounded-full text-xs border" type="button">Download .html</button>
              <button id="ao-notion" class="px-3 py-1 rounded-full text-xs border hidden" type="button">Export to Notion</button>
              <button id="ao-trello" class="px-3 py-1 rounded-full text-xs border hidden" type="button">Send to Trello</button>
              <button id="ao-buffer" class="px-3 py-1 rounded-full text-xs border hidden" type="button">Queue in Buffer</button>
            </div>
          </div>
          <div id="ao_html" class="mt-3 p-4 rounded-xl border border-slate-200/70 dark:bg-black/30 text-sm overflow-auto" style="min-height: 16rem;"></div>
        </div>
      </div>
    </section>

    <!-- Scheduler (Starter+) -->
    <section id="schedulerCard" class="card p-6 mt-6">
      <div class="flex items-center justify-between gap-3 flex-wrap">
        <h3 class="text-lg font-bold">Scheduler</h3>
        <small class="text-slate-500">Starter+: schedule posts across channels</small>
      </div>

      <div class="grid md:grid-cols-2 gap-4 mt-3">
        <div>
          <label class="text-xs text-slate-500">Title</label>
          <input id="sch_title" class="mt-1 w-full p-2 rounded-xl border border-slate-200/70 dark:bg-black/30" placeholder="e.g., Launch post" />

          <div class="mt-3">
            <div class="text-xs text-slate-500 mb-2">Channels</div>
            <div id="sch_channels" class="flex flex-wrap gap-2">
              <button class="chip" data-channel="linkedin">LinkedIn</button>
              <button class="chip" data-channel="x">X</button>
              <button class="chip" data-channel="instagram">Instagram</button>
              <button class="chip" data-channel="email">Email</button>
              <button class="chip" data-channel="tiktok">TikTok</button>
              <button class="chip" data-channel="facebook">Facebook</button>
              <button class="chip" data-channel="reddit">Reddit</button>
              <button class="chip" data-channel="quora">Quora</button>
            </div>
          </div>

          <div class="grid sm:grid-cols-2 gap-3 mt-3">
            <div>
              <label class="text-xs text-slate-500">Start time</label>
              <input id="sch_start" type="datetime-local" class="mt-1 w-full p-2 rounded-xl border border-slate-200/70 dark:bg-black/30" />
            </div>
            <div>
              <label class="text-xs text-slate-500">Timezone</label>
              <select id="sch_tz" class="mt-1 w-full p-2 rounded-xl border border-slate-200/70 dark:bg-black/30">
                <option value="local">Local</option>
                <option value="UTC">UTC</option>
              </select>
            </div>
          </div>

          <div class="grid sm:grid-cols-2 gap-3 mt-3">
            <div>
              <label class="text-xs text-slate-500">Repeat</label>
              <select id="sch_rrule_select" class="mt-1 w-full p-2 rounded-xl border border-slate-200/70 dark:bg-black/30">
                <option value="">Once</option>
                <option value="DAILY">Daily</option>
                <option value="WEEKLY">Weekly</option>
                <option value="MONTHLY">Monthly</option>
                <option value="CUSTOM">Custom RRULE</option>
              </select>
            </div>
            <div>
              <label class="text-xs text-slate-500">Custom RRULE (optional)</label>
              <input id="sch_rrule_input" class="mt-1 w-full p-2 rounded-xl border border-slate-200/70 dark:bg-black/30" placeholder="RRULE:FREQ=WEEKLY;BYDAY=MO,TH;BYHOUR=9" disabled />
            </div>
          </div>

          <div class="mt-4 flex items-center gap-2">
            <button id="sch_add" class="px-4 py-2 rounded-xl font-semibold text-white bg-black hover:opacity-90" type="button">Add schedule</button>
            <span id="sch_msg" class="text-sm text-slate-500"></span>
          </div>
        </div>

        <div>
          <div class="flex items-center justify-between">
            <strong>Upcoming</strong>
            <button id="sch_refresh" class="px-3 py-1 rounded-full text-xs border" type="button">Refresh</button>
          </div>
          <ul id="sch_list" class="mt-3 text-sm space-y-2"></ul>
        </div>
      </div>
    </section>

    <!-- Analytics (Starter+) -->
    <section id="analyticsCard" class="card p-6 mt-6">
      <div class="flex items-center justify-between gap-3 flex-wrap">
        <h3 class="text-lg font-bold">Analytics</h3>
        <div class="flex items-center gap-2">
          <select id="ana_range" class="p-2 rounded-xl border border-slate-200/70 dark:bg-black/30">
            <option value="7d">Last 7 days</option>
            <option value="30d">Last 30 days</option>
            <option value="90d">Last 90 days</option>
          </select>
          <div id="ana_channels" class="hidden"></div>
        </div>
      </div>

      <div class="grid md:grid-cols-3 gap-4 mt-4">
        <div class="md:col-span-2">
          <div id="anaChart" class="h-64 rounded-xl border border-white/10 flex items-center justify-center text-sm text-slate-500">
            Chart loads here
          </div>
        </div>
        <div>
          <div id="anaSummary" class="grid grid-cols-2 gap-3">
            <div class="p-3 rounded-xl border">
              <div class="text-xs text-slate-500">Posts</div>
              <div id="ana_posts" class="text-xl font-bold">0</div>
            </div>
            <div class="p-3 rounded-xl border">
              <div class="text-xs text-slate-500">Reach</div>
              <div id="ana_reach" class="text-xl font-bold">–</div>
            </div>
            <div class="p-3 rounded-xl border">
              <div class="text-xs text-slate-500">CTR</div>
              <div id="ana_ctr" class="text-xl font-bold">–</div>
            </div>
            <div class="p-3 rounded-xl border">
              <div class="text-xs text-slate-500">Saves</div>
              <div id="ana_saves" class="text-xl font-bold">–</div>
            </div>
          </div>
        </div>
      </div>

      <div class="mt-4">
        <div class="text-sm font-semibold mb-2">Recent performance</div>
        <div id="anaTable" class="rounded-xl border overflow-x-auto"></div>
      </div>
    </section>

    <!-- Saved Presets + Growth -->
    <div class="grid md:grid-cols-2 gap-5 mt-6">
      <!-- Saved Presets -->
      <div class="card p-5">
        <div class="flex items-center justify-between">
          <strong>Saved presets</strong>
          <button id="addPreset" class="px-3 py-1 rounded-xl border" type="button">Save current</button>
        </div>
        <p class="text-xs text-slate-500 mt-2">Free: 0 • Solo Creator: 10 • Creator/Business: Unlimited</p>
        <ul id="presetList" class="mt-3 text-sm space-y-2"></ul>
      </div>

      <!-- Growth / Referrals -->
      <div class="card p-5">
        <strong>Grow your daily quota</strong>
        <p class="text-sm text-slate-500 mt-2">Share your invite to unlock bonus runs (visual; enforcement handled by Worker).</p>
        <div class="mt-3 grid gap-2">
          <input id="refLink" class="p-2 rounded-xl border border-slate-200/70 dark:bg-black/30" readonly value="">
          <div class="flex flex-wrap gap-2">
            <button id="shareLi" class="px-3 py-2 rounded-xl border" type="button">Share on LinkedIn</button>
            <button id="shareX" class="px-3 py-2 rounded-xl border" type="button">Share on X</button>
            <button id="copyRef" class="px-3 py-2 rounded-xl border" type="button">Copy link</button>
          </div>
        </div>
        <p id="refNote" class="text-xs text-slate-500 mt-2">Referrals this month: <span id="refCount">0</span></p>
      </div>
    </div>

    <!-- Plan Features -->
    <div class="card p-6 mt-6">
      <h3 class="text-lg font-bold">Your plan includes</h3>
      <ul id="featureList" class="mt-3 text-sm space-y-1"></ul>
    </div>

    <!-- Integrations -->
    <div class="card p-6 mt-6" id="integrationsCard">
      <h3 class="text-lg font-bold">Integrations</h3>
      <div class="grid md:grid-cols-3 gap-4 mt-3">
        <div class="p-4 rounded-xl border">
          <div class="flex items-center justify-between">
            <strong>Notion</strong><span id="notionState" class="chip">Disconnected</span>
          </div>
          <p class="text-xs text-slate-500 mt-1">Export pages to your workspace.</p>
          <div class="mt-3 flex gap-2">
            <button id="connectNotion" class="btn" type="button">Connect</button>
            <button id="disconnectNotion" class="btn hidden" type="button">Disconnect</button>
          </div>
        </div>
        <div class="p-4 rounded-xl border">
          <div class="flex items-center justify-between">
            <strong>Trello</strong><span id="trelloState" class="chip">Disconnected</span>
          </div>
          <p class="text-xs text-slate-500 mt-1">Send drafts as cards.</p>
          <div class="mt-3 flex gap-2">
            <button id="connectTrello" class="btn" type="button">Connect</button>
            <button id="disconnectTrello" class="btn hidden" type="button">Disconnect</button>
          </div>
        </div>
        <div class="p-4 rounded-xl border">
          <div class="flex items-center justify-between">
            <strong>Buffer</strong><span id="bufferState" class="chip">Disconnected</span>
          </div>
          <p class="text-xs text-slate-500 mt-1">Queue posts to social profiles.</p>
          <div class="mt-3 flex gap-2">
            <button id="connectBuffer" class="btn" type="button">Connect</button>
            <button id="disconnectBuffer" class="btn hidden" type="button">Disconnect</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Team (Business) -->
    <div class="card p-6 mt-6" id="teamCard">
      <h3 class="text-lg font-bold">Team (Business)</h3>
      <div class="mt-2 flex gap-2">
        <input id="inviteEmail" class="w-full p-2 rounded-xl border flex-1" placeholder="teammate@company.com">
        <button id="inviteBtn" class="btn" type="button">Invite member</button>
      </div>
      <ul id="seatList" class="mt-3 text-sm space-y-1"></ul>
      <div class="mt-4 text-xs text-slate-500">Content Calendar (Coming Soon)</div>
    </div>

  </div>
</section>

<!-- === PART 8 / 8 — Scripts + Auth + Wiring + Closing === -->
<script>
/* ==========================================================
   Utilities
========================================================== */
const $  = (sel, root=document) => root.querySelector(sel);
const $$ = (sel, root=document) => Array.from(root.querySelectorAll(sel));
const byId = (id) => document.getElementById(id);

function toast(msg, type='info', timeout=2600){
  let wrap = byId('toastWrap');
  if(!wrap){
    wrap = document.createElement('div');
    wrap.id='toastWrap';
    wrap.style.cssText='position:fixed;right:16px;bottom:16px;display:grid;gap:8px;z-index:99999';
    document.body.appendChild(wrap);
  }
  const el = document.createElement('div');
  el.textContent = msg;
  el.style.cssText = 'padding:10px 14px;border-radius:12px;border:1px solid rgba(0,0,0,.08);backdrop-filter:blur(6px);font-size:14px;box-shadow:0 6px 20px rgba(0,0,0,.12);background:rgba(255,255,255,.92)';
  if(type==='error') el.style.background = '#fee2e2';
  if(type==='success') el.style.background = '#dcfce7';
  wrap.appendChild(el);
  setTimeout(()=>el.remove(), timeout);
}

async function fetchJSON(url, opts={}){
  try{
    const res = await fetch(url, {credentials:'include', ...opts});
    const isJSON = (res.headers.get('content-type')||'').includes('application/json');
    const data = isJSON ? await res.json() : await res.text();
    if(!res.ok) return { ok:false, status:res.status, error:(data && data.error)||data||'Request failed' };
    return { ok:true, status:res.status, data };
  }catch(e){
    return { ok:false, status:0, error: e.message || String(e) };
  }
}

/* ==========================================================
   Supabase Auth (loads SDK if needed)
   - Set your keys once (recommended): 
       <meta name="supabase-url" content="https://YOUR-PROJECT.supabase.co">
       <meta name="supabase-anon-key" content="YOUR-ANON-KEY">
========================================================== */
function loadScriptOnce(src){
  return new Promise((resolve,reject)=>{
    if($(`script[src="${src}"]`)) return resolve();
    const s=document.createElement('script');
    s.src=src; s.async=true; s.onload=resolve; s.onerror=reject;
    document.head.appendChild(s);
  });
}

let sb = null;
async function ensureSupabase(){
  if(!window.supabase?.createClient){
    await loadScriptOnce('https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2');
  }
  const url = window.SUPABASE_URL || $('meta[name="supabase-url"]')?.content || 'https://YOUR-PROJECT.supabase.co';
  const anon= window.SUPABASE_ANON_KEY || $('meta[name="supabase-anon-key"]')?.content || 'YOUR-ANON-KEY';
  sb = window.supabase.createClient(url, anon);
}

async function getSbSession(){ 
  try{ const { data:{ session } } = await sb.auth.getSession(); return session||null; }
  catch{ return null; }
}

async function signInWith(provider='google'){
  try{
    const { data, error } = await sb.auth.signInWithOAuth({
      provider,
      options: { redirectTo: location.origin + location.pathname }
    });
    if(error) throw error;
  }catch(e){ toast(e.message||'Sign-in failed','error'); }
}

async function signOut(){
  try{ await sb.auth.signOut(); location.reload(); }
  catch(e){ toast('Sign-out failed','error'); }
}

/* ==========================================================
   UI Toggles & Helpers
========================================================== */
function setAuthUI(session){
  const isMember = !!session;
  document.body.setAttribute('data-auth', isMember ? 'member' : 'guest');
  // Badges
  if(byId('planbadge')) byId('planbadge').textContent = 'Plan: Free';
  if(byId('planbadge_m')) byId('planbadge_m').textContent = 'Plan: Free';
  // Buttons
  $$('#loginBtn, #loginBtn_m, #heroSignIn, #upsellSignIn, #upsellLogin, #signinFromOutputs, #ctaSignup2').forEach(b=> b && (b.classList.toggle('hidden', isMember)));
  $$('#logoutBtn, #logoutBtn_m, #logoutBtn2').forEach(b=> b && (!isMember ? b.classList.add('hidden') : b.classList.remove('hidden')));
  // Views (if present)
  const memberView = byId('memberView'); if(memberView) memberView.classList.toggle('hidden', !isMember);
  $$('.guest-only').forEach(el => el.classList.toggle('hidden', isMember));
  $$('.member-only').forEach(el => el.classList.toggle('hidden', !isMember));
}

function bindAuthButtons(){
  // Sign-in: default to Google; add GitHub link if you want → signInWith('github')
  $$('#loginBtn, #loginBtn_m, #heroSignIn, #upsellSignIn, #upsellLogin, #signinFromOutputs, #ctaSignup2, [data-action="signin"]').forEach(btn=>{
    btn?.addEventListener('click', ()=>signInWith('google'));
  });
  // Sign-out
  $$('#logoutBtn, #logoutBtn_m, #logoutBtn2, [data-action="signout"]').forEach(btn=>{
    btn?.addEventListener('click', signOut);
  });
}

function bindMobileNav(){
  const open = byId('navToggle');
  const close = byId('navClose');
  const sheet = byId('mobileNav');
  if(open) open.addEventListener('click', ()=>{
    document.documentElement.classList.add('nav-open');
    open.setAttribute('aria-expanded','true');
    sheet?.setAttribute('aria-hidden','false');
  });
  if(close) close.addEventListener('click', ()=>{
    document.documentElement.classList.remove('nav-open');
    open?.setAttribute('aria-expanded','false');
    sheet?.setAttribute('aria-hidden','true');
  });
}

function bindTabs(){
  const tabs = $$('.tab');
  const panels = $$('[data-panel]');
  function showTab(key){
    tabs.forEach(t=> t.classList.toggle('active', t.dataset.tab===key));
    panels.forEach(p=> p.classList.toggle('hidden', p.getAttribute('data-panel')!==key));
  }
  tabs.forEach(t => t.addEventListener('click', ()=> showTab(t.dataset.tab)));
  // Set initial active
  const init = tabs.find(t=>t.classList.contains('active'))?.dataset.tab || tabs[0]?.dataset.tab;
  if(init) showTab(init);
}

function bindPlatformToggles(){
  $$('.platform').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      btn.classList.toggle('btn-primary');
      btn.classList.toggle('active');
      const pressed = btn.getAttribute('aria-pressed') === 'true';
      btn.setAttribute('aria-pressed', pressed ? 'false' : 'true');
    });
  });
}

/* ==========================================================
   API endpoints (edge/worker you already have)
========================================================== */
const API = {
  session: '/api/auth/session',          // (optional) your server session if you mirror Supabase
  usage: '/api/usage',
  generate: '/api/generate',
  optimize: '/api/optimize',
  optimizerArticle: '/api/optimizer/article',
  billingCheckout: '/api/billing/checkout',
  billingPortal: '/api/billing/portal',
  scheduler: '/api/scheduler',
  analytics: '/api/analytics',
  presets: '/api/presets',
  teamInvite: '/api/team/invite',
  teamList: '/api/team/list',
  integrationsStatus: '/api/integrations/status',
  integrations: {
    notion:  { start:'/api/integrations/notion/oauth/start',   disconnect:'/api/integrations/notion/disconnect',  export:'/api/export/notion' },
    trello:  { start:'/api/integrations/trello/oauth/start',   disconnect:'/api/integrations/trello/disconnect',  export:'/api/export/trello' },
    buffer:  { start:'/api/integrations/buffer/oauth/start',   disconnect:'/api/integrations/buffer/disconnect',  queue:'/api/export/buffer' }
  }
};

async function openCheckout(plan='starter'){
  const r = await fetchJSON(`${API.billingCheckout}?plan=${encodeURIComponent(plan)}`, { method:'POST' });
  if(r.ok && r.data?.url) location.href = r.data.url;
  else toast(r.error || 'Could not start checkout','error');
}

async function openBillingPortal(){
  const r = await fetchJSON(API.billingPortal, { method:'POST' });
  if(r.ok && r.data?.url) location.href = r.data.url;
  else toast(r.error || 'Billing portal unavailable','error');
}

function bindPricing(){
  // Any button with data-checkout will trigger checkout
  $$('[data-checkout]').forEach(b => b.addEventListener('click', ()=> openCheckout(b.getAttribute('data-checkout'))));
  // Explicit IDs (if present)
  byId('checkout-starter')?.addEventListener('click', ()=>openCheckout('starter'));
  byId('checkout-creator')?.addEventListener('click', ()=>openCheckout('creator'));
  byId('checkout-business')?.addEventListener('click', ()=>openCheckout('business'));
  byId('checkout-starter-cta')?.addEventListener('click', ()=>openCheckout('starter'));
  $$('#manageBilling, #manageBilling_m, #manageBilling2').forEach(b=> b?.addEventListener('click', openBillingPortal));
}

/* ==========================================================
   Live strip & proof counters (best-effort)
========================================================== */
async function refreshLive(){
  // Try dedicated endpoint; fall back to /api/usage
  let live = await fetchJSON('/api/usage/live');
  if(!live.ok) live = await fetchJSON(API.usage);
  const count = live.data?.today || live.data?.count || live.data?.generations || null;
  if(byId('liveCount') && count!=null) byId('liveCount').textContent = String(count);
  // Optional feed marquee if your API returns items: [{t:'…'}, …]
  const feed = live.data?.feed || [];
  const wrap = byId('liveFeed');
  if(wrap && Array.isArray(feed) && feed.length){
    wrap.innerHTML = feed.map(x=>`<span class="px-3 py-1 rounded-full border bg-white/60 dark:bg-white/10">${(x.t||x).toString()}</span>`).join('');
  }
}

/* ==========================================================
   Demo generator (guest)
   - IDs expected (from earlier parts):
     #source_d (textarea), #channelSelector (pill .channel-pill with aria-pressed),
     #run_d, #run-byok_d, #clear_d, and various out-* placeholders (e.g., out-li_d).
========================================================== */
function selectedChannels(containerSel){
  return $$('.channel-pill[aria-pressed="true"]', $(containerSel)||document).map(x=>x.dataset.channel);
}
function copyToClipboard(text){ navigator.clipboard.writeText(text).then(()=>toast('Copied','success')).catch(()=>toast('Copy failed','error')); }

function paintOutputs(suffix, outputs){
  const map = {
    linkedin: `out-li_${suffix}`,
    x: `out-x_${suffix}`,
    instagram: `out-ig_${suffix}`,
    tiktok: `out-tt_${suffix}`,
    reddit: `out-reddit_${suffix}`,
    facebook: `out-fb_${suffix}`,
    quora: `out-quora_${suffix}`,
    email_subject: `out-em-subj_${suffix}`,
    email_body: `out-em-body_${suffix}`,
    li_article: `out-li-article_${suffix}`
  };
  const set = (id, v) => { const el = byId(id); if(el) el.textContent = v || ''; };
  set(map.linkedin, outputs.linkedin);
  set(map.x, outputs.x);
  set(map.instagram, outputs.instagram);
  set(map.tiktok, outputs.tiktok);
  set(map.reddit, outputs.reddit);
  set(map.facebook, outputs.facebook);
  set(map.quora, outputs.quora?.post || outputs.quora);
  set(map.email_subject, outputs.email?.subject);
  set(map.email_body, outputs.email?.body);
  set(map.li_article, outputs.li_article);
  // Quora questions list (optional)
  const ideas = outputs.quora?.ideas;
  if(Array.isArray(ideas) && byId(`quora-qs_${suffix}`)){
    byId(`quora-qs_${suffix}`).innerHTML = ideas.map(q=>`<li>• ${String(q)}</li>`).join('');
  }
}

function collectBYOK(suffix='_d'){
  const model = byId(`model${suffix}`)?.value?.trim() || '';
  const provider = byId(`byok_provider${suffix}`)?.value || '';
  const key = byId(`byok_key${suffix}`)?.value?.trim() || '';
  const base = byId(`byok_base${suffix}`)?.value?.trim() || '';
  return { model, provider, key, base };
}

function bindDemo(){
  const run = byId('run_d');
  const runByok = byId('run-byok_d');
  const clear = byId('clear_d');
  if(clear) clear.addEventListener('click', ()=>{ const s=byId('source_d'); if(s) s.value=''; });

  async function doRun(byok=false){
    const src = byId('source_d')?.value?.trim();
    if(!src){ toast('Add some source text or a URL first.','error'); return; }
    const channels = selectedChannels('#channelSelector');
    const body = { mode:'demo', channels, source:src, byok: byok ? collectBYOK('_d') : null };
    const r = await fetchJSON(API.generate, { method:'POST', headers:{'content-type':'application/json'}, body: JSON.stringify(body) });
    if(!r.ok){ toast(r.error||'Generation failed','error'); return; }
    paintOutputs('d', r.data||{});
    toast('Generated','success');
  }

  run?.addEventListener('click', ()=>doRun(false));
  runByok?.addEventListener('click', ()=>doRun(true));
}

/* ==========================================================
   Member generator + Optimizer (ids as in Part 7)
========================================================== */
function bindMember(){
  const run = byId('run_m');
  const runByok = byId('run-byok_m');
  const clear = byId('clear_m');
  const saveBYOK = byId('save_m');

  async function doRun(byok=false){
    const src = byId('source_m')?.value?.trim();
    if(!src){ toast('Add some source text or a URL first.','error'); return; }
    const channels = selectedChannels('#channelSelector_m');
    const body = { mode:'member', channels, source:src, byok: byok ? collectBYOK('_m') : null };
    const r = await fetchJSON(API.generate, { method:'POST', headers:{'content-type':'application/json'}, body: JSON.stringify(body) });
    if(!r.ok){ toast(r.error||'Generation failed','error'); return; }
    paintOutputs('m', r.data||{});
    toast('Generated','success');
  }

  run?.addEventListener('click', ()=>doRun(false));
  runByok?.addEventListener('click', ()=>doRun(true));
  clear?.addEventListener('click', ()=>{ const s=byId('source_m'); if(s) s.value=''; });

  saveBYOK?.addEventListener('click', async ()=>{
    const payload = { byok: collectBYOK('_m') };
    const r = await fetchJSON('/api/account/byok', { method:'POST', headers:{'content-type':'application/json'}, body: JSON.stringify(payload) });
    if(r.ok) toast('Saved to your account','success'); else toast(r.error||'Could not save','error');
  });

  // Per-channel optimize (member & demo)
  $$('[data-opt]').forEach(btn=>{
    btn.addEventListener('click', async ()=>{
      const opt = btn.getAttribute('data-opt'); // shorten | expand | hashtags | cta | tone-* | readability | keywords
      // active tab decides channel context
      const active = $('.tab.active')?.dataset.tab || 'linkedin';
      const suf = byId(`out-${active}_m`) ? 'm' : 'd';
      const outId = active==='email' ? [`out-em-subj_${suf}`, `out-em-body_${suf}`] : [`out-${active}_${suf}`];
      let content = '';
      if(Array.isArray(outId)){
        content = { subject: byId(outId[0])?.textContent||'', body: byId(outId[1])?.textContent||'' };
      }else{
        content = byId(outId[0])?.textContent || '';
      }
      const r = await fetchJSON(API.optimize, { method:'POST', headers:{'content-type':'application/json'}, body: JSON.stringify({ channel: active, content, action: opt }) });
      if(!r.ok){ toast(r.error||'Optimize failed','error'); return; }
      const res = r.data||{};
      if(res.email){
        if(res.email.subject && byId(outId[0])) byId(outId[0]).textContent = res.email.subject;
        if(res.email.body && byId(outId[1])) byId(outId[1]).textContent = res.email.body;
      }else if(res.text && byId(outId[0])){
        byId(outId[0]).textContent = res.text;
      }
      toast('Optimized','success');
    });
  });

  // Copy buttons (data-copy="channelKey")
  $$('[data-copy]').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const key = btn.getAttribute('data-copy'); // e.g., linkedin | x | email | li-article etc.
      if(key==='email'){
        const subj = byId('out-em-subj_m')?.textContent || byId('out-em-subj_d')?.textContent || '';
        const body = byId('out-em-body_m')?.textContent || byId('out-em-body_d')?.textContent || '';
        copyToClipboard(`Subject: ${subj}\n\n${body}`);
      }else{
        const m = byId(`out-${key}_m`)?.textContent;
        const d = byId(`out-${key}_d`)?.textContent;
        const val = m ?? d ?? '';
        copyToClipboard(val);
      }
    });
  });
}

/* ==========================================================
   Article Optimizer
========================================================== */
function bindArticleOptimizer(){
  const run = byId('ao_run');
  const runByok = byId('ao_run_byok');
  const copyHTML = byId('ao_copy_html');
  const dlHTML = byId('ao_download_html');

  async function doRun(byok=false){
    const url = byId('ao_source_url')?.value?.trim();
    const text = byId('ao_source')?.value?.trim();
    if(!url && !text){ toast('Provide a URL or paste article text','error'); return; }

    const options = {
      humanize: $('#ao_opt_humanize')?.checked || false,
      lengthen: $('#ao_opt_lengthen')?.checked || false,
      addfaqs: $('#ao_opt_addfaqs')?.checked || false,
      reoutline: $('#ao_opt_reoutline')?.checked || false,
      headings: $('#ao_opt_headings')?.checked || false,
      seo: $('#ao_opt_seo')?.checked || false
    };
    const body = { url: url||null, html: text||null, options, byok: byok ? collectBYOK('_m') : null };
    const r = await fetchJSON(API.optimizerArticle, { method:'POST', headers:{'content-type':'application/json'}, body: JSON.stringify(body) });
    if(!r.ok){ toast(r.error||'Optimizer failed','error'); return; }
    const html = r.data?.html || '';
    if(byId('ao_html')) byId('ao_html').innerHTML = html;
    toast('Optimized','success');
  }

  run?.addEventListener('click', ()=>doRun(false));
  runByok?.addEventListener('click', ()=>doRun(true));

  copyHTML?.addEventListener('click', ()=>{
    const html = byId('ao_html')?.innerHTML || '';
    copyToClipboard(html);
  });
  dlHTML?.addEventListener('click', ()=>{
    const html = byId('ao_html')?.innerHTML || '';
    const blob = new Blob([`<!doctype html><html><head><meta charset="utf-8"><title>Optimized Article</title></head><body>${html}</body></html>`],{type:'text/html'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a'); a.href=url; a.download='optimized-article.html'; a.click(); URL.revokeObjectURL(url);
  });
}

/* ==========================================================
   Scheduler
========================================================== */
function bindScheduler(){
  const addBtn = byId('sch_add');
  const refreshBtn = byId('sch_refresh');

  // toggle selectable chips
  $$('#sch_channels .chip').forEach(chip=>{
    chip.addEventListener('click', ()=>{
      chip.classList.toggle('selected'); chip.classList.toggle('ring-1');
    });
  });

  byId('sch_rrule_select')?.addEventListener('change', (e)=>{
    const custom = e.target.value === 'CUSTOM';
    const input = byId('sch_rrule_input'); if(input) input.disabled = !custom;
  });

  async function list(){
    const r = await fetchJSON(API.scheduler);
    if(!r.ok) return;
    const ul = byId('sch_list'); if(!ul) return;
    const items = r.data?.items || [];
    ul.innerHTML = items.length ? '' : '<li class="text-slate-500">No upcoming items</li>';
    items.forEach(it=>{
      const li = document.createElement('li');
      li.className = 'p-3 rounded-xl border flex items-center justify-between gap-3';
      li.innerHTML = `
        <div>
          <div class="font-medium">${String(it.title||'Untitled')}</div>
          <div class="text-xs text-slate-500">${new Date(it.start).toLocaleString()} • ${(it.channels||[]).join(', ')}</div>
        </div>
        <button data-id="${it.id}" class="px-3 py-1 rounded-full text-xs border">Cancel</button>
      `;
      li.querySelector('button').addEventListener('click', async ()=>{
        const del = await fetchJSON(`${API.scheduler}/${encodeURIComponent(it.id)}`, { method:'DELETE' });
        if(del.ok){ toast('Cancelled','success'); list(); } else toast(del.error||'Cancel failed','error');
      });
      ul.appendChild(li);
    });
  }

  async function add(){
    const title = byId('sch_title')?.value?.trim();
    const start = byId('sch_start')?.value;
    const tz = byId('sch_tz')?.value || 'local';
    const sel = byId('sch_rrule_select')?.value || '';
    const custom = byId('sch_rrule_input')?.value?.trim() || '';
    const channels = $$('#sch_channels .chip.selected').map(x=>x.dataset.channel);
    if(!title || !start || !channels.length){ byId('sch_msg').textContent='Title, start time, channels required'; return; }
    byId('sch_msg').textContent='Adding…';
    const payload = { title, start, tz, channels, rrule: sel==='CUSTOM'? custom : sel };
    const r = await fetchJSON(API.scheduler, { method:'POST', headers:{'content-type':'application/json'}, body: JSON.stringify(payload) });
    if(r.ok){ byId('sch_msg').textContent='Scheduled'; setTimeout(()=>byId('sch_msg').textContent='', 900); list(); }
    else { byId('sch_msg').textContent = r.error || 'Failed'; }
  }

  addBtn?.addEventListener('click', add);
  refreshBtn?.addEventListener('click', list);
  list();
}

/* ==========================================================
   Analytics
========================================================== */
function bindAnalytics(){
  const rangeSel = byId('ana_range');
  async function refresh(range = rangeSel?.value || '7d'){
    const r = await fetchJSON(`${API.analytics}?range=${encodeURIComponent(range)}`);
    if(!r.ok) return;
    const series = r.data?.series || [];
    // summary
    const totalPosts = series.reduce((a,b)=> a + Number(b.posts||0), 0);
    const reach = series.reduce((a,b)=> a + Number(b.reach||0), 0);
    const clicks= series.reduce((a,b)=> a + Number(b.clicks||0),0);
    const saves = series.reduce((a,b)=> a + Number(b.saves||0), 0);
    if(byId('ana_posts')) byId('ana_posts').textContent = totalPosts;
    if(byId('ana_reach')) byId('ana_reach').textContent = reach ? reach.toLocaleString() : '–';
    if(byId('ana_ctr')) byId('ana_ctr').textContent = reach ? ((clicks/reach)*100).toFixed(1)+'%' : '–';
    if(byId('ana_saves')) byId('ana_saves').textContent = saves ? String(saves) : '–';
    // chart (super-lightweight SVG)
    const wrap = byId('anaChart');
    if(wrap){
      if(!series.length){ wrap.textContent='No data yet'; }
      else {
        const width = wrap.clientWidth || 600, height = wrap.clientHeight || 220, pad=24;
        const ys = series.map(s=>Number(s.posts||0));
        const maxY = Math.max(1, ...ys);
        const pts = ys.map((y,i)=>{
          const x = pad + (i * (width-pad*2))/Math.max(1, ys.length-1);
          const yp = height - pad - (y/maxY)*(height-pad*2);
          return `${x},${yp}`;
        }).join(' ');
        wrap.innerHTML = `<svg width="${width}" height="${height}" role="img" aria-label="Posts over time"><polyline points="${pts}" fill="none" stroke="currentColor" stroke-width="2" opacity="0.9"/></svg>`;
      }
    }
    // table
    const rows = r.data?.table || [];
    const cont = byId('anaTable');
    if(cont){
      if(!rows.length){ cont.innerHTML = '<div class="p-4 text-slate-500">No recent posts</div>'; }
      else {
        cont.innerHTML = `
          <table class="min-w-full text-sm">
            <thead><tr class="text-left border-b">
              <th class="p-3">Date</th><th class="p-3">Channel</th><th class="p-3">Preview</th><th class="p-3">Reach</th><th class="p-3">Clicks</th><th class="p-3">Saves</th>
            </tr></thead>
            <tbody>
              ${rows.map(rw=>`
                <tr class="border-b">
                  <td class="p-3 whitespace-nowrap">${new Date(rw.date).toLocaleDateString()}</td>
                  <td class="p-3">${String(rw.channel||'')}</td>
                  <td class="p-3 max-w-[360px] truncate" title="${String(rw.preview||'')}">${String(rw.preview||'')}</td>
                  <td class="p-3">${Number(rw.reach||0).toLocaleString()}</td>
                  <td class="p-3">${Number(rw.clicks||0).toLocaleString()}</td>
                  <td class="p-3">${Number(rw.saves||0).toLocaleString()}</td>
                </tr>`).join('')}
            </tbody>
          </table>
        `;
      }
    }
  }
  rangeSel?.addEventListener('change', ()=>refresh(rangeSel.value));
  refresh();
}

/* ==========================================================
   Integrations, Presets, Team, Growth
========================================================== */
function bindIntegrations(){
  async function status(){
    const r = await fetchJSON(API.integrationsStatus);
    const st = r.ok ? r.data || {} : {};
    const notion = !!st.notion, trello = !!st.trello, buffer = !!st.buffer;
    if(byId('notionState')) byId('notionState').textContent = notion ? 'Connected' : 'Disconnected';
    if(byId('trelloState')) byId('trelloState').textContent = trello ? 'Connected' : 'Disconnected';
    if(byId('bufferState')) byId('bufferState').textContent = buffer ? 'Connected' : 'Disconnected';
    // toggle connect/disconnect
    const toggle = (name,on)=>{
      byId(`connect${name}`)?.classList.toggle('hidden', on);
      byId(`disconnect${name}`)?.classList.toggle('hidden', !on);
    };
    toggle('Notion', notion); toggle('Trello', trello); toggle('Buffer', buffer);
  }
  status();

  const go = (u)=>{ location.href = u; };
  byId('connectNotion')?.addEventListener('click', ()=>go(API.integrations.notion.start));
  byId('disconnectNotion')?.addEventListener('click', async()=>{ const r=await fetchJSON(API.integrations.notion.disconnect,{method:'POST'}); r.ok?toast('Disconnected','success'):toast(r.error||'Failed','error'); status(); });

  byId('connectTrello')?.addEventListener('click', ()=>go(API.integrations.trello.start));
  byId('disconnectTrello')?.addEventListener('click', async()=>{ const r=await fetchJSON(API.integrations.trello.disconnect,{method:'POST'}); r.ok?toast('Disconnected','success'):toast(r.error||'Failed','error'); status(); });

  byId('connectBuffer')?.addEventListener('click', ()=>go(API.integrations.buffer.start));
  byId('disconnectBuffer')?.addEventListener('click', async()=>{ const r=await fetchJSON(API.integrations.buffer.disconnect,{method:'POST'}); r.ok?toast('Disconnected','success'):toast(r.error||'Failed','error'); status(); });

  // Growth / referrals
  byId('copyRef')?.addEventListener('click', ()=>{ const v=byId('refLink')?.value||location.href; copyToClipboard(v); });
  byId('shareLi')?.addEventListener('click', ()=>{
    const v=byId('refLink')?.value||location.href;
    window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(v)}`,'_blank','noopener');
  });
  byId('shareX')?.addEventListener('click', ()=>{
    const v=byId('refLink')?.value||location.href;
    const text='I’m using ContentRepurpose to turn 1 idea into 9 posts. Try it: ';
    window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(v)}`,'_blank','noopener');
  });

  // Presets
  async function loadPresets(){
    const r = await fetchJSON(API.presets);
    if(!r.ok) return;
    const list = r.data?.items || [];
    const ul = byId('presetList'); if(!ul) return;
    ul.innerHTML = list.length ? '' : '<li class="text-slate-500">No presets yet</li>';
    list.forEach(p=>{
      const li=document.createElement('li');
      li.className='p-3 rounded-xl border flex items-center justify-between gap-2';
      li.innerHTML = `
        <div class="truncate"><span class="font-medium">${p.name}</span> <span class="text-xs text-slate-500">(${(p.channels||[]).join(', ')})</span></div>
        <div class="flex gap-2">
          <button class="px-3 py-1 rounded-full text-xs border" data-act="apply" data-id="${p.id}">Apply</button>
          <button class="px-3 py-1 rounded-full text-xs border" data-act="del" data-id="${p.id}">Delete</button>
        </div>`;
      ul.appendChild(li);
    });
    ul.querySelectorAll('button[data-act="apply"]').forEach(b=>{
      b.addEventListener('click', ()=>{
        // Fetch single preset for full details
        const id=b.dataset.id;
        const p = (r.data.items||[]).find(x=>x.id===id); if(!p) return;
        // Apply channels
        $$('#channelSelector_m .channel-pill').forEach(el=>{
          const on = p.channels?.includes(el.dataset.channel);
          el.setAttribute('aria-pressed', on ? 'true' : 'false');
          el.classList.toggle('ring-1', !!on);
        });
        // Apply BYOK
        if(p.byok){
          if(byId('model_m')) byId('model_m').value = p.byok.model||'';
          if(byId('byok_provider_m')) byId('byok_provider_m').value = p.byok.provider||'';
          if(byId('byok_key_m')) byId('byok_key_m').value = p.byok.key||'';
          if(byId('byok_base_m')) byId('byok_base_m').value = p.byok.base||'';
        }
        toast('Preset applied','success');
      });
    });
    ul.querySelectorAll('button[data-act="del"]').forEach(b=>{
      b.addEventListener('click', async()=>{
        const id=b.dataset.id;
        const del=await fetchJSON(`${API.presets}/${encodeURIComponent(id)}`,{method:'DELETE'});
        if(del.ok){ toast('Preset deleted','success'); loadPresets(); } else toast(del.error||'Delete failed','error');
      });
    });
  }
  byId('addPreset')?.addEventListener('click', async ()=>{
    const preset = {
      name: `Preset ${new Date().toLocaleString()}`,
      channels: selectedChannels('#channelSelector_m'),
      byok: collectBYOK('_m')
    };
    const r = await fetchJSON(API.presets, { method:'POST', headers:{'content-type':'application/json'}, body: JSON.stringify(preset) });
    r.ok ? toast('Preset saved','success') : toast(r.error||'Save failed','error');
    loadPresets();
  });
  loadPresets();

  // Team (Business)
  async function loadTeam(){
    const r = await fetchJSON(API.teamList);
    const ul = byId('seatList'); if(!ul) return;
    const list = r.ok ? (r.data?.items||[]) : [];
    ul.innerHTML = list.length ? '' : '<li class="text-slate-500">No team members yet</li>';
    list.forEach(m=>{
      const li=document.createElement('li');
      li.className='p-3 rounded-xl border flex items-center justify-between gap-2';
      li.innerHTML = `<div><span class="font-medium">${m.email}</span> <span class="text-xs text-slate-500">(${m.role||'member'})</span></div>
                      <button class="px-3 py-1 rounded-full text-xs border" data-id="${m.id}">Remove</button>`;
      li.querySelector('button').addEventListener('click', async()=>{
        const r2 = await fetchJSON(`${API.teamList}/${encodeURIComponent(m.id)}`, { method:'DELETE' });
        r2.ok ? (toast('Removed','success'), loadTeam()) : toast(r2.error||'Action failed','error');
      });
      ul.appendChild(li);
    });
  }
  byId('inviteBtn')?.addEventListener('click', async ()=>{
    const email = byId('inviteEmail')?.value?.trim();
    if(!email) return toast('Enter an email','error');
    const r = await fetchJSON(API.teamInvite, { method:'POST', headers:{'content-type':'application/json'}, body: JSON.stringify({ email }) });
    r.ok ? (toast('Invite sent','success'), byId('inviteEmail').value='', loadTeam()) : toast(r.error||'Invite failed','error');
  });
  loadTeam();
}

/* ==========================================================
   Boot
========================================================== */
(async function boot(){
  await ensureSupabase();
  bindMobileNav();
  bindTabs();
  bindPlatformToggles();
  bindPricing();
  bindDemo();
  bindMember();
  bindArticleOptimizer();
  bindScheduler();
  bindAnalytics();
  bindIntegrations();

  bindAuthButtons();
  const session = await getSbSession();
  setAuthUI(session);

  // Auth changes (supabase listener)
  try{
    sb.auth.onAuthStateChange((_event, sess)=>{ setAuthUI(sess); if(sess){ toast('Signed in','success'); } });
  }catch{}

  // Live strip refresh
  refreshLive();
  setInterval(refreshLive, 30000);
})();
</script>
</body>
</html>


