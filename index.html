<!doctype html>
<html lang="en" class="h-full">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>ContentRepurpose.pro — AI Content Repurposing Tool & Generator</title>
  <meta name="description" content="Paste once → get LinkedIn, X, Email, Instagram, Reddit & more. Article Optimizer, Scheduler, Analytics, Notion/Trello export, BYOK. Built for creators, marketers & teams." />
  <link rel="canonical" href="https://contentrepurpose.pro/">
  <meta name="theme-color" content="#0a0d18">
  <meta name="color-scheme" content="dark light">
  <meta name="robots" content="index,follow,max-video-preview:-1,max-image-preview:large,max-snippet:-1">
  <meta name="referrer" content="strict-origin-when-cross-origin">

  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="ContentRepurpose.pro — AI Content Repurposing Tool">
  <meta property="og:description" content="Turn one idea into everywhere content. Generator + Optimizer + Scheduler + Analytics. Export to Notion & Trello. BYOK supported.">
  <meta property="og:url" content="https://contentrepurpose.pro/">
  <meta property="og:image" content="/og-cover.png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="ContentRepurpose.pro — AI Content Generator">
  <meta name="twitter:description" content="Multi-channel drafts for LinkedIn, X, Email, Instagram, Reddit, Facebook, TikTok & Quora. Optimizer + Scheduler + Analytics.">
  <meta name="twitter:image" content="/og-cover.png">

  <!-- Favicons -->
  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="icon" href="/icon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">

  <!-- Fonts + Tailwind -->
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- (Optional perf) Preconnect to API origins -->
  <link rel="preconnect" href="https://contentflow-worker.frank-couchman.workers.dev" crossorigin>
  <link rel="preconnect" href="https://ynkoavaeadlzlwylmfmu.supabase.co" crossorigin>

  <!-- Global CSS -->
  <style>
    :root{ --brandA:#7AA2FF; --brandB:#FF2D2D; --ink:#0a0d18 }
    html,body{font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    .txt-grad{background:linear-gradient(135deg,var(--brandA),var(--brandB));-webkit-background-clip:text;background-clip:text;color:transparent}
    .bg-grad{background:linear-gradient(135deg,var(--brandA),var(--brandB))}
    .card{border-radius:1.25rem;border:1px solid rgba(15,23,42,.10);background:rgba(255,255,255,.80);box-shadow:0 12px 40px rgba(2,6,23,.08)}
    .badge{display:inline-flex;align-items:center;gap:.5rem;padding:.35rem .6rem;border-radius:9999px;border:1px solid rgba(255,255,255,.15);font-size:.75rem;background:rgba(255,255,255,.65)}
    .chip{font-size:.7rem;padding:.2rem .5rem;border-radius:9999px;border:1px solid rgba(148,163,184,.35)}
    .btn{padding:.6rem .9rem;border-radius:.9rem;border:1px solid rgba(148,163,184,.35)}
    .btn-primary{background:black;color:white}
    .glass{backdrop-filter: blur(12px); background:rgba(255,255,255,.62)}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace}
    .halo{position:absolute;filter:blur(60px);opacity:.55;pointer-events:none;transform:translateZ(0);
      background:radial-gradient(50% 50% at 50% 50%, rgba(122,162,255,.8), rgba(255,45,45,.65) 60%, transparent 70%);
      width:42rem;height:42rem;border-radius:50%;animation:float 16s ease-in-out infinite;}
    .halo.h2{width:34rem;height:34rem;right:-12rem;top:-6rem;animation-duration:18s;opacity:.5}
    .halo.h3{width:28rem;height:28rem;left:-10rem;top:26rem;animation-duration:22s;opacity:.45}
    @keyframes float{ 0%,100%{ transform: translate3d(0,0,0) } 50%{ transform: translate3d(0,-20px,0) } }
    .orbit{position:absolute;inset:-32px;border-radius:24px;pointer-events:none;
      background: conic-gradient(from 0deg, rgba(122,162,255,.25), rgba(255,45,45,.18), rgba(122,162,255,.25));
      -webkit-mask: radial-gradient(closest-side, transparent 88%, black 89%); mask: radial-gradient(closest-side, transparent 88%); animation: spin 18s linear infinite;}
    @keyframes spin{ to{ transform: rotate(360deg) } }
    .mock{border-radius:1rem;border:1px solid rgba(255,255,255,.12); background:linear-gradient(180deg,rgba(255,255,255,.75),rgba(255,255,255,.6));}
    @media (prefers-color-scheme:dark){ body{background:var(--ink);color:#e9eef6} .card{background:rgba(14,16,22,.6);border-color:rgba(255,255,255,.08);box-shadow:0 24px 96px rgba(122,162,255,.08),0 14px 60px rgba(255,45,45,.06)} .badge{background:rgba(255,255,255,.06);border-color:rgba(255,255,255,.12)} .mock{ background:linear-gradient(180deg,rgba(17,20,31,.88),rgba(17,20,31,.72)); } }
    .marquee{ display:grid; grid-auto-flow:column; gap:2rem; align-items:center; animation: scrollx 26s linear infinite }
    .marquee:hover{ animation-play-state: paused } @keyframes scrollx{ from{ transform: translateX(0) } to{ transform: translateX(-50%) } }
    .nav-sheet{position:fixed; inset:0 0 auto 0; background:rgba(0,0,0,.6); backdrop-filter:blur(8px); display:none}
    .nav-panel{position:absolute; top:0; right:0; width:82vw; max-width:380px; height:100%; background:rgba(14,16,22,.96); border-left:1px solid rgba(255,255,255,.08); padding:1rem}
    .nav-open .nav-sheet{display:block}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
    .icon { width: 1rem; height: 1rem; display: inline-block; vertical-align: -0.15em; }
    .touch-target{min-height:40px;min-width:40px}

    /* Plan-gating helpers */
    .only-guest{display:revert}
    .only-authed{display:none}
    .plan-free-only{display:none}
    .plan-starter-plus{display:none}
    .plan-creator-plus{display:none}
    .plan-business-only{display:none}
    body[data-auth="authed"] .only-guest{display:none}
    body[data-auth="authed"] .only-authed{display:revert}
    body[data-plan="free"] .plan-free-only{display:revert}
    body[data-plan="starter"] .plan-starter-plus,
    body[data-plan="creator"] .plan-starter-plus,
    body[data-plan="business"] .plan-starter-plus{display:revert}
    body[data-plan="creator"] .plan-creator-plus,
    body[data-plan="business"] .plan-creator-plus{display:revert}
    body[data-plan="business"] .plan-business-only{display:revert}
  </style>

  <!-- JSON-LD (Org + Site + App) -->
  <script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","name":"ContentRepurpose.pro","url":"https://contentrepurpose.pro/","logo":"https://contentrepurpose.pro/logo.svg","sameAs":["https://x.com/contentrepurpose","https://www.linkedin.com/company/contentrepurpose"]}</script>
  <script type="application/ld+json">{"@context":"https://schema.org","@type":"WebSite","url":"https://contentrepurpose.pro/","name":"ContentRepurpose.pro","potentialAction":{"@type":"SearchAction","target":"https://contentrepurpose.pro/search?q={q}","query-input":"required name=q"}}</script>
  <script type="application/ld+json">{"@context":"https://schema.org","@type":"SoftwareApplication","name":"ContentRepurpose.pro","applicationCategory":"ContentCreationApplication","operatingSystem":"Web","offers":{"@type":"Offer","price":"0","priceCurrency":"USD"}}</script>

  <!-- Worker base (keep as-is) -->
  <script>
    window.WORKER_BASE = "https://contentflow-worker.frank-couchman.workers.dev";
    window.SITE_ORIGIN = "https://contentrepurpose.pro";
  </script>
</head>
<body class="min-h-full" data-auth="guest" data-plan="free">
  <!-- Decorative halos -->
  <div class="halo" style="left:-14rem; top:-10rem;"></div>
  <div class="halo h2"></div>
  <div class="halo h3"></div>

  <!-- ===== HEADER ===== -->
  <header class="sticky top-0 z-40 backdrop-blur bg-white/55 dark:bg-black/20 border-b border-white/30">
    <div class="max-w-7xl mx-auto px-4 md:px-5 py-4 flex items-center justify-between">
      <a href="/" class="flex items-center gap-3" aria-label="ContentRepurpose home">
        <svg width="36" height="36" viewBox="0 0 48 48" class="rounded-xl" aria-hidden="true">
          <defs><linearGradient id="g" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#7AA2FF"/><stop offset="100%" stop-color="#FF2D2D"/></linearGradient></defs>
        <rect x="0" y="0" width="48" height="48" rx="12" fill="url(#g)"/>
        <path d="M14 16h10a6 6 0 0 1 0 12H20v4h-6V16zm6 6v4h4a2 2 0 1 0 0-4h-4z" fill="white"/>
        <path d="M28 16h6v16h-6z" fill="white" opacity=".9"/></svg>
        <span class="font-semibold tracking-tight">Content<span class="txt-grad">Repurpose</span></span>
      </a>

      <!-- Desktop nav -->
      <nav class="hidden md:flex items-center gap-6 text-sm">
        <a href="#demo" class="hover:opacity-80">Live Demo</a>
        <a href="https://contentrepurpose.pro/blog/linkedin-post-templates/" class="hover:opacity-80">Templates</a>
        <a href="#use-cases" class="hover:opacity-80">Use cases</a>
        <a href="#best-picks" class="hover:opacity-80">Best picks</a>
        <a href="#pricing" class="hover:opacity-80">Pricing</a>
        <a href="/blog" class="hover:opacity-80">Blog</a>

        <!-- Plan & auth controls -->
        <span id="planbadge" class="px-3 py-1 rounded-full text-xs bg-white/70 dark:bg-white/10 border border-white/50">Plan: Free</span>
        <button id="manageBilling" class="px-3 py-1 rounded-lg border hidden">Manage billing</button>
        <div class="flex items-center gap-2">
          <button id="loginBtn"  class="px-3 py-1 rounded-lg border only-guest">Sign in</button>
          <button id="logoutBtn" class="px-3 py-1 rounded-lg border only-authed hidden">Sign out</button>
        </div>
      </nav>

      <!-- Mobile toggle -->
      <button id="navToggle" class="md:hidden touch-target px-3 py-2 rounded-lg border" aria-expanded="false" aria-controls="mobileNav" aria-label="Open menu">☰</button>
    </div>

    <!-- Promo strip -->
    <div class="border-t border-white/40 bg-white/70 dark:bg-white/10">
      <div class="max-w-7xl mx-auto px-4 md:px-5 py-2 flex flex-wrap items-center justify-between gap-3 text-sm">
        <div class="flex items-center gap-2">
          <span class="px-2 py-0.5 rounded-full text-[11px] bg-black/80 text-white">LIMITED</span>
          <span>Use <strong class="mono">CONTENTOFF90</strong> for <strong>90% off</strong> the Creator plan.</span>
        </div>
        <div class="flex items-center gap-2">
          <button id="copyPromoBtn" class="px-3 py-1 rounded-lg border">Copy code</button>
          <a href="#pricing" class="px-3 py-1 rounded-lg bg-black text-white">See pricing</a>
        </div>
      </div>
    </div>

    <!-- Mobile sheet -->
    <div id="mobileNav" class="nav-sheet" aria-hidden="true">
      <div class="nav-panel text-sm text-white" role="dialog" aria-modal="true" aria-labelledby="mnav-title" tabindex="-1">
        <div class="flex items-center justify-between">
          <span id="mnav-title" class="font-semibold">Menu</span>
          <button id="navClose" class="touch-target px-3 py-2 rounded-lg border border-white/20" aria-label="Close menu">✕</button>
        </div>
        <nav class="mt-4 grid gap-2">
          <a href="#demo" class="px-3 py-2 rounded-lg hover:bg-white/10">Live Demo</a>
          <a href="https://contentrepurpose.pro/blog/linkedin-post-templates/" class="px-3 py-2 rounded-lg hover:bg-white/10">Templates</a>
          <a href="#use-cases" class="px-3 py-2 rounded-lg hover:bg-white/10">Use cases</a>
          <a href="#best-picks" class="px-3 py-2 rounded-lg hover:bg-white/10">Best picks</a>
          <a href="#pricing" class="px-3 py-2 rounded-lg hover:bg-white/10">Pricing</a>
          <a href="/blog" class="px-3 py-2 rounded-lg hover:bg-white/10">Blog</a>
        </nav>
        <div class="mt-6 grid gap-2">
          <span id="planbadge_m" class="px-3 py-1 rounded-full text-xs bg-white/10 border border-white/20 w-fit">Plan: Free</span>
          <button id="manageBilling_m" class="px-3 py-2 rounded-lg border border-white/20 hidden">Manage billing</button>
          <button id="loginBtn_m" class="px-3 py-2 rounded-lg border border-white/20 only-guest">Sign in</button>
          <button id="logoutBtn_m" class="px-3 py-2 rounded-lg border border-white/20 only-authed hidden">Sign out</button>
        </div>
      </div>
    </div>
  </header>

  <!-- ===== HERO ===== -->
  <section class="relative" id="hero">
    <div class="max-w-7xl mx-auto px-4 md:px-5 pt-10 md:pt-16 grid lg:grid-cols-2 gap-8 md:gap-10 items-center">
      <!-- Left: copy + CTAs -->
      <div>
        <!-- Badge swaps with auth -->
        <div id="heroBadgeWrap" class="inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs bg-white/70 dark:bg-white/10 border border-white/40">
          <span class="w-2 h-2 rounded-full bg-emerald-500"></span>
          <span class="only-guest">Demo — <strong class="mx-1">5 runs / month</strong> (no login)</span>
          <span class="only-authed hidden">Signed in — <strong id="heroPlanName">Free</strong> plan active</span>
        </div>

        <h1 class="mt-4 text-3xl md:text-5xl font-black leading-tight tracking-tight">
          AI <span class="txt-grad">Content Repurposing Tool</span> — turn one idea into everywhere content.
        </h1>

        <p class="mt-4 text-slate-600 dark:text-slate-300 max-w-xl">
          Paste once → get <strong>LinkedIn</strong>, <strong>X</strong>, <strong>Email</strong>, <strong>Instagram</strong>, <strong>Reddit</strong> & more.
          <br class="hidden md:block" />Export to <strong>Notion</strong> or <strong>Trello</strong>, schedule posts, track results. <strong>BYOK</strong> supported.
        </p>

        <!-- CTA rail -->
        <div class="mt-6 flex flex-wrap gap-3">
          <a href="#demo" class="px-4 py-3 rounded-xl font-semibold text-white bg-black hover:opacity-90 only-guest">Try the Live Demo</a>
          <a href="#demo" class="px-4 py-3 rounded-xl font-semibold text-white bg-black hover:opacity-90 only-authed hidden">Open Generator</a>
          <a href="#best-picks" class="px-4 py-3 rounded-xl font-semibold border border-slate-300/60 hover:bg-white/50">See best picks</a>
          <button id="heroSignIn" class="px-4 py-3 rounded-xl font-semibold border border-slate-300/60 only-guest">Sign in</button>
        </div>

        <!-- Trust strip -->
        <div class="mt-6 flex items-center gap-3 text-xs text-slate-500 dark:text-slate-400">
          <span class="badge">Generator</span>
          <span class="badge">Article Optimizer</span>
          <span class="badge">Scheduler</span>
          <span class="badge">Analytics</span>
          <span class="badge">Notion/Trello</span>
          <span class="badge">BYOK</span>
        </div>

        <!-- Topic authority: featured internal links -->
        <div class="mt-6 text-[13px] text-slate-500 dark:text-slate-400">
          Learn: 
          <a class="underline hover:opacity-80" href="https://contentrepurpose.pro/blog/paste-once-multi-channel/">Paste once, multi-channel</a> •
          <a class="underline hover:opacity-80" href="https://contentrepurpose.pro/blog/notion-trello-export/">Notion/Trello export</a> •
          <a class="underline hover:opacity-80" href="https://contentrepurpose.pro/blog/content-repurposing-for-seo/">Repurposing for SEO</a> •
          <a class="underline hover:opacity-80" href="https://contentrepurpose.pro/blog/ai-content-repurposing-examples-workflows/">Workflows & examples</a>
        </div>
      </div>

      <!-- Right: visual mocks -->
      <div class="relative">
        <div class="orbit" aria-hidden="true"></div>
        <div class="grid gap-4">
          <div class="mock p-4 card">
            <div class="text-xs text-slate-400">Command</div>
            <pre class="mono text-xs bg-black/85 text-emerald-200 rounded-xl p-4 h-40 overflow-auto" aria-label="CLI Preview">repurpose generate --channels linkedin,x,email,instagram
? outline created
? 3 social variants
? email subject + body ready
? instagram caption + hashtags</pre>
          </div>
          <div class="grid md:grid-cols-2 gap-4">
            <div class="mock p-4 card">
              <div class="text-xs text-slate-400">LinkedIn</div>
              <div class="mt-2 h-24 text-sm text-slate-200/90 leading-relaxed">
                • Hook that earns the scroll<br>
                • 6–10 crisp lines, one CTA<br>
                • On-brand tone & keywords
              </div>
            </div>
            <div class="mock p-4 card">
              <div class="text-xs text-slate-400">X (Twitter)</div>
              <div class="mt-2 h-24 text-sm text-slate-200/90 leading-relaxed">
                Two fast variants<br>
                Always ≤ 280 chars<br>
                Ready to post ✓
              </div>
            </div>
          </div>
          <div class="grid md:grid-cols-2 gap-4">
            <div class="mock p-4 card">
              <div class="text-xs text-slate-400">Email</div>
              <div class="mt-2 h-20 text-sm text-slate-200/90 leading-relaxed">
                Subject & body prepped<br>
                Preview & send from your client
              </div>
            </div>
            <div class="mock p-4 card">
              <div class="text-xs text-slate-400">Instagram</div>
              <div class="mt-2 h-20 text-sm text-slate-200/90 leading-relaxed">
                Caption + 3–5 hashtags<br>
                Short, skimmable, on-brand
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Live activity strip (hero) -->
    <div class="mt-8 md:mt-10">
      <div class="max-w-7xl mx-auto px-4 md:px-5">
        <div class="card p-4 md:p-5">
          <div class="flex items-center justify-between flex-wrap gap-3">
            <div class="flex items-center gap-2">
              <span class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></span>
              <strong class="tracking-tight">Generations today</strong>
              <span class="chip" data-live-count>–</span>
            </div>
            <div class="text-xs text-slate-500">Real results update every 30s</div>
          </div>
          <div class="mt-3 overflow-hidden">
            <div class="flex gap-3 whitespace-nowrap text-[13px] will-change-transform" style="animation: scrollx 28s linear infinite" data-live-feed></div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- (Part 2 starts with the Generator / Demo section) -->
<!-- ===== LIVE DEMO / GENERATOR ===== -->
<section id="demo" class="relative scroll-mt-24">
  <div class="max-w-7xl mx-auto px-4 md:px-5 py-14 md:py-20">
    <div class="flex items-end justify-between gap-4 mb-6">
      <div>
        <h2 class="text-2xl md:text-3xl font-black tracking-tight">Generator</h2>
        <!-- Copy changes by auth state -->
        <p class="mt-1 text-slate-500 dark:text-slate-300 text-sm only-guest">
          No login needed — <span class="font-semibold">5 runs/month</span> on the public pool.
        </p>
        <p class="mt-1 text-slate-500 dark:text-slate-300 text-sm only-authed hidden">
          Signed in — your plan limits apply per day/month by tier.
        </p>
      </div>
      <div class="flex items-center gap-3">
        <a href="#pricing" class="btn">See pricing</a>
        <button class="btn btn-primary js-open-auth only-guest" type="button">Sign in</button>
      </div>
    </div>

    <!-- Promo rail -->
    <div class="card p-4 md:p-5 mb-6">
      <div class="flex flex-wrap items-center justify-between gap-3">
        <div class="flex items-center gap-2 text-sm">
          <span class="badge">LIMITED</span>
          <span>Use <strong class="mono">CONTENTOFF90</strong> for <strong>90% off</strong> the Creator plan.</span>
        </div>
        <div class="flex items-center gap-2">
          <button id="copyPromoBtn2" class="btn" type="button">Copy code</button>
          <a class="btn btn-primary" href="#pricing">Upgrade</a>
        </div>
      </div>
    </div>

    <!-- Presets toolbar (client + Worker-backed) -->
    <div class="card p-4 md:p-5 mb-4">
      <div class="flex flex-wrap items-center gap-3">
        <div class="flex items-center gap-2">
          <label for="presetSelect" class="text-sm text-slate-600 dark:text-slate-300">Presets</label>
          <select id="presetSelect" class="border rounded-lg px-3 py-2 min-w-[220px]">
            <option value="">— Load preset —</option>
          </select>
        </div>
        <button id="presetSave" class="btn" type="button" title="Save current settings as a preset">Save</button>
        <button id="presetDelete" class="btn" type="button" title="Delete selected preset" disabled>Delete</button>
        <span id="presetCapNote" class="text-xs text-slate-500">
          Free: 1 preset • Starter: 10 • Creator/Business: Unlimited
        </span>
      </div>
    </div>

    <!-- Generator Form -->
    <div class="card p-5 md:p-6">
      <form id="demoForm" class="grid gap-6" autocomplete="off">
        <!-- Source selector -->
        <fieldset>
          <legend class="text-sm font-semibold">Source</legend>

          <!-- Batch mode + counter -->
          <div class="mt-2 flex flex-wrap items-center gap-3">
            <div class="flex items-center gap-2">
              <label class="inline-flex items-center gap-2">
                <input type="checkbox" id="batchMode" name="batch_mode">
                <span>Batch mode (each line = one input)</span>
              </label>
              <span class="chip" id="batchCounter">0 lines</span>
            </div>
            <span id="batchCapNote" class="text-xs text-slate-500">
              Max per run — Free: 3 • Starter: 10 • Creator: 30 • Business: 60
            </span>
          </div>

          <div class="mt-3 grid md:grid-cols-3 gap-3">
            <label class="tab flex items-center justify-between">
              <span class="flex items-center gap-2">
                <input type="radio" name="sourceType" value="paragraph" checked>
                Paragraph / Notes
              </span>
              <span class="chip">fastest</span>
            </label>
            <label class="tab flex items-center">
              <input type="radio" name="sourceType" value="blog" class="mr-2">
              Full Blog
            </label>
            <label class="tab flex items-center">
              <input type="radio" name="sourceType" value="url" class="mr-2">
              URL
            </label>
          </div>

          <div class="mt-3">
            <textarea id="sourceText" class="w-full rounded-xl border p-4 min-h-[140px]"
              placeholder="Paste your paragraph, blog, or URL. Tip: enable Batch mode and put each micro-topic on its own line."></textarea>
          </div>
        </fieldset>

        <!-- Optimizer options -->
        <fieldset>
          <legend class="text-sm font-semibold">Article Optimizer (optional)</legend>
          <div class="mt-2 grid sm:grid-cols-2 lg:grid-cols-3 gap-2">
            <label class="flex items-center gap-2"><input type="checkbox" name="opt_humanize" checked> Humanize content</label>
            <label class="flex items-center gap-2"><input type="checkbox" name="opt_lengthen"> Lengthen content</label>
            <label class="flex items-center gap-2"><input type="checkbox" name="opt_faqs"> Add FAQs (+ JSON-LD)</label>
            <label class="flex items-center gap-2"><input type="checkbox" name="opt_headings" checked> Auto-headings (H2/H3)</label>
            <label class="flex items-center gap-2"><input type="checkbox" name="opt_svg"> Add platform-fit SVG image ideas</label>
            <label class="flex items-center gap-2"><input type="checkbox" name="opt_seo"> Check SEO basics (title/meta/alt-text)</label>
          </div>
          <div class="mt-2 flex items-center flex-wrap gap-2 text-[12px] text-slate-500">
            <span class="chip">Starter: up to 10/day</span>
            <span class="chip">Creator: up to 40/day</span>
            <span class="chip">Business: up to 80/day</span>
            <span id="optCapNote" class="text-[12px] text-slate-500">Signed-in Free: 1/day</span>
          </div>
        </fieldset>

        <!-- Channels -->
        <fieldset>
          <legend class="text-sm font-semibold">Channels to generate</legend>
          <div class="mt-2 grid sm:grid-cols-2 lg:grid-cols-4 gap-2">
            <label class="flex items-center gap-2"><input type="checkbox" name="ch_linkedin" checked> LinkedIn</label>
            <label class="flex items-center gap-2"><input type="checkbox" name="ch_x" checked> X (Twitter)</label>
            <label class="flex items-center gap-2"><input type="checkbox" name="ch_email" checked> Email</label>
            <label class="flex items-center gap-2"><input type="checkbox" name="ch_instagram"> Instagram</label>
            <label class="flex items-center gap-2"><input type="checkbox" name="ch_reddit" checked> Reddit</label>
            <label class="flex items-center gap-2"><input type="checkbox" name="ch_facebook"> Facebook</label>
            <label class="flex items-center gap-2"><input type="checkbox" name="ch_quora"> Quora</label>
            <label class="flex items-center gap-2"><input type="checkbox" name="ch_tiktok"> TikTok</label>
          </div>
        </fieldset>

        <!-- Channel-specific extras -->
        <div class="grid md:grid-cols-2 gap-6">
          <fieldset class="card p-4">
            <legend class="text-sm font-semibold">LinkedIn</legend>
            <label class="flex items-center gap-2 mt-2"><input type="checkbox" name="li_article"> Also generate a LinkedIn Article</label>
            <div class="mt-2 text-xs text-slate-500 plan-creator-plus">
              Pro tip: Creator+ renders the article HTML block for one-click Notion export.
            </div>
          </fieldset>

          <fieldset class="card p-4">
            <legend class="text-sm font-semibold">X (Twitter)</legend>
            <div class="mt-2 flex items-center gap-3">
              <label class="flex items-center gap-2"><input type="checkbox" name="x_sequence" checked> Output as sequence</label>
              <label class="flex items-center gap-2">
                Max posts:
                <select name="x_posts" class="border rounded-lg px-2 py-1">
                  <option>2</option><option selected>4</option><option>6</option>
                </select>
              </label>
            </div>
          </fieldset>

          <fieldset class="card p-4">
            <legend class="text-sm font-semibold">Reddit</legend>
            <label class="flex items-center gap-2 mt-2"><input type="checkbox" name="rdt_communities" checked> Suggest best communities (with rules & flair tips)</label>
            <label class="flex items-center gap-2 mt-2"><input type="checkbox" name="rdt_comments" checked> Include 3 starter comment angles</label>
          </fieldset>

          <fieldset class="card p-4">
            <legend class="text-sm font-semibold">TikTok</legend>
            <label class="flex items-center gap-2 mt-2"><input type="checkbox" name="tt_hooks" checked> Provide 3 hook variants</label>
            <label class="flex items-center gap-2 mt-2"><input type="checkbox" name="tt_onscreen" checked> Include on-screen text plan</label>
          </fieldset>
        </div>

        <!-- Actions -->
        <div class="flex flex-wrap items-center gap-3">
          <button id="generateBtn" type="submit" class="px-4 py-3 rounded-xl font-semibold text-white bg-black hover:opacity-90 only-guest">
            Generate (demo)
          </button>
          <button id="generateBtn_member" type="submit" class="px-4 py-3 rounded-xl font-semibold text-white bg-black hover:opacity-90 only-authed hidden">
            Generate
          </button>
          <button type="button" id="clearBtn" class="px-4 py-3 rounded-xl font-semibold border">Clear</button>

          <!-- Quota copy varies -->
          <div class="text-sm text-slate-500 only-guest">
            You have <span id="demoQuota">—</span> demo runs left this month.
          </div>
          <div class="text-sm text-slate-500 only-authed hidden">
            You have <span id="memberQuota">—</span> runs left today.
          </div>

          <a href="#pricing" class="text-sm underline hover:opacity-80 ml-auto">Need more? See plans</a>
        </div>
      </form>
    </div>

    <!-- OUTPUT -->
    <div id="demoOutput" class="mt-8 grid gap-6" aria-live="polite" aria-busy="false">
      <!-- Channel cards will be injected here -->
    </div>

    <!-- ===== QUICK PUBLISH ===== -->
    <!-- Locked preview for guests (see, but can’t use) -->
    <div class="mt-10 card p-5 only-guest">
      <div class="flex items-center justify-between flex-wrap gap-3">
        <strong class="tracking-tight">Quick publish</strong>
        <div class="text-xs text-slate-500">Unlock with Starter or higher.</div>
      </div>
      <div class="relative mt-4">
        <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-3 opacity-60 pointer-events-none select-none">
          <button class="btn">Post to X</button>
          <button class="btn">Open Reddit submit</button>
          <button class="btn">Copy for LinkedIn & open</button>
          <button class="btn">Send email draft</button>
        </div>
        <div class="absolute inset-0 flex items-center justify-center">
          <a href="#pricing" class="px-3 py-1 rounded-lg bg-black text-white text-sm">Upgrade to unlock</a>
        </div>
      </div>
    </div>

    <!-- Active for authed users (wired later) -->
    <div class="mt-10 card p-5 only-authed hidden">
      <div class="flex items-center justify-between flex-wrap gap-3">
        <strong class="tracking-tight">Quick publish</strong>
        <div class="text-xs text-slate-500">Works with your last generation’s outputs.</div>
      </div>
      <div class="mt-4 grid sm:grid-cols-2 lg:grid-cols-4 gap-3">
        <button id="qp-x" class="btn">Post to X</button>
        <button id="qp-reddit" class="btn">Open Reddit submit</button>
        <button id="qp-linkedin" class="btn">Copy for LinkedIn & open</button>
        <button id="qp-email" class="btn">Send email draft</button>
      </div>

      <!-- Creator+ integrations -->
      <div class="mt-4 grid sm:grid-cols-2 gap-3 plan-creator-plus">
        <button id="li-notion" class="btn">Export to Notion</button>
        <button id="li-trello" class="btn">Send to Trello</button>
      </div>
      <div class="mt-2 text-xs text-slate-500 plan-creator-plus">
        Notion/Trello require connecting once from this device. Find them in Settings → Integrations.
      </div>
    </div>
  </div>
</section>
<!-- ===== BEST PICKS (Plan picker) ===== -->
<section id="best-picks" class="relative scroll-mt-24">
  <div class="max-w-7xl mx-auto px-4 md:px-5 py-14 md:py-20">
    <div class="text-center mb-8">
      <h2 class="text-3xl md:text-4xl font-black tracking-tight">Best picks for you</h2>
      <p class="mt-2 text-slate-600 dark:text-slate-300">
        Choose the plan that matches how you publish. See exactly what unlocks and why it matters.
      </p>
    </div>

    <!-- Quick guidance chips -->
    <div class="flex flex-wrap items-center justify-center gap-2 text-xs text-slate-500">
      <span class="chip">Solo creator</span>
      <span class="chip">Newsletter</span>
      <span class="chip">Startup marketer</span>
      <span class="chip">Agency / Team</span>
    </div>

    <!-- Plan cards (direct checkout-ready; uses same data-price IDs as Pricing) -->
    <div class="grid lg:grid-cols-4 gap-6 mt-8">
      <!-- Free -->
      <div class="card p-6 flex flex-col">
        <div class="text-sm px-3 py-1 rounded-full bg-white/70 dark:bg-white/10 border w-fit">Free</div>
        <h3 class="mt-3 text-xl font-bold">Explore & validate</h3>
        <p class="mt-2 text-slate-500 dark:text-slate-300 text-sm">
          Test fit and workflow. Great for dabbling or evaluating.
        </p>
        <ul class="mt-4 text-sm space-y-2">
          <li>• Generator: <strong>5 runs/day (signed-in)</strong></li>
          <li>• Demo (no login): <strong>5 runs/month</strong></li>
          <li>• Optimizer: <strong>1/day</strong> <span class="text-slate-400">(any toggle)</span></li>
          <li>• BYOK: <strong>5/day</strong></li>
          <li>• 1 saved preset</li>
          <li class="opacity-70">• <span class="line-through">Scheduler</span> <span class="chip">Unlock in Starter</span></li>
          <li class="opacity-70">• <span class="line-through">Analytics</span> <span class="chip">Unlock in Starter</span></li>
          <li class="opacity-70">• <span class="line-through">Notion/Trello export</span> <span class="chip">Unlock in Creator</span></li>
        </ul>
        <a href="#demo" class="mt-6 block text-center btn">Start free</a>
        <div class="mt-3 text-[12px] text-slate-500">
          Learn: <a class="underline hover:opacity-80" href="https://contentrepurpose.pro/blog/ai-social-media-post-generator/">AI social post generator</a>
        </div>
      </div>

      <!-- Starter -->
      <div class="card p-6 flex flex-col">
        <div class="text-sm px-3 py-1 rounded-full bg-white/70 dark:bg-white/10 border w-fit">Starter</div>
        <h3 class="mt-3 text-xl font-bold">Consistent posting</h3>
        <p class="mt-2 text-slate-500 dark:text-slate-300 text-sm">
          Ideal if you post several times a week and want a queue.
        </p>
        <ul class="mt-4 text-sm space-y-2">
          <li>• <strong>200</strong> generations/month</li>
          <li>• Batch inputs: <strong>up to 10/run</strong></li>
          <li>• <strong>10</strong> saved presets</li>
          <li>• <strong>Scheduler</strong> (single profile)</li>
          <li>• <strong>Analytics</strong> (basics)</li>
          <li>• Optimizer: <strong>10/day</strong></li>
          <li>• BYOK: <strong>50/month</strong> (+5 daily bonus)</li>
        </ul>
        <button
          data-price="price_1S7y58JYjIKHzKcjzL7cIKiB"
          class="mt-6 w-full btn btn-primary js-checkout subBtn"
          type="button">Get Starter</button>
        <div class="mt-3 text-[12px] text-slate-500">
          Why: <a class="underline hover:opacity-80" href="https://contentrepurpose.pro/blog/paste-once-multi-channel/">Paste once, multi-channel</a>
        </div>
      </div>

      <!-- Creator (featured) -->
      <div class="card p-6 flex flex-col ring-1 ring-black/5 relative">
        <span class="absolute -top-3 left-1/2 -translate-x-1/2 text-xs px-3 py-1 rounded-full bg-grad text-white shadow">Best value</span>
        <h3 class="mt-1 text-xl font-bold">Creator</h3>
        <p class="mt-2 text-slate-500 dark:text-slate-300 text-sm">
          For daily publishing and cross-platform workflows.
        </p>
        <ul class="mt-4 text-sm space-y-2">
          <li>• <strong>500</strong> generations/month</li>
          <li>• Batch inputs: <strong>up to 30/run</strong></li>
          <li>• <strong>Unlimited</strong> presets</li>
          <li>• <strong>Scheduler</strong> (multi-profile)</li>
          <li>• <strong>Analytics Pro</strong> (per-channel)</li>
          <li>• <strong>Notion export</strong> & <strong>Trello boards</strong></li>
          <li>• <strong>Buffer</strong> push for drafts</li>
          <li>• Optimizer: <strong>40/day</strong></li>
          <li>• BYOK: <strong>150/month</strong> (+10 daily)</li>
        </ul>
        <button
          data-price="price_1S7y77JYjIKHzKcjKQYjiqZH"
          class="mt-6 w-full btn btn-primary js-checkout subBtn"
          type="button">Get Creator</button>
        <div class="mt-3 text-[12px] text-slate-500">
          Why: <a class="underline hover:opacity-80" href="https://contentrepurpose.pro/blog/notion-trello-export/">Notion/Trello export</a> •
          <a class="underline hover:opacity-80" href="https://contentrepurpose.pro/blog/ai-content-repurposing-examples-workflows/">Workflows</a>
        </div>
      </div>

      <!-- Business -->
      <div class="card p-6 flex flex-col">
        <div class="text-sm px-3 py-1 rounded-full bg-white/70 dark:bg-white/10 border w-fit">Team</div>
        <h3 class="mt-3 text-xl font-bold">Business</h3>
        <p class="mt-2 text-slate-500 dark:text-slate-300 text-sm">
          For teams, agencies and org-wide calendars.
        </p>
        <ul class="mt-4 text-sm space-y-2">
          <li>• <strong>Unlimited*</strong> generations <span class="text-slate-400">(fair use)</span></li>
          <li>• <strong>3 seats</strong> included</li>
          <li>• White-label export</li>
          <li>• Priority support</li>
          <li>• Team presets & shared calendar</li>
          <li>• Optimizer: <strong>80/day</strong></li>
          <li>• BYOK: <strong>300/month</strong> (+30 daily)</li>
          <li>• Team Analytics (org-wide)</li>
        </ul>
        <button
          data-price="price_1S7y8OJYjIKHzKcjqA9uJdyh"
          class="mt-6 w-full btn js-checkout subBtn"
          type="button">Get Business</button>
        <div class="mt-3 text-[12px] text-slate-500">
          Why: <a class="underline hover:opacity-80" href="https://contentrepurpose.pro/blog/content-repurposing-strategy/">Strategy</a> •
          <a class="underline hover:opacity-80" href="https://contentrepurpose.pro/blog/ai-content-repurposing-benefits-risks-roi-2025/">ROI</a>
        </div>
      </div>
    </div>

    <!-- Contextual nudge based on current plan (just reads data-plan for copy) -->
    <div class="mt-8 text-center text-sm text-slate-500">
      <span class="only-guest">Tip: Sign in to see your personalized caps and unlock Scheduler previews.</span>
      <span class="only-authed hidden">You’re on <strong id="bpPlanName">Free</strong>. Upgrade to unlock Scheduler, Analytics, and more.</span>
    </div>
  </div>
</section>

<!-- ===== USE CASES ===== -->
<section id="use-cases" class="relative scroll-mt-24">
  <div class="max-w-7xl mx-auto px-4 md:px-5 py-14 md:py-20">
    <div class="text-center mb-8">
      <h2 class="text-3xl md:text-4xl font-black tracking-tight">Use cases</h2>
      <p class="mt-2 text-slate-600 dark:text-slate-300">
        Proven workflows for creators, marketers, newsletters and teams.
      </p>
    </div>

    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
      <!-- Creators -->
      <article class="card p-5">
        <div class="flex items-center justify-between">
          <h3 class="font-semibold tracking-tight">Creators & solopreneurs</h3>
          <span class="badge">Starter+</span>
        </div>
        <p class="mt-2 text-sm text-slate-500 dark:text-slate-300">
          Turn one idea into a week of LinkedIn, X and Instagram posts. Queue with Scheduler.
        </p>
        <ul class="mt-3 text-sm space-y-1">
          <li>• Hooks, lines & CTAs tuned per platform</li>
          <li>• Batch 10–30 topics at once (plan-based)</li>
          <li>• Quick Publish to speed up posting</li>
        </ul>
        <div class="mt-3 text-xs text-slate-500">
          Learn:
          <a class="underline hover:opacity-80" href="https://contentrepurpose.pro/blog/linkedin-post-templates/">LinkedIn templates</a> •
          <a class="underline hover:opacity-80" href="https://contentrepurpose.pro/blog/repurpose-one-piece-multiple-platforms/">One piece → multiple platforms</a>
        </div>
      </article>

      <!-- Marketers -->
      <article class="card p-5">
        <div class="flex items-center justify-between">
          <h3 class="font-semibold tracking-tight">Startup & brand marketers</h3>
          <span class="badge">Creator+</span>
        </div>
        <p class="mt-2 text-sm text-slate-500 dark:text-slate-300">
          Repurpose blog posts into multi-channel campaigns with Notion/Trello hand-off.
        </p>
        <ul class="mt-3 text-sm space-y-1">
          <li>• Notion pages & Trello cards in one click</li>
          <li>• Per-channel Analytics to see what wins</li>
          <li>• Buffer push for draft scheduling</li>
        </ul>
        <div class="mt-3 text-xs text-slate-500">
          Learn:
          <a class="underline hover:opacity-80" href="https://contentrepurpose.pro/blog/repurpose-blog-post-for-social-media/">Repurpose blog → social</a> •
          <a class="underline hover:opacity-80" href="https://contentrepurpose.pro/blog/ai-content-repurposing/">AI content repurposing</a>
        </div>
      </article>

      <!-- Newsletters -->
      <article class="card p-5">
        <div class="flex items-center justify-between">
          <h3 class="font-semibold tracking-tight">Newsletters & media</h3>
          <span class="badge">Creator+</span>
        </div>
        <p class="mt-2 text-sm text-slate-500 dark:text-slate-300">
          Summarize long issues, generate email subjects, and spin out platform-ready snippets.
        </p>
        <ul class="mt-3 text-sm space-y-1">
          <li>• Email subject + body drafts</li>
          <li>• Instagram captions + hashtags</li>
          <li>• Reddit variants with community suggestions</li>
        </ul>
        <div class="mt-3 text-xs text-slate-500">
          Learn:
          <a class="underline hover:opacity-80" href="https://contentrepurpose.pro/blog/content-repurposing-101/">Content repurposing 101</a> •
          <a class="underline hover:opacity-80" href="https://contentrepurpose.pro/blog/ai-vs-manual-content-repurposing/">AI vs manual</a>
        </div>
      </article>

      <!-- Agencies / Teams -->
      <article class="card p-5">
        <div class="flex items-center justify-between">
          <h3 class="font-semibold tracking-tight">Agencies & teams</h3>
          <span class="badge">Business</span>
        </div>
        <p class="mt-2 text-sm text-slate-500 dark:text-slate-300">
          Shared calendar, team presets and org-level analytics with fair-use generations.
        </p>
        <ul class="mt-3 text-sm space-y-1">
          <li>• 3 seats included; invite more with seats</li>
          <li>• White-label exports</li>
          <li>• Team Analytics & org-wide caps</li>
        </ul>
        <div class="mt-3 text-xs text-slate-500">
          Learn:
          <a class="underline hover:opacity-80" href="https://contentrepurpose.pro/blog/contentrepurpose-vs-missinglettr/">CR vs Missinglettr</a> •
          <a class="underline hover:opacity-80" href="https://contentrepurpose.pro/blog/best-ai-content-repurposing-tools-2025/">Best tools 2025</a>
        </div>
      </article>

      <!-- SEO / Growth -->
      <article class="card p-5">
        <div class="flex items-center justify-between">
          <h3 class="font-semibold tracking-tight">SEO & growth</h3>
          <span class="badge">All plans</span>
        </div>
        <p class="mt-2 text-sm text-slate-500 dark:text-slate-300">
          Use Optimizer to add FAQs (JSON-LD), fix titles/meta, and keep alt text on point.
        </p>
        <ul class="mt-3 text-sm space-y-1">
          <li>• FAQ schema & heading structure</li>
          <li>• Keyword-aware rewrites</li>
          <li>• SVG ideas for posts</li>
        </ul>
        <div class="mt-3 text-xs text-slate-500">
          Learn:
          <a class="underline hover:opacity-80" href="https://contentrepurpose.pro/blog/content-repurposing-for-seo/">Repurposing for SEO</a> •
          <a class="underline hover:opacity-80" href="https://contentrepurpose.pro/blog/ai-search-ranking-with-repurposed-content/">AI & rankings</a>
        </div>
      </article>

      <!-- Thought leadership -->
      <article class="card p-5">
        <div class="flex items-center justify-between">
          <h3 class="font-semibold tracking-tight">Thought leadership</h3>
          <span class="badge">Starter+</span>
        </div>
        <p class="mt-2 text-sm text-slate-500 dark:text-slate-300">
          Create LinkedIn-first threads, port to email & X, then track performance by channel.
        </p>
        <ul class="mt-3 text-sm space-y-1">
          <li>• LinkedIn + X sequences</li>
          <li>• Email subject lines that pull</li>
          <li>• Per-channel Analytics (Creator+)</li>
        </ul>
        <div class="mt-3 text-xs text-slate-500">
          Learn:
          <a class="underline hover:opacity-80" href="https://contentrepurpose.pro/blog/free-ai-linkedin-post-generator/">Free LinkedIn post generator</a> •
          <a class="underline hover:opacity-80" href="https://contentrepurpose.pro/blog/content-repurposing-ideas/">Repurposing ideas</a>
        </div>
      </article>
    </div>

    <!-- CTA -->
    <div class="text-center mt-10">
      <a href="#pricing" class="btn btn-primary">Compare full pricing</a>
    </div>
  </div>
</section>
<!-- ===== PRICING (enhanced) ===== -->
<section id="pricing" class="relative scroll-mt-24">
  <div class="max-w-7xl mx-auto px-4 md:px-5 py-14 md:py-20">
    <div class="text-center mb-10">
      <h2 class="text-3xl md:text-4xl font-black tracking-tight">Simple, honest pricing</h2>
      <p class="mt-2 text-slate-600 dark:text-slate-300">Start free. Add power when you need it.</p>
    </div>

    <!-- Conversion rail -->
    <div class="card p-4 md:p-5 mb-6 flex flex-wrap items-center justify-between gap-3">
      <div class="flex items-center gap-2 text-sm">
        <span class="badge">LIMITED</span>
        <span>Use <strong class="mono">CONTENTOFF90</strong> for <strong>90% off</strong> your first month of <strong>Creator</strong>.</span>
      </div>
      <div class="flex items-center gap-2">
        <button id="copyPromoBtn_pr" class="btn" type="button">Copy code</button>

        <!-- Guests see demo / sign-in -->
        <a href="#demo" class="btn only-guest">Try Demo</a>
        <button class="btn js-open-auth only-guest" type="button">Sign in</button>

        <!-- Authed users see billing controls -->
        <button id="manageBilling2" class="btn only-authed hidden" type="button">Manage billing</button>
      </div>
    </div>

    <!-- Pricing grid -->
    <div class="grid lg:grid-cols-4 gap-6">
      <!-- FREE -->
      <div class="card p-6 flex flex-col">
        <div class="text-sm px-3 py-1 rounded-full bg-white/70 dark:bg-white/10 border w-fit">Free</div>
        <h3 class="mt-3 text-xl font-bold">Demo + Account</h3>
        <div class="mt-2 text-3xl font-extrabold">$0<span class="text-sm text-slate-500">/forever</span></div>
        <ul class="mt-4 text-sm space-y-2">
          <li>• Demo (no login): <strong>5 runs / month</strong></li>
          <li>• Free account: <strong>5 runs / day</strong></li>
          <li>• Optimizer: <strong>1/day</strong> (any toggle)</li>
          <li>• BYOK: <strong>5/day</strong></li>
          <li>• <strong>1</strong> saved preset</li>
          <li>• Batch inputs: <strong>up to 3/run</strong></li>
          <li>• CSV/Markdown export</li>
          <li class="opacity-70">• <span class="line-through">Scheduler</span> <span class="chip">Unlock in Starter</span></li>
          <li class="opacity-70">• <span class="line-through">Analytics</span> <span class="chip">Unlock in Starter</span></li>
          <li class="opacity-70">• <span class="line-through">Notion/Trello</span> <span class="chip">Unlock in Creator</span></li>
        </ul>
        <a href="#demo" class="mt-6 block text-center btn">Start free</a>
      </div>

      <!-- STARTER -->
      <div class="card p-6 flex flex-col">
        <div class="text-sm px-3 py-1 rounded-full bg-white/70 dark:bg-white/10 border w-fit">Starter</div>
        <h3 class="mt-3 text-xl font-bold">Solo Creator</h3>
        <div class="mt-2 text-3xl font-extrabold">$9<span class="text-sm text-slate-500">/mo</span></div>
        <ul class="mt-4 text-sm space-y-2">
          <li>• <strong>200 generations / month</strong></li>
          <li>• Batch inputs: <strong>up to 10/run</strong></li>
          <li>• <strong>10</strong> saved presets</li>
          <li>• <strong>Scheduler</strong> (queue & calendar)</li>
          <li>• <strong>Analytics</strong> (basics)</li>
          <li>• Optimizer: <strong>10/day</strong></li>
          <li>• BYOK: <strong>50 / month</strong> (+5 daily headroom)</li>
        </ul>
        <button
          data-price="price_1S7y58JYjIKHzKcjzL7cIKiB"
          class="mt-6 w-full btn btn-primary js-checkout subBtn"
          type="button">Get Starter</button>
      </div>

      <!-- CREATOR (featured) -->
      <div class="card p-6 flex flex-col ring-1 ring-black/5 relative">
        <span class="absolute -top-3 left-1/2 -translate-x-1/2 text-xs px-3 py-1 rounded-full bg-grad text-white shadow">Best value</span>
        <h3 class="mt-1 text-xl font-bold">Creator</h3>
        <div class="mt-2 text-3xl font-extrabold">$19<span class="text-sm text-slate-500">/mo</span></div>
        <ul class="mt-4 text-sm space-y-2">
          <li>• <strong>500 generations / month</strong></li>
          <li>• Batch inputs: <strong>up to 30/run</strong></li>
          <li>• <strong>Unlimited</strong> presets</li>
          <li>• <strong>Scheduler</strong> (multi-profile)</li>
          <li>• <strong>Analytics Pro</strong> (per-channel)</li>
          <li>• <strong>Notion export</strong> & <strong>Trello boards</strong></li>
          <li>• <strong>Buffer</strong> push for drafts</li>
          <li>• Optimizer: <strong>40/day</strong></li>
          <li>• BYOK: <strong>150 / month</strong> (+10 daily)</li>
        </ul>
        <button
          data-price="price_1S7y77JYjIKHzKcjKQYjiqZH"
          class="mt-6 w-full btn btn-primary js-checkout subBtn"
          type="button">Get Creator</button>
      </div>

      <!-- BUSINESS -->
      <div class="card p-6 flex flex-col">
        <div class="text-sm px-3 py-1 rounded-full bg-white/70 dark:bg-white/10 border w-fit">Team</div>
        <h3 class="mt-3 text-xl font-bold">Business</h3>
        <div class="mt-2 text-3xl font-extrabold">$49<span class="text-sm text-slate-500">/mo</span></div>
        <ul class="mt-4 text-sm space-y-2">
          <li>• <strong>Unlimited</strong> (fair use)</li>
          <li>• <strong>3 seats</strong> included</li>
          <li>• White-label export</li>
          <li>• Priority support</li>
          <li>• Team presets & shared calendar</li>
          <li>• Optimizer: <strong>80/day</strong></li>
          <li>• BYOK: <strong>300 / month</strong> (+30 daily)</li>
          <li>• <strong>Team Analytics</strong> (org-wide)</li>
        </ul>
        <button
          data-price="price_1S7y8OJYjIKHzKcjqA9uJdyh"
          class="mt-6 w-full btn js-checkout subBtn"
          type="button">Get Business</button>
      </div>
    </div>

    <!-- Why upgrade (tight, benefit-first) -->
    <div class="grid md:grid-cols-3 gap-6 mt-10">
      <div class="stat">
        <div class="k">Faster queues</div>
        <p class="text-sm text-slate-500 dark:text-slate-400">Paid lanes hit priority models with fewer rate limits.</p>
      </div>
      <div class="stat">
        <div class="k">Scheduler</div>
        <p class="text-sm text-slate-500 dark:text-slate-400">Queue multi-channel posts and see your week at a glance.</p>
      </div>
      <div class="stat">
        <div class="k">Integrations</div>
        <p class="text-sm text-slate-500 dark:text-slate-400">Push to Notion, Trello, and Buffer in one click.</p>
      </div>
    </div>

    <!-- ===== FAQ ===== -->
    <div id="faq" class="mt-14">
      <h3 class="text-2xl md:text-3xl font-black tracking-tight">Frequently asked questions</h3>
      <div class="mt-6 grid md:grid-cols-2 gap-4">
        <details class="card p-4">
          <summary class="font-semibold cursor-pointer">What counts as a “generation”?</summary>
          <p class="mt-2 text-sm text-slate-500 dark:text-slate-300">
            Any click on <em>Generate</em> that returns content (demo or signed-in). In Batch mode, each line counts as one.
          </p>
        </details>

        <details class="card p-4">
          <summary class="font-semibold cursor-pointer">Is the Article Optimizer included?</summary>
          <p class="mt-2 text-sm text-slate-500 dark:text-slate-300">
            Yes across plans. Daily caps by tier. Free (signed-in) gets one verified run/day. Learn more about
            <a class="underline hover:opacity-80" href="https://contentrepurpose.pro/blog/content-repurposing-for-seo/">SEO repurposing</a>.
          </p>
        </details>

        <details class="card p-4">
          <summary class="font-semibold cursor-pointer">What is BYOK?</summary>
          <p class="mt-2 text-sm text-slate-500 dark:text-slate-300">
            “Bring Your Own Key.” Use your own model API key for extra capacity. Keys aren’t stored in plaintext. See our
            <a class="underline hover:opacity-80" href="https://contentrepurpose.pro/blog/ai-content-repurposing/">guide</a>.
          </p>
        </details>

        <details class="card p-4">
          <summary class="font-semibold cursor-pointer">Can I cancel anytime?</summary>
          <p class="mt-2 text-sm text-slate-500 dark:text-slate-300">
            Absolutely. Manage billing from your dashboard; your plan remains active until the end of the cycle.
          </p>
        </details>

        <details class="card p-4">
          <summary class="font-semibold cursor-pointer">Do you support teams?</summary>
          <p class="mt-2 text-sm text-slate-500 dark:text-slate-300">
            Yes — the Business plan includes 3 seats, shared calendar, org analytics, and white-label exports.
          </p>
        </details>

        <details class="card p-4">
          <summary class="font-semibold cursor-pointer">Which platforms can you export to?</summary>
          <p class="mt-2 text-sm text-slate-500 dark:text-slate-300">
            Notion and Trello on Creator+, plus Buffer queueing for LinkedIn, X, Facebook, and Instagram. See
            <a class="underline hover:opacity-80" href="https://contentrepurpose.pro/blog/notion-trello-export/">Notion/Trello export</a>.
          </p>
        </details>

        <details class="card p-4">
          <summary class="font-semibold cursor-pointer">Do you have templates?</summary>
          <p class="mt-2 text-sm text-slate-500 dark:text-slate-300">
            Yes — grab our popular <a class="underline hover:opacity-80" href="https://contentrepurpose.pro/blog/linkedin-post-templates/">LinkedIn post templates</a>.
          </p>
        </details>
      </div>
    </div>
  </div>

  <!-- Updated FAQ JSON-LD -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"FAQPage",
    "mainEntity":[
      {"@type":"Question","name":"What counts as a “generation”?","acceptedAnswer":{"@type":"Answer","text":"Any click on Generate that returns content (demo or signed-in). In Batch mode, each line counts as one."}},
      {"@type":"Question","name":"Is the Article Optimizer included?","acceptedAnswer":{"@type":"Answer","text":"Yes across plans. Daily caps by tier. Free (signed-in) gets one verified run/day."}},
      {"@type":"Question","name":"What is BYOK?","acceptedAnswer":{"@type":"Answer","text":"Bring Your Own Key — use your own model API key for extra capacity. Keys aren’t stored in plaintext."}},
      {"@type":"Question","name":"Can I cancel anytime?","acceptedAnswer":{"@type":"Answer","text":"Yes. Manage billing from your dashboard; your plan remains active until the end of the cycle."}},
      {"@type":"Question","name":"Do you support teams?","acceptedAnswer":{"@type":"Answer","text":"Yes — the Business plan includes 3 seats, shared calendar, org analytics, and white-label exports."}},
      {"@type":"Question","name":"Which platforms can you export to?","acceptedAnswer":{"@type":"Answer","text":"Notion and Trello on Creator+, plus Buffer queueing for LinkedIn, X, Facebook, and Instagram."}},
      {"@type":"Question","name":"Do you have templates?","acceptedAnswer":{"@type":"Answer","text":"Yes — see our LinkedIn post templates."}}
    ]
  }
  </script>
</section>

<!-- ===== FOOTER (with internal links for topical authority) ===== -->
<footer class="mt-20 border-top border-white/30">
  <div class="max-w-7xl mx-auto px-4 md:px-5 py-10 text-sm grid md:grid-cols-4 gap-8">
    <div>
      <div class="opacity-80">© <span id="year">2025</span> ContentRepurpose.pro</div>
      <p class="mt-2 opacity-70">Paste once → publish everywhere. Repurpose content with AI.</p>
    </div>

    <div>
      <div class="font-semibold mb-2">Product</div>
      <ul class="space-y-2 opacity-80">
        <li><a href="#demo" class="hover:opacity-100">Live Demo</a></li>
        <li><a href="#best-picks" class="hover:opacity-100">Best Picks</a></li>
        <li><a href="#use-cases" class="hover:opacity-100">Use Cases</a></li>
        <li><a href="#pricing" class="hover:opacity-100">Pricing</a></li>
        <li class="only-authed hidden"><button id="manageBilling" class="px-0 py-0 underline">Manage billing</button></li>
      </ul>
    </div>

    <div>
      <div class="font-semibold mb-2">Learn</div>
      <ul class="space-y-2 opacity-80">
        <li><a href="https://contentrepurpose.pro/blog/linkedin-post-templates/" class="hover:opacity-100">LinkedIn post templates</a></li>
        <li><a href="https://contentrepurpose.pro/blog/ai-social-media-post-generator/" class="hover:opacity-100">AI social post generator</a></li>
        <li><a href="https://contentrepurpose.pro/blog/repurpose-blog-post-for-social-media/" class="hover:opacity-100">Repurpose blog → social</a></li>
        <li><a href="https://contentrepurpose.pro/blog/paste-once-multi-channel/" class="hover:opacity-100">Paste once, multi-channel</a></li>
        <li><a href="https://contentrepurpose.pro/blog/notion-trello-export/" class="hover:opacity-100">Notion & Trello export</a></li>
      </ul>
    </div>

    <div>
      <div class="font-semibold mb-2">Deep dives</div>
      <ul class="space-y-2 opacity-80">
        <li><a href="https://contentrepurpose.pro/blog/content-repurposing-for-seo/" class="hover:opacity-100">Repurposing for SEO</a></li>
        <li><a href="https://contentrepurpose.pro/blog/ai-content-repurposing/" class="hover:opacity-100">AI content repurposing</a></li>
        <li><a href="https://contentrepurpose.pro/blog/best-ai-content-repurposing-tools-2025/" class="hover:opacity-100">Best tools 2025</a></li>
        <li><a href="https://contentrepurpose.pro/blog/ai-vs-manual-content-repurposing/" class="hover:opacity-100">AI vs manual</a></li>
        <li><a href="http://contentrepurpose.pro/blog/free-ai-linkedin-post-generator/" class="hover:opacity-100">Free LinkedIn generator</a></li>
      </ul>
    </div>
  </div>

  <div class="max-w-7xl mx-auto px-4 md:px-5 pb-8 text-sm flex flex-wrap items-center justify-between gap-3 opacity-80">
    <nav class="flex items-center gap-4">
      <a href="#pricing" class="hover:opacity-100">Pricing</a>
      <a href="/blog" class="hover:opacity-100">Blog</a>
      <a href="mailto:hello@contentrepurpose.pro" class="hover:opacity-100">Contact</a>
    </nav>
    <div>Made for creators, marketers & teams.</div>
  </div>
</footer>
<!-- ===== PART 5 PATCH: Plan previews, Batch caps, Optimizer caps, Presets, Scheduler polish ===== -->
<script type="module">
/* ---------- PLAN CAPS (client hints; backend remains source of truth) ---------- */
const PLAN_RANK = { free:0, starter:1, creator:2, business:3 };
const PLAN_CAPS = {
  dailyGenerations: { free:5, starter:30, creator:60, business:300 },
  optimizerPerDay:  { free:1, starter:10, creator:40, business:80 },
  presetsMax:       { free:1, starter:10, creator:Infinity, business:Infinity },
  batchPerRun:      { free:3, starter:10, creator:30, business:60 }
};

/* ---------- LIGHT “LOCKED PREVIEW” STYLES (adds an overlay; non-destructive) ---------- */
const styleTagId = "__crp_preview_lock_css__";
if (!document.getElementById(styleTagId)) {
  const st = document.createElement("style");
  st.id = styleTagId;
  st.textContent = `
    .is-locked { position: relative; }
    .is-locked::after{
      content:"Upgrade to use"; position:absolute; inset:0;
      display:flex; align-items:center; justify-content:center;
      background:linear-gradient(180deg, rgba(14,16,22,.70), rgba(14,16,22,.75));
      border-radius:inherit; color:#e9eef6; font-weight:600; letter-spacing:.2px;
    }
    .is-locked [data-lockable], .is-locked input, .is-locked select, .is-locked textarea, .is-locked button { pointer-events:none !important; }
    .chip.lock { border-color: rgba(255,255,255,.35); }
  `;
  document.head.appendChild(st);
}

/* ---------- HELPERS ---------- */
const getPlan = ()=> (window.CURRENT_PLAN || "free");
const planRankOf = p => PLAN_RANK[p] ?? 0;
const todayKey = () => new Date().toISOString().slice(0,10);
const userKey  = () => (window.USER_ID || "anon");
const lsGet = (k, d)=> { try{ const v=localStorage.getItem(k); return v? JSON.parse(v):d; }catch{ return d; } };
const lsSet = (k, v)=> { try{ localStorage.setItem(k, JSON.stringify(v)); }catch{} };
const toast  = (msg)=> { try{ document.getElementById("toastMsg").textContent=msg; const t=document.getElementById("toast"); t.classList.remove("hidden"); setTimeout(()=>t.classList.add("hidden"), 1800);}catch{ alert(msg);} };

/* ---------- SHOW “PLAN-GATED” SECTIONS AS PREVIEWS WHEN BELOW TIER ---------- */
function applyLockedPreviews() {
  const plan = getPlan();
  const rank = planRankOf(plan);

  // Starter+ sections: show locked to Free
  document.querySelectorAll(".plan-starter-plus").forEach(el=>{
    if (rank >= PLAN_RANK.starter) {
      el.classList.remove("is-locked","hidden");
    } else {
      el.classList.remove("hidden");
      el.classList.add("is-locked");
    }
  });
  // Creator+ sections
  document.querySelectorAll(".plan-creator-plus").forEach(el=>{
    if (rank >= PLAN_RANK.creator) {
      el.classList.remove("is-locked","hidden");
    } else {
      el.classList.remove("hidden");
      el.classList.add("is-locked");
    }
  });
  // Business-only
  document.querySelectorAll(".plan-business-only").forEach(el=>{
    if (rank >= PLAN_RANK.business) {
      el.classList.remove("is-locked","hidden");
    } else {
      el.classList.remove("hidden");
      el.classList.add("is-locked");
    }
  });

  // Best-picks inline copy
  const bpPlan = document.getElementById("bpPlanName");
  if (bpPlan) bpPlan.textContent = plan.charAt(0).toUpperCase()+plan.slice(1);
}

/* Hook into your existing paint after status load */
const __orig_applyPlanGates = (typeof applyPlanGates==="function" ? applyPlanGates : null);
window.applyPlanGates = function patchedApplyPlanGates(plan){
  // Keep original hide/show logic (for authed-only bits)
  if (__orig_applyPlanGates) try { __orig_applyPlanGates(plan); } catch {}
  // Then convert hidden gates to visible previews w/ locks
  applyLockedPreviews();
};

/* Also reflect plan name in header “Plan: X” badges consistently */
const __orig_paintPlanBadges = (typeof paintPlanBadges==="function" ? paintPlanBadges : null);
window.paintPlanBadges = function patchedPaintPlanBadges(plan){
  if (__orig_paintPlanBadges) try { __orig_paintPlanBadges(plan); } catch {}
  const pretty = plan.charAt(0).toUpperCase()+plan.slice(1);
  const ids = ["planbadge","planbadge_m","heroPlanName","bpPlanName"];
  ids.forEach(id => { const el=document.getElementById(id); if (el) el.textContent = pretty; });
};

/* ---------- BATCH MODE: live line counter + per-plan caps ---------- */
(function wireBatchCounter(){
  const src = document.getElementById("sourceText");
  if (!src) return;
  // Create a tiny chip after textarea if missing
  let chip = document.getElementById("batchCounter");
  if (!chip) {
    chip = document.createElement("div");
    chip.id = "batchCounter";
    chip.className = "mt-1 text-[12px] text-slate-500";
    src.insertAdjacentElement("afterend", chip);
  }
  const render = ()=>{
    const lines = (src.value||"").split(/\r?\n/).filter(l=>l.trim().length>0);
    const plan = getPlan();
    const cap  = PLAN_CAPS.batchPerRun[plan] ?? 3;
    chip.innerHTML = `Batch lines: <strong>${lines.length}</strong> / ${cap}`;
    if (lines.length > cap) chip.innerHTML += ` <span class="text-red-500">— over your ${plan} cap</span>`;
  };
  src.addEventListener("input", render);
  render();

  // Enforce on submit (without touching your generation logic)
  const form = document.getElementById("demoForm");
  if (!form) return;
  form.addEventListener("submit", (e)=>{
    try{
      const val = (src.value||"").trim();
      const lines = val.split(/\r?\n/).filter(l=>l.trim().length>0);
      const plan = getPlan();
      const cap  = PLAN_CAPS.batchPerRun[plan] ?? 3;
      if (lines.length > cap){
        e.preventDefault();
        toast(`Batch limit is ${cap} lines on ${plan}. Trim your input or upgrade.`);
      }
    }catch{}
  }, true);
})();

/* ---------- OPTIMIZER CAP ENFORCEMENT (client hint; daily counter in localStorage) ---------- */
const OPT_KEY = (d= todayKey(), u = userKey()) => `crp:opt_count:${d}:${u}`;
function countOptimizerToggles(form){
  const names = ["opt_humanize","opt_lengthen","opt_faqs","opt_headings","opt_svg","opt_seo"];
  return names.reduce((n, id)=> n + (form.elements[id]?.checked ? 1 : 0), 0) > 0 ? 1 : 0;
}
function optimizerRemaining(plan){
  const cap = PLAN_CAPS.optimizerPerDay[plan] ?? 1;
  const used = Number(lsGet(OPT_KEY(), 0)) || 0;
  return Math.max(0, cap - used);
}
function bumpOptimizerIfNeeded(form, success){
  if (!success) return;
  if (countOptimizerToggles(form) > 0){
    const used = Number(lsGet(OPT_KEY(), 0)) || 0;
    lsSet(OPT_KEY(), used+1);
  }
}
/* UI warning near Optimizer section */
(function wireOptimizerHint(){
  const form = document.getElementById("demoForm");
  if (!form) return;
  const fs = Array.from(form.querySelectorAll("fieldset")).find(f=> /Article Optimizer/i.test(f.textContent||""));
  if (!fs) return;
  let note = fs.querySelector("[data-opt-note]");
  if (!note){
    note = document.createElement("div");
    note.setAttribute("data-opt-note","1");
    note.className = "mt-2 text-[12px] text-slate-500";
    fs.appendChild(note);
  }
  const paint = ()=>{
    const plan = getPlan();
    const left = optimizerRemaining(plan);
    note.innerHTML = `Optimizer runs left today: <strong>${left}</strong> on ${plan}.`;
  };
  document.addEventListener("visibilitychange", paint);
  paint();

  // Gate submission if out of local daily budget (backend still authoritative)
  const formEl = document.getElementById("demoForm");
  if (!formEl) return;
  formEl.addEventListener("submit", (e)=>{
    try{
      if (countOptimizerToggles(formEl) > 0){
        const plan = getPlan();
        if (optimizerRemaining(plan) <= 0){
          e.preventDefault();
          toast(`Optimizer daily cap reached on ${plan}. Uncheck Optimizer or upgrade.`);
        }
      }
    }catch{}
  }, true);
})();

/* ---------- PRESETS (save/list/delete) with per-plan limits ---------- */
(function wirePresets(){
  const form = document.getElementById("demoForm");
  if (!form) return;

  // Build toolbar (top-right of Generator card) if missing
  let bar = document.getElementById("presetsBar");
  if (!bar){
    bar = document.createElement("div");
    bar.id = "presetsBar";
    bar.className = "mt-2 flex flex-wrap items-center gap-2 text-sm";
    // find the generator card to inject into (the one that wraps the form)
    const card = form.closest(".card") || document.getElementById("demo");
    (card || form).insertAdjacentElement("beforebegin", bar);
  }
  bar.innerHTML = `
    <div class="flex flex-wrap items-center gap-2">
      <span class="chip">Presets</span>
      <select id="presetSelect" class="border rounded-lg px-2 py-1 min-w-[200px]">
        <option value="">Load a preset…</option>
      </select>
      <button id="presetSave" class="btn" type="button">Save current</button>
      <button id="presetDelete" class="btn" type="button">Delete</button>
      <span id="presetNote" class="text-[12px] text-slate-500"></span>
    </div>
  `;

  const sel  = document.getElementById("presetSelect");
  const save = document.getElementById("presetSave");
  const del  = document.getElementById("presetDelete");
  const note = document.getElementById("presetNote");

  async function listPresets(){
    try{
      const r = await fetch(`${WORKER_BASE}/api/presets/list`, { headers: await getAuthHeaders() });
      const j = await r.json();
      if (!r.ok) throw new Error(j?.error?.message || "List failed");
      sel.innerHTML = `<option value="">Load a preset…</option>`;
      (j.presets||[]).forEach(p=>{
        const o = document.createElement("option");
        o.value = p.id; o.textContent = p.title; o.dataset.json = JSON.stringify(p.data||{});
        sel.appendChild(o);
      });
      // Show cap info
      const plan = getPlan();
      const max = PLAN_CAPS.presetsMax[plan] ?? 1;
      const used = (j.presets||[]).length;
      note.textContent = `Saved: ${used}/${Number.isFinite(max)? max : "∞"} on ${plan}`;
      // Lock save if at cap (unless ∞)
      save.disabled = Number.isFinite(max) && used >= max;
      if (save.disabled) save.title = "Preset limit reached for your plan";
    }catch(e){
      note.textContent = "Presets unavailable.";
    }
  }

  function readFormData(){
    // Keep it simple: toggles, channels, extras, and sourceType
    const g = n => form.elements[n];
    return {
      sourceType: g("sourceType")?.value || "paragraph",
      opt: {
        humanize:  g("opt_humanize")?.checked || false,
        lengthen:  g("opt_lengthen")?.checked || false,
        faqs:      g("opt_faqs")?.checked || false,
        headings:  g("opt_headings")?.checked || false,
        svg:       g("opt_svg")?.checked || false,
        seo:       g("opt_seo")?.checked || false
      },
      ch: {
        linkedin:  g("ch_linkedin")?.checked || false,
        x:         g("ch_x")?.checked || false,
        email:     g("ch_email")?.checked || false,
        instagram: g("ch_instagram")?.checked || false,
        reddit:    g("ch_reddit")?.checked || false,
        facebook:  g("ch_facebook")?.checked || false,
        quora:     g("ch_quora")?.checked || false,
        tiktok:    g("ch_tiktok")?.checked || false
      },
      extras: {
        li_article:      g("li_article")?.checked || false,
        x_sequence:      g("x_sequence")?.checked || false,
        x_posts:         g("x_posts")?.value || "4",
        rdt_communities: g("rdt_communities")?.checked || false,
        rdt_comments:    g("rdt_comments")?.checked || false,
        tt_hooks:        g("tt_hooks")?.checked || false,
        tt_onscreen:     g("tt_onscreen")?.checked || false
      }
    };
  }
  function writeFormData(d){
    const g = n => form.elements[n];
    if (!d) return;
    if (g("sourceType")) g("sourceType").value = d.sourceType || "paragraph";
    // toggles
    Object.entries(d.opt||{}).forEach(([k,v])=>{ if (g("opt_"+k)) g("opt_"+k).checked = !!v; });
    // channels
    Object.entries(d.ch||{}).forEach(([k,v])=>{ if (g("ch_"+k)) g("ch_"+k).checked = !!v; });
    // extras
    Object.entries(d.extras||{}).forEach(([k,v])=>{
      if (k==="x_posts" && g("x_posts")) g("x_posts").value = String(v||"4");
      else if (g(k)) g(k).checked = !!v;
    });
  }

  save.addEventListener("click", async ()=>{
    try{
      const title = prompt("Preset name");
      if (!title) return;
      const data = readFormData();
      const r = await fetch(`${WORKER_BASE}/api/presets/save`,{
        method:"POST",
        headers: await getAuthHeaders(),
        body: JSON.stringify({ title, data })
      });
      const j = await r.json();
      if (!r.ok) throw new Error(j?.error?.message || "Save failed");
      toast("Preset saved ✅");
      listPresets();
    }catch(e){ toast(e.message || "Preset save failed"); }
  });

  del.addEventListener("click", async ()=>{
    const id = sel.value;
    if (!id) { toast("Choose a preset to delete"); return; }
    if (!confirm("Delete this preset?")) return;
    try{
      const r = await fetch(`${WORKER_BASE}/api/presets/delete`,{
        method:"POST",
        headers: await getAuthHeaders(),
        body: JSON.stringify({ id })
      });
      const j = await r.json();
      if (!r.ok) throw new Error(j?.error?.message || "Delete failed");
      toast("Preset deleted");
      listPresets();
    }catch(e){ toast(e.message || "Preset delete failed"); }
  });

  sel.addEventListener("change", ()=>{
    const opt = sel.selectedOptions[0];
    if (!opt || !opt.dataset.json) return;
    try{ writeFormData(JSON.parse(opt.dataset.json)); toast("Preset loaded"); }catch{}
  });

  // Load on boot & on auth change (your Supabase listener will re-run status too)
  listPresets();
})();

/* ---------- SCHEDULER & ANALYTICS POLISH ---------- */
// Show Scheduler card for preview on Free but lock interactions (already handled by .is-locked)
(function polishSchedulerAnalytics(){
  const plan = getPlan();
  const isFree = (plan === "free");
  // If free → ensure sections are visible but locked (handled globally), add small nudge
  const sched = document.querySelector("#pricing")?.previousElementSibling; // not relied on; keep no-op
  const basicAna = document.getElementById("anaBasic");
  const proAna   = document.getElementById("anaPro");
  const teamAna  = document.getElementById("anaTeam");

  if (basicAna && !basicAna.dataset.init) {
    basicAna.dataset.init = "1";
    basicAna.textContent = "Connect accounts to see daily posts & estimated reach.";
  }
  if (proAna && !proAna.dataset.init) {
    proAna.dataset.init = "1";
    proAna.textContent = "Per-channel breakdown unlocks on Creator+.";
  }
  if (teamAna && !teamAna.dataset.init) {
    teamAna.dataset.init = "1";
    teamAna.textContent = "Invite teammates to populate org-wide insights.";
  }
})();

/* ---------- HOOK: increment local Optimizer budget after successful generations ---------- */
(function hookGenerationSuccess(){
  const out = document.getElementById("demoOutput");
  const form = document.getElementById("demoForm");
  if (!out || !form) return;
  // We detect a successful render by a MutationObserver (cards inserted)
  const obs = new MutationObserver((muts)=>{
    const hasCard = muts.some(m=> Array.from(m.addedNodes||[]).some(n=> n.nodeType===1 && n.classList?.contains("card")));
    if (hasCard) bumpOptimizerIfNeeded(form, true);
  });
  obs.observe(out, { childList:true, subtree:false });
})();

/* ---------- RE-RUN PREVIEW LOCKS AFTER STATUS PAINT ---------- */
document.addEventListener("DOMContentLoaded", () => {
  try{ applyLockedPreviews(); }catch{}
});
</script>
<!-- ===== PART 6 A11Y: Skip link (place directly under <body ...>) ===== -->
<a href="#main" class="skip-link">Skip to main content</a>
/* ===== PART 6 A11Y/UX Polishes (append to your <style> block) ===== */
.skip-link{
  position:absolute; left:-999px; top:auto; width:1px; height:1px; overflow:hidden;
}
.skip-link:focus{
  left:1rem; top:1rem; width:auto; height:auto; z-index:9999;
  background:#0a0d18; color:#fff; padding:.6rem .9rem; border-radius:.6rem;
}
/* Stronger visible focus, but subtle */
:focus-visible{ outline: 2px solid var(--brandA); outline-offset: 2px; }

/* Reduced motion: stop marquee/orbit floats for motion-sensitive users */
@media (prefers-reduced-motion: reduce){
  .marquee{ animation: none !important }
  .orbit{ animation: none !important }
  .halo{ animation: none !important }
  html, body{ scroll-behavior: auto }
}

/* Toast is a live region already; ensure readable contrast in light mode */
@media (prefers-color-scheme: light){
  #toast > div{ background:#0a0d18; color:#fff }
}

/* Mobile nav sheet: better backdrop click target */
.nav-sheet{ cursor: pointer }
.nav-panel{ cursor: default }
<!-- ===== PART 6 JS: A11y + Mobile nav + Fallbacks (append inside crp-app-js before </script>) ===== -->
<script type="module">
/* ---------------- Main landmark & skip link target ---------------- */
(function ensureMainLandmark(){
  // Prefer existing hero as main; otherwise first content section
  const mainId = "main";
  if (!document.getElementById(mainId)){
    const target = document.querySelector('#hero') || document.querySelector('section') || document.body;
    target.setAttribute("id", mainId);
    target.setAttribute("role","main");
  }
})();

/* ---------------- External links: noopener + safe target ---------------- */
(function hardenExternalLinks(){
  const origin = location.origin;
  document.querySelectorAll('a[href^="http"]').forEach(a=>{
    if (!a.href.startsWith(origin)){
      a.setAttribute("target","_blank");
      const rel = (a.getAttribute("rel")||"").split(/\s+/);
      if (!rel.includes("noopener")) rel.push("noopener");
      if (!rel.includes("noreferrer")) rel.push("noreferrer");
      a.setAttribute("rel", rel.join(" ").trim());
    }
  });
})();

/* ---------------- Mobile nav: focus trap, aria, escape to close ---------------- */
(function mobileNavFocusTrap(){
  const openBtn  = document.getElementById("navToggle");
  const sheet    = document.getElementById("mobileNav");
  const closeBtn = document.getElementById("navClose");
  if (!openBtn || !sheet || !closeBtn) return;

  const panel    = sheet.querySelector(".nav-panel");
  const focusable = ()=> Array.from(panel.querySelectorAll('a,button,[tabindex]:not([tabindex="-1"])'))
                              .filter(el=> !el.hasAttribute("disabled"));

  function open(){
    document.body.classList.add("nav-open");
    sheet.setAttribute("aria-hidden","false");
    openBtn.setAttribute("aria-expanded","true");
    const f = focusable(); (f[0]||closeBtn).focus();
    // trap
    function onKey(e){
      if (e.key === "Escape"){ e.preventDefault(); close(); }
      if (e.key === "Tab"){
        const list = focusable(); if (!list.length) return;
        const first = list[0], last = list[list.length-1];
        if (e.shiftKey && document.activeElement === first){ e.preventDefault(); last.focus(); }
        else if (!e.shiftKey && document.activeElement === last){ e.preventDefault(); first.focus(); }
      }
    }
    sheet._onKey = onKey; document.addEventListener("keydown", onKey);
  }
  function close(){
    document.body.classList.remove("nav-open");
    sheet.setAttribute("aria-hidden","true");
    openBtn.setAttribute("aria-expanded","false");
    document.removeEventListener("keydown", sheet._onKey || (()=>{}));
    openBtn.focus();
  }

  openBtn.addEventListener("click", (e)=>{ e.preventDefault(); open(); });
  closeBtn.addEventListener("click", (e)=>{ e.preventDefault(); close(); });
  sheet.addEventListener("click", (e)=>{ if (e.target === sheet) close(); });
})();

/* ---------------- Dialog a11y: close on ESC, restore focus ---------------- */
(function dialogA11y(){
  const dialogs = Array.from(document.querySelectorAll("dialog"));
  dialogs.forEach(dlg=>{
    let opener=null;
    dlg.addEventListener("close", ()=>{ try{ opener && opener.focus(); }catch{} });
    dlg.addEventListener("cancel", (e)=>{ e.preventDefault(); dlg.close(); });
    // mark opener on any button that opens it
    document.querySelectorAll(`[aria-controls="${dlg.id}"], button[data-open="${dlg.id}"]`).forEach(btn=>{
      btn.addEventListener("click", ()=> opener = btn);
    });
  });
})();

/* ---------------- Worker resilience: network banner + safe fetch wrapper ---------------- */
(function networkFallback(){
  const id = "__crp_net_banner__";
  if (!document.getElementById(id)){
    const bar = document.createElement("div");
    bar.id = id;
    bar.className = "fixed bottom-0 left-1/2 -translate-x-1/2 z-[9998] hidden";
    bar.innerHTML = `<div class="px-4 py-2 rounded-t-xl bg-black text-white shadow text-sm">
      Having connection trouble. Some features may be limited. Retrying…
    </div>`;
    document.body.appendChild(bar);
  }
  const bar = document.getElementById(id);
  let failCount = 0, hideTimer = null;

  function showBanner(){
    bar.classList.remove("hidden");
    clearTimeout(hideTimer);
    hideTimer = setTimeout(()=> bar.classList.add("hidden"), 5000);
  }

  // Wrap window.fetch used by our app to detect outages (opt-in: only for same-origin Worker)
  const origFetch = window.fetch.bind(window);
  window.fetch = async function(url, opts){
    try{
      const u = typeof url==="string" ? url : (url?.url || "");
      const isWorker = typeof u==="string" && u.startsWith((window.WORKER_BASE||""));
      const res = await origFetch(url, opts);
      if (isWorker && !res.ok) { failCount++; if (failCount>=2) showBanner(); }
      else if (isWorker) { failCount = 0; }
      return res;
    }catch(e){
      failCount++;
      if (failCount>=1) showBanner();
      // fabricate a minimal Response so callers don't explode if they only check !ok
      return new Response(JSON.stringify({ error:{ code:"network_error", message:"Network unavailable"} }), {
        status: 503, headers: { "Content-Type":"application/json" }
      });
    }
  };
})();

/* ---------------- Live ticker: safe paint if Worker unreachable ---------------- */
(function safeLiveTicker(){
  const els = document.querySelectorAll('[data-live-count], #liveCount');
  if (!els.length) return;
  const set = (n)=> els.forEach(el=> el.textContent = String(n));

  // If not painted by Worker after 3s, show "—"
  let painted = false;
  const t = setTimeout(()=>{ if (!painted){ set("—"); } }, 3000);

  // Patch paintLive to set flag
  const oldPaint = (typeof paintLive==="function") ? paintLive : null;
  window.paintLive = async function patched(){
    if (!oldPaint) { set("—"); painted = true; clearTimeout(t); return; }
    try{ await oldPaint(); painted = true; clearTimeout(t); }catch{ set("—"); }
  };
  // run once more after load (in case earlier call failed)
  setTimeout(()=> window.paintLive && window.paintLive(), 4000);
})();

/* ---------------- Smooth-scroll fix for internal anchors ---------------- */
(function anchorSmoothScroll(){
  document.querySelectorAll('a[href^="#"]').forEach(a=>{
    a.addEventListener("click", (e)=>{
      const id = a.getAttribute("href");
      if (!id || id==="#") return;
      const el = document.querySelector(id);
      if (!el) return;
      e.preventDefault();
      try{ el.scrollIntoView({ behavior:"smooth", block:"start" }); }catch{ el.scrollIntoView(); }
      history.replaceState(null,"",id);
    });
  });
})();

/* ---------------- Misc: global error guard → friendly toast ---------------- */
window.addEventListener("unhandledrejection", (e)=>{ try{ e && e.preventDefault(); }catch{} toast("Something went wrong. Please try again."); });
window.addEventListener("error", (e)=>{ if (!String(e?.message||"").includes("ResizeObserver")) toast("Unexpected error — it’s safe to retry."); });

/* ---------------- Bonus: auto-aria-live on toast ---------------- */
(function ensureToastAria(){
  const t = document.getElementById('toast');
  if (t){ t.setAttribute('role','status'); t.setAttribute('aria-live','polite'); }
})();
</script>
<body>
<html>
