<!doctype html>
<html lang="en" class="h-full">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=AW-17511593434"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'AW-17511593434');
  </script>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>ContentRepurpose.pro — AI Content Repurposing Tool & Generator</title>
  <meta name="description" content="Repurpose blogs, emails, and posts into LinkedIn, X, Instagram and more. AI-powered content repurposing tool & generator. Export to Notion & Trello. BYOK supported." />
  <link rel="canonical" href="https://contentrepurpose.pro/">
  <meta name="theme-color" content="#0a0d18">
  <meta name="color-scheme" content="dark light">
  <meta name="robots" content="index,follow,max-video-preview:-1,max-image-preview:large,max-snippet:-1">

  <!-- Open Graph / Twitter -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="ContentRepurpose.pro — AI Content Repurposing Tool">
  <meta property="og:description" content="Turn one idea into posts for LinkedIn, X, Instagram, and Email. Export with one click. BYOK supported.">
  <meta property="og:url" content="https://contentrepurpose.pro/">
  <meta property="og:image" content="/og-cover.png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="ContentRepurpose.pro — AI Content Generator">
  <meta name="twitter:description" content="Repurpose your content into multi-channel drafts. Export to Notion & Trello. BYOK supported.">
  <meta name="twitter:image" content="/og-cover.png">

  <!-- Preconnects for perf -->
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    :root{ --brandA:#7AA2FF; --brandB:#FF2D2D; --ink:#0a0d18; --ink-2:#101425; }
    html,body{font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    .txt-grad{background:linear-gradient(135deg,var(--brandA),var(--brandB));-webkit-background-clip:text;background-clip:text;color:transparent}
    .bg-grad{background:linear-gradient(135deg,var(--brandA),var(--brandB))}
    .card{border-radius:1.25rem;border:1px solid rgba(15,23,42,.10);background:rgba(255,255,255,.80);box-shadow:0 12px 40px rgba(2,6,23,.08)}
    .badge{display:inline-flex;align-items:center;gap:.5rem;padding:.35rem .6rem;border-radius:9999px;border:1px solid rgba(255,255,255,.15);font-size:.75rem;background:rgba(255,255,255,.65)}
    .chip{font-size:.7rem;padding:.2rem .5rem;border-radius:9999px;border:1px solid rgba(148,163,184,.35)}
    .btn{padding:.6rem .9rem;border-radius:.9rem;border:1px solid rgba(148,163,184,.35)}
    .btn-primary{background:black;color:white}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace}
    .touch-target{min-height:44px; min-width:44px}
    #click-guard{position:fixed;inset:0;pointer-events:none}

    /* Glass & dark */
    .glass{backdrop-filter: blur(12px); background:rgba(255,255,255,.62)}
    @media (prefers-color-scheme:dark){
      body{background:var(--ink);color:#e9eef6}
      .card{background:rgba(14,16,22,.6);border-color:rgba(255,255,255,.08);box-shadow:0 24px 96px rgba(122,162,255,.08),0 14px 60px rgba(255,45,45,.06)}
      .badge{background:rgba(255,255,255,.06);border-color:rgba(255,255,255,.12)}
    }

    /* Decorative visuals */
    .halo{
      position:absolute; filter: blur(60px); opacity:.55; pointer-events:none; transform:translateZ(0);
      background:radial-gradient(50% 50% at 50% 50%, rgba(122,162,255,.8), rgba(255,45,45,.65) 60%, transparent 70%);
      width:42rem; height:42rem; border-radius:50%;
      animation: float 16s ease-in-out infinite;
    }
    .halo.h2{ width:34rem; height:34rem; left:auto; right:-12rem; top:-6rem; animation-duration:18s; opacity:.5 }
    .halo.h3{ width:28rem; height:28rem; left:-10rem; top:26rem; animation-duration:22s; opacity:.45 }
    @keyframes float{ 0%,100%{ transform: translate3d(0,0,0) } 50%{ transform: translate3d(0,-20px,0) } }
    .orbit{
      position:absolute; inset:-32px; border-radius:24px; pointer-events:none;
      background: conic-gradient(from 0deg, rgba(122,162,255,.25), rgba(255,45,45,.18), rgba(122,162,255,.25));
      -webkit-mask: radial-gradient(closest-side, transparent 88%, black 89%);
              mask: radial-gradient(closest-side, transparent 88%, black 89%);
      animation: spin 18s linear infinite;
    }
    @keyframes spin{ to{ transform: rotate(360deg) } }

    .mock{border-radius:1rem;border:1px solid rgba(255,255,255,.12); background:linear-gradient(180deg,rgba(255,255,255,.75),rgba(255,255,255,.6));}
    @media (prefers-color-scheme:dark){ .mock{ background:linear-gradient(180deg,rgba(17,20,31,.88),rgba(17,20,31,.72)); } }

    .marquee{ display:grid; grid-auto-flow:column; gap:2rem; align-items:center; animation: scrollx 26s linear infinite }
    .marquee:hover{ animation-play-state: paused }
    @keyframes scrollx{ from{ transform: translateX(0) } to{ transform: translateX(-50%) } }

    /* Mobile helpers */
    .nav-sheet{position:fixed; inset:0 0 auto 0; background:rgba(0,0,0,.6); backdrop-filter:blur(8px); display:none}
    .nav-panel{position:absolute; top:0; right:0; width:82vw; max-width:380px; height:100%; background:rgba(14,16,22,.96); border-left:1px solid rgba(255,255,255,.08); padding:1rem}
    .nav-open .nav-sheet{display:block}
    .touch-target{min-height:44px; min-width:44px}

    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
  </style>

  <!-- JSON-LD: Organization -->
  <script type="application/ld+json">{
    "@context":"https://schema.org",
    "@type":"Organization",
    "name":"ContentRepurpose.pro",
    "url":"https://contentrepurpose.pro/",
    "logo":"https://contentrepurpose.pro/logo.svg",
    "sameAs":[
      "https://x.com/contentflow",
      "https://www.linkedin.com/company/contentflowai"
    ]
  }</script>

  <!-- JSON-LD: WebSite + Sitelinks search -->
  <script type="application/ld+json">{
    "@context":"https://schema.org",
    "@type":"WebSite",
    "url":"https://contentrepurpose.pro/",
    "name":"ContentRepurpose.pro",
    "potentialAction":{
      "@type":"SearchAction",
      "target":"https://contentrepurpose.pro/search?q={q}",
      "query-input":"required name=q"
    }
  }</script>

  <!-- JSON-LD: SoftwareApplication -->
  <script type="application/ld+json">{
    "@context":"https://schema.org",
    "@type":"SoftwareApplication",
    "name":"ContentRepurpose.pro",
    "applicationCategory":"ContentCreationApplication",
    "operatingSystem":"Web",
    "offers":{"@type":"Offer","price":"0","priceCurrency":"USD"}
  }</script>
</head>

<body class="min-h-full" data-auth="guest">
  <div id="click-guard" aria-hidden="true"></div>

  <!-- Top Promo Banner (guest+members; dismiss persists) -->
  <div id="promoBanner" class="sticky top-0 z-50 bg-black text-white">
    <div class="max-w-7xl mx-auto px-4 md:px-5 py-2 flex items-center justify-between gap-3 text-sm">
      <div class="flex items-center gap-2">
        <span class="badge bg-white/10 border-white/20">Deal</span>
        <span>First Users: <strong>90% off Creator</strong> — use code <span class="mono">CONTENTOFF90</span></span>
      </div>
      <div class="flex items-center gap-2">
        <a href="#pricing" class="btn btn-primary touch-target">Get deal</a>
        <button id="promoDismiss" class="btn touch-target" aria-label="Dismiss">✕</button>
      </div>
    </div>
  </div>

  <!-- Decorative halos -->
  <div class="halo" style="left:-14rem; top:-10rem;"></div>
  <div class="halo h2"></div>
  <div class="halo h3"></div>

  <!-- NAV -->
  <header class="sticky top-0 z-40 backdrop-blur bg-white/55 dark:bg-black/20 border-b border-white/30">
    <div class="max-w-7xl mx-auto px-4 md:px-5 py-4 flex items-center justify-between">
      <a href="/" class="flex items-center gap-3" aria-label="ContentRepurpose home">
        <!-- Inline SVG logo -->
        <svg width="36" height="36" viewBox="0 0 48 48" class="rounded-xl" aria-hidden="true">
          <defs><linearGradient id="g" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#7AA2FF"/><stop offset="100%" stop-color="#FF2D2D"/></linearGradient></defs>
        <rect x="0" y="0" width="48" height="48" rx="12" fill="url(#g)"/>
        <path d="M14 16h10a6 6 0 0 1 0 12H20v4h-6V16zm6 6v4h4a2 2 0 1 0 0-4h-4z" fill="white"/>
        <path d="M28 16h6v16h-6z" fill="white" opacity=".9"/>
        </svg>
        <span class="font-semibold tracking-tight">Content<span class="txt-grad">Repurpose</span></span>
      </a>

      <!-- Desktop nav -->
      <nav class="hidden md:flex items-center gap-6 text-sm">
        <a href="#demo" class="hover:opacity-80">Live Demo</a>
        <a href="#templates" class="hover:opacity-80">Templates</a>
        <a href="#use-cases" class="hover:opacity-80">Use cases</a>
        <a href="#best-picks" class="hover:opacity-80">Best picks</a>
        <a href="#pricing" class="hover:opacity-80">Pricing</a>
        <a href="/blog" class="hover:opacity-80">Blog</a>
        <span id="planbadge" class="px-3 py-1 rounded-full text-xs bg-white/70 dark:bg:white/10 border border-white/50">Plan: Free</span>
        <button id="manageBilling" class="px-3 py-1 rounded-lg border hidden touch-target">Manage billing</button>
        <div class="flex items-center gap-2">
          <button id="loginBtn" class="px-3 py-1 rounded-lg border touch-target">Sign in</button>
          <button id="logoutBtn" class="px-3 py-1 rounded-lg border hidden touch-target">Sign out</button>
        </div>
      </nav>

      <!-- Mobile burger -->
      <button id="navToggle" class="md:hidden touch-target px-3 py-2 rounded-lg border" aria-expanded="false" aria-controls="mobileNav" aria-label="Open menu">
        ☰
      </button>
    </div>

    <!-- Mobile sheet -->
    <div id="mobileNav" class="nav-sheet" aria-hidden="true">
      <div class="nav-panel text-sm text-white">
        <div class="flex items-center justify-between">
          <span class="font-semibold">Menu</span>
          <button id="navClose" class="touch-target px-3 py-2 rounded-lg border border-white/20" aria-label="Close menu">✕</button>
        </div>
        <nav class="mt-4 grid gap-2">
          <a href="#demo" class="px-3 py-2 rounded-lg hover:bg-white/10">Live Demo</a>
          <a href="#templates" class="px-3 py-2 rounded-lg hover:bg:white/10">Templates</a>
          <a href="#use-cases" class="px-3 py-2 rounded-lg hover:bg:white/10">Use cases</a>
          <a href="#best-picks" class="px-3 py-2 rounded-lg hover:bg:white/10">Best picks</a>
          <a href="#pricing" class="px-3 py-2 rounded-lg hover:bg:white/10">Pricing</a>
          <a href="/blog" class="px-3 py-2 rounded-lg hover:bg:white/10">Blog</a>
        </nav>
        <div class="mt-6 grid gap-2">
          <span id="planbadge_m" class="px-3 py-1 rounded-full text-xs bg-white/10 border border-white/20 w-fit">Plan: Free</span>
          <button id="manageBilling_m" class="px-3 py-2 rounded-lg border border-white/20 hidden touch-target">Manage billing</button>
          <button id="loginBtn_m" class="px-3 py-2 rounded-lg border border-white/20 touch-target">Sign in</button>
          <button id="logoutBtn_m" class="px-3 py-2 rounded-lg border border-white/20 hidden touch-target">Sign out</button>
        </div>
      </div>
    </div>
  </header>

  <!-- ====== MARKETING (Guest-only when signed out) ====== -->
  <!-- HERO block wrapped for clean hide on member login -->
  <section id="heroBlock" class="relative">
    <div class="max-w-7xl mx-auto px-4 md:px-5 pt-10 md:pt-16 grid lg:grid-cols-2 gap-8 md:gap-10 items-center">
      <div>
        <div id="heroBadgeWrap" class="inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs bg-white/70 dark:bg-white/10 border border-white/40">
          <span class="w-2 h-2 rounded-full bg-emerald-500"></span>
          <span id="heroBadge">Demo — <strong class="mx-1">5 runs / month</strong> (no login)</span>
        </div>
        <h1 class="mt-4 text-3xl md:text-5xl font-black leading-tight tracking-tight">
          AI <span class="txt-grad">Content Repurposing Tool</span> — turn one idea into everywhere content.
        </h1>
        <p class="mt-4 text-slate-600 dark:text-slate-300 max-w-xl">
          Paste content → get <strong>LinkedIn</strong>, <strong>X</strong>, <strong>Email</strong> &amp; <strong>Instagram</strong> drafts.
          Export to <strong>Notion</strong> or <strong>Trello</strong> with one click. BYOK supported.
        </p>
        <div class="mt-6 flex flex-wrap gap-3">
          <a href="#demo" class="px-4 py-3 rounded-xl font-semibold text-white bg-black hover:opacity-90 touch-target">Try the Live Demo</a>
          <a href="#pricing" class="px-4 py-3 rounded-xl font-semibold border border-slate-300/60 hover:bg-white/50 touch-target">See pricing</a>
          <button id="heroSignIn" class="px-4 py-3 rounded-xl font-semibold border border-slate-300/60 touch-target">Sign in</button>
        </div>
        <div class="mt-6 flex items-center gap-3 text-xs text-slate-500 dark:text-slate-400">
          <span class="badge">AI Content Generator</span>
          <span class="badge">Repurposing Tool</span>
          <span class="badge">SEO-ready</span>
          <span class="badge">BYOK</span>
        </div>

        <!-- Trust strip -->
        <div class="mt-8 overflow-hidden">
          <div class="flex items-center gap-4 text-[11px] uppercase tracking-widest text-slate-500">
            <span class="chip">Creators</span>
            <span class="chip">Marketers</span>
            <span class="chip">Newsletters</span>
            <span class="chip">Teams</span>
          </div>
          <div class="relative mt-4">
            <div class="marquee opacity-70">
              <div class="chip">LinkedIn-first</div>
              <div class="chip">Editorial-friendly</div>
              <div class="chip">Email copy</div>
              <div class="chip">Instagram captions</div>
              <div class="chip">Notion export</div>
              <div class="chip">Trello sync</div>
              <div class="chip">Keyword-aware</div>
              <div class="chip">Tone controls</div>
              <!-- duplicate for seamless scroll -->
              <div class="chip">LinkedIn-first</div>
              <div class="chip">Editorial-friendly</div>
              <div class="chip">Email copy</div>
              <div class="chip">Instagram captions</div>
              <div class="chip">Notion export</div>
              <div class="chip">Trello sync</div>
              <div class="chip">Keyword-aware</div>
              <div class="chip">Tone controls</div>
            </div>
          </div>
        </div>

        <!-- Keyword chips (SEO; guest-only content, still visible to users) -->
        <div id="keywordChips" class="mt-6 flex flex-wrap gap-2 text-xs text-slate-600 dark:text-slate-300">
          <span class="chip">AI content repurposing</span>
          <span class="chip">Content repurpose</span>
          <span class="chip">Repurpose blog to LinkedIn</span>
          <span class="chip">Repurpose blog to X</span>
          <span class="chip">Repurpose email to social</span>
          <span class="chip">Notion export</span>
          <span class="chip">Trello export</span>
          <span class="chip">Content repurposing tool</span>
          <span class="chip">Content repurposing ideas</span>
          <span class="chip">Repurpose project</span>
          <span class="chip">Repurpose content AI</span>
          <span class="chip">SEO repurposing</span>
        </div>
      </div>

      <!-- Visual mockups -->
      <div class="relative">
        <div class="orbit" aria-hidden="true"></div>
        <div class="grid gap-4">
          <div class="mock p-4 card">
            <div class="text-xs text-slate-400">Command</div>
            <pre class="mono text-xs bg-black/85 text-emerald-200 rounded-xl p-4 h-40 overflow-auto" aria-label="CLI Preview">repurpose generate --channels linkedin,x,email,instagram
✓ outline created
✓ 3 social variants
✓ email subject + body ready
✓ instagram caption + hashtags</pre>
          </div>
          <div class="grid md:grid-cols-2 gap-4">
            <div class="mock p-4 card">
              <div class="text-xs text-slate-400">LinkedIn</div>
              <div class="mt-2 h-24 text-sm text-slate-200/90 leading-relaxed">
                • Hook that earns the scroll<br>
                • 6–10 crisp lines, one CTA<br>
                • On-brand tone &amp; keywords
              </div>
            </div>
            <div class="mock p-4 card">
              <div class="text-xs text-slate-400">X (Twitter)</div>
              <div class="mt-2 h-24 text-sm text-slate-200/90 leading-relaxed">
                Two fast variants<br>
                Always &le; 280 chars<br>
                Ready to post ✨
              </div>
            </div>
          </div>
          <div class="grid md:grid-cols-2 gap-4">
            <div class="mock p-4 card">
              <div class="text-xs text-slate-400">Email</div>
              <div class="mt-2 h-20 text-sm text-slate-200/90 leading-relaxed">
                Subject &amp; body prepped<br>
                Preview &amp; send from your client
              </div>
            </div>
            <div class="mock p-4 card">
              <div class="text-xs text-slate-400">Instagram</div>
              <div class="mt-2 h-20 text-sm text-slate-200/90 leading-relaxed">
                Caption + 3–5 hashtags<br>
                Short, skimmable, on-brand
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Live activity strip -->
    <div class="mt-8 md:mt-10">
      <div class="max-w-7xl mx-auto px-4 md:px-5">
        <div class="card p-4 md:p-5">
          <div class="flex items-center justify-between flex-wrap gap-3">
            <div class="flex items-center gap-2">
              <span class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></span>
              <strong class="tracking-tight">Generations today</strong>
              <span id="liveCount" class="chip">–</span>
            </div>
            <div class="text-xs text-slate-500">Real results update every 30s</div>
          </div>
          <div class="mt-3 overflow-hidden">
            <div id="liveFeed" class="flex gap-3 whitespace-nowrap text-[13px] will-change-transform" style="animation: scrollx 28s linear infinite"></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- TEMPLATES -->
  <section id="templates" class="max-w-7xl mx-auto px-4 md:px-5 py-12">
    <h2 class="text-2xl md:text-3xl font-extrabold tracking-tight">Templates</h2>
    <div class="grid md:grid-cols-3 gap-5 mt-5">
      <article class="card p-5">
        <div class="text-xs text-slate-400">Social</div>
        <h3 class="mt-1 font-semibold">LinkedIn Post Templates</h3>
        <p class="text-sm text-slate-500 mt-2">Hooks, line breaks, and CTA patterns that perform.</p>
        <a href="https://contentrepurpose.pro/blog/linkedin-post-templates" class="mt-4 inline-block px-3 py-2 rounded-xl border hover:bg-white/50 touch-target">Use template</a>
      </article>

      <article class="card p-5">
        <div class="text-xs text-slate-400">Generator</div>
        <h3 class="mt-1 font-semibold">AI Social Media Post Generator</h3>
        <p class="text-sm text-slate-500 mt-2">Paste once → get platform-ready snippets fast.</p>
        <a href="http://contentrepurpose.pro/blog/ai-social-media-post-generator/" class="mt-4 inline-block px-3 py-2 rounded-xl border hover:bg-white/50 touch-target">Open guide</a>
      </article>

      <article class="card p-5">
        <div class="text-xs text-slate-400">Blog → Social</div>
        <h3 class="mt-1 font-semibold">Repurpose Blog Posts for Social</h3>
        <p class="text-sm text-slate-500 mt-2">Turn articles into LinkedIn, X, Email & IG drafts.</p>
        <a href="https://contentrepurpose.pro/blog/repurpose-blog-post-for-social-media/" class="mt-4 inline-block px-3 py-2 rounded-xl border hover:bg-white/50 touch-target">See how</a>
      </article>
    </div>
  </section>

  <!-- USE CASES -->
  <section id="use-cases" class="max-w-7xl mx-auto px-4 md:px-5 pb-10">
    <h2 class="text-2xl md:text-3xl font-extrabold tracking-tight">Use cases</h2>
    <div class="grid md:grid-cols-3 gap-5 mt-5">
      <div class="card p-5">
        <div class="font-semibold">Paste once → multi-channel</div>
        <p class="text-sm text-slate-500 mt-2">One source into LinkedIn, X, Email & Instagram.</p>
        <a href="https://contentrepurpose.pro/blog/paste-once-multi-channel/" class="text-sm underline mt-2 inline-block">Workflow</a>
      </div>
      <div class="card p-5">
        <div class="font-semibold">Notion & Trello export</div>
        <p class="text-sm text-slate-500 mt-2">Ship faster with boards/pages and approvals.</p>
        <a href="https://contentrepurpose.pro/blog/notion-trello-export/" class="text-sm underline mt-2 inline-block">Guide</a>
      </div>
      <div class="card p-5">
        <div class="font-semibold">Content repurposing for SEO</div>
        <p class="text-sm text-slate-500 mt-2">Win long-tails and improve click-throughs.</p>
        <a href="https://contentrepurpose.pro/blog/content-repurposing-for-seo/" class="text-sm underline mt-2 inline-block">Playbook</a>
      </div>
    </div>
  </section>

  <!-- BEST PICKS -->
  <section id="best-picks" class="max-w-7xl mx-auto px-4 md:px-5 pb-12">
    <div class="flex items-end justify-between gap-4">
      <h2 class="text-2xl md:text-3xl font-extrabold tracking-tight">Best picks</h2>
      <a href="/blog" class="text-sm underline">Visit the blog</a>
    </div>
    <div class="grid md:grid-cols-3 gap-5 mt-5">
      <!-- Cluster 1 -->
      <nav class="card p-5">
        <h3 class="font-semibold">Repurposing Fundamentals</h3>
        <ul class="mt-2 text-sm space-y-2">
          <li><a class="underline" href="https://contentrepurpose.pro/blog/content-repurposing-101/">Content repurposing 101</a></li>
          <li><a class="underline" href="https://contentrepurpose.pro/blog/content-repurposing-strategy/">Repurposing strategy</a></li>
          <li><a class="underline" href="https://contentrepurpose.pro/blog/how-to-repurpose-content/">How to repurpose content</a></li>
          <li><a class="underline" href="https://contentrepurpose.pro/blog/content-repurposing-ideas/">100+ repurposing ideas</a></li>
          <li><a class="underline" href="https://contentrepurpose.pro/blog/repurpose-one-piece-multiple-platforms/">One piece → many platforms</a></li>
          <li><a class="underline" href="https://contentrepurpose.pro/blog/repurpose-blog-post-for-social-media/">Blog → Social guide</a></li>
        </ul>
      </nav>

      <!-- Cluster 2 -->
      <nav class="card p-5">
        <h3 class="font-semibold">AI Repurposing & Tools</h3>
        <ul class="mt-2 text-sm space-y-2">
          <li><a class="underline" href="https://contentrepurpose.pro/blog/ai-content-repurposing/">AI content repurposing</a></li>
          <li><a class="underline" href="https://contentrepurpose.pro/blog/best-ai-content-repurposing-tools-2025/">Best AI tools (2025)</a></li>
          <li><a class="underline" href="https://contentrepurpose.pro/blog/ai-vs-manual-content-repurposing/">AI vs manual repurposing</a></li>
          <li><a class="underline" href="http://contentrepurpose.pro/blog/ai-social-media-post-generator/">AI social post generator</a></li>
          <li><a class="underline" href="https://contentrepurpose.pro/blog/content-repurposing-for-seo/">Repurposing for SEO</a></li>
        </ul>
      </nav>

      <!-- Cluster 3 -->
      <nav class="card p-5">
        <h3 class="font-semibold">Workflows & Exports</h3>
        <ul class="mt-2 text-sm space-y-2">
          <li><a class="underline" href="https://contentrepurpose.pro/blog/notion-trello-export/">Notion & Trello export</a></li>
          <li><a class="underline" href="https://contentrepurpose.pro/blog/paste-once-multi-channel/">Paste-once workflow</a></li>
          <li><a class="underline" href="https://contentrepurpose.pro/blog/linkedin-post-templates">LinkedIn templates</a></li>
        </ul>
      </nav>
    </div>
  </section>

  <!-- ===== GUEST VIEW (LOGGED OUT) ===== -->
  <section id="guestView">
    <!-- DEMO -->
    <main id="demo" class="max-w-7xl mx-auto px-4 md:px-5 pb-12 grid lg:grid-cols-2 gap-8">
      <section class="card p-6">
        <div class="flex items-center justify-between">
          <h2 class="text-xl font-bold tracking-tight">Live Demo — Repurpose</h2>
          <span id="quota" class="px-3 py-1 rounded-full text-xs bg-white/70 dark:bg-white/10 border border-white/50">Checking quota…</span>
        </div>

        <label for="source" class="sr-only">Source text</label>
        <textarea id="source" class="mt-4 w-full h-48 p-3 rounded-xl border border-slate-200/70 focus:outline-none focus:ring-2 focus:ring-slate-300 dark:bg-black/30" placeholder="Paste a paragraph or blog snippet…"></textarea>

        <!-- Advanced settings (BYOK multi-provider) -->
        <details id="settings" class="mt-4 open:scroll-mt-20">
          <summary class="cursor-pointer text-sm text-slate-500">Advanced settings</summary>
          <div class="grid md:grid-cols-3 gap-3 mt-3">
            <input id="model" class="p-2 rounded-xl border border-slate-200/70 dark:bg-black/30" placeholder="Preferred model (optional)" />
            <select id="byok_provider" class="p-2 rounded-xl border border-slate-200/70 dark:bg-black/30">
              <option value="">Provider (auto)</option>
              <option value="openrouter">OpenRouter</option>
              <option value="openai">OpenAI</option>
              <option value="anthropic">Anthropic</option>
              <option value="together">Together</option>
              <option value="groq">Groq</option>
              <option value="custom">Custom (OpenAI-compatible)</option>
            </select>
            <input id="byok_key" class="p-2 rounded-xl border border-slate-200/70 dark:bg-black/30" placeholder="Your API key (BYOK)" />
            <input id="byok_base" class="p-2 rounded-xl border border-slate-200/70 dark:bg-black/30 md:col-span-2" placeholder="Custom base URL (if custom provider)" />
            <button id="save" class="px-4 py-2 rounded-xl font-semibold border border-slate-300/60 hover:bg-white/50 touch-target" type="button">Save</button>
          </div>
          <p class="text-xs text-slate-500 mt-2">BYOK is used only when you click “Generate with your BYOK”. If signed in, you can also save BYOK to your account; otherwise it’s saved to this tab only.</p>
        </details>

        <div class="mt-4 flex flex-wrap items-center gap-3">
          <button id="run" class="px-4 py-2 rounded-xl font-semibold text-white bg-black hover:opacity-90 touch-target" type="button">Generate</button>
          <button id="run-byok" class="px-4 py-2 rounded-xl font-semibold text-white bg-emerald-600 hover:opacity-90 touch-target" type="button">Generate with your BYOK</button>
          <button id="clear" class="px-4 py-2 rounded-xl font-semibold border border-slate-300/60 hover:bg-white/50 touch-target" type="button">Clear</button>
          <button id="dl-md" class="px-4 py-2 rounded-xl font-semibold border border-slate-300/60 hover:bg-white/50 touch-target" type="button" disabled>Download Markdown</button>
          <button id="dl-csv" class="px-4 py-2 rounded-xl font-semibold border border-slate-300/60 hover:bg-white/50 touch-target" type="button" disabled>Export CSV</button>
          <span id="status" class="text-sm text-slate-500" role="status" aria-live="polite"></span>
        </div>
      </section>

      <section class="grid gap-5">
        <!-- LinkedIn -->
        <div class="card p-5">
          <div class="flex justify-between items-center">
            <strong class="tracking-tight inline-flex items-center gap-2">LinkedIn</strong>
            <div class="text-xs text-slate-400"><span id="li-lines">0</span> lines</div>
            <button id="copy-li" class="px-3 py-1 rounded-full text-xs border border-slate-300/60 hover:bg:white/50 touch-target" type="button">Copy</button>
          </div>
          <pre id="out-li" class="whitespace-pre-wrap text-sm mt-3"></pre>
        </div>

        <!-- X -->
        <div class="card p-5">
          <div class="flex justify-between items-center">
            <strong class="tracking-tight inline-flex items-center gap-2">X (Twitter)</strong>
            <div class="text-xs text-slate-400">Chars: <span id="x-len">0</span> <span id="x-flag" class="ml-1"></span></div>
            <button id="copy-x" class="px-3 py-1 rounded-full text-xs border border-slate-300/60 hover:bg:white/50 touch-target" type="button">Copy</button>
          </div>
          <pre id="out-x" class="whitespace-pre-wrap text-sm mt-3"></pre>
        </div>

        <!-- Email -->
        <div class="card p-5">
          <div class="flex justify-between items-center">
            <strong class="tracking-tight inline-flex items-center gap-2">Email</strong>
            <button id="copy-em" class="px-3 py-1 rounded-full text-xs border border-slate-300/60 hover:bg:white/50 touch-target" type="button">Copy</button>
          </div>
          <div class="text-xs text-slate-400">Subject:</div>
          <pre id="out-em-subj" class="whitespace-pre-wrap text-sm mt-1"></pre>
          <div class="text-xs text-slate-400 mt-3">Body:</div>
          <pre id="out-em-body" class="whitespace-pre-wrap text-sm mt-1"></pre>
        </div>

        <!-- Instagram -->
        <div class="card p-5">
          <div class="flex justify-between items-center">
            <strong class="tracking-tight inline-flex items-center gap-2">Instagram</strong>
            <div class="text-xs text-slate-400">Hashtags: <span id="ig-tags">0</span></div>
            <button id="copy-ig" class="px-3 py-1 rounded-full text-xs border border-slate-300/60 hover:bg:white/50 touch-target" type="button">Copy</button>
          </div>
          <pre id="out-ig" class="whitespace-pre-wrap text-sm mt-3"></pre>
        </div>
      </section>
    </main>
  </section>

  <!-- ===== MEMBER VIEW (SIGNED IN) ===== -->
  <section id="memberView" class="hidden">
    <div class="max-w-7xl mx-auto px-4 md:px-5 pb-12">
      <!-- Header -->
      <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mt-8 mb-6">
        <div>
          <h2 class="text-2xl md:text-3xl font-extrabold tracking-tight">Dashboard</h2>
          <p class="text-slate-500 dark:text-slate-300">Welcome back, <span id="userEmail" class="font-medium"></span></p>
        </div>
        <div class="flex items-center gap-3">
          <span id="memberPlanBadge" class="px-3 py-1 rounded-full text-xs bg-white/70 dark:bg-white/10 border border-white/50">Plan: Free</span>
          <button id="manageBilling2" class="px-3 py-1 rounded-lg border hidden touch-target" type="button">Manage billing</button>
          <button id="logoutBtn2" class="px-3 py-1 rounded-lg border touch-target" type="button">Sign out</button>
        </div>
      </div>

      <!-- Top Cards (Platform + BYOK) -->
      <div id="quotaCards" class="grid sm:grid-cols-2 lg:grid-cols-4 gap-5 mb-6"></div>

      <!-- Member Generator -->
      <div class="card p-6">
        <div class="flex items-center justify-between">
          <h3 class="text-xl font-bold tracking-tight">Create new content</h3>
          <div class="flex items-center gap-3 flex-wrap">
            <label class="text-xs flex items-center gap-2">
              <input id="whitelabel" type="checkbox" class="hidden">
              <span id="wlLabel" class="chip hidden">White-label export</span>
            </label>
            <button id="exportPack" class="btn hidden touch-target" type="button">Export Project Pack (.zip)</button>
            <span id="quotaMember" class="px-3 py-1 rounded-full text-xs bg-white/70 dark:bg-white/10 border border-white/50">Today: 0/5</span>
          </div>
        </div>
        <textarea id="source_m" class="mt-4 w-full h-40 p-3 rounded-xl border border-slate-200/70 focus:outline-none focus:ring-2 focus:ring-slate-300 dark:bg-black/30" placeholder="Paste a paragraph or idea…"></textarea>

        <!-- Member BYOK quick settings -->
        <details class="mt-4">
          <summary class="cursor-pointer text-sm text-slate-500">BYOK settings (optional)</summary>
          <div class="grid md:grid-cols-3 gap-3 mt-3">
            <input id="model_m" class="p-2 rounded-xl border border-slate-200/70 dark:bg-black/30" placeholder="Preferred model (optional)" />
            <select id="byok_provider_m" class="p-2 rounded-xl border border-slate-200/70 dark:bg-black/30">
              <option value="">Provider (auto)</option>
              <option value="openrouter">OpenRouter</option>
              <option value="openai">OpenAI</option>
              <option value="anthropic">Anthropic</option>
              <option value="together">Together</option>
              <option value="groq">Groq</option>
              <option value="custom">Custom (OpenAI-compatible)</option>
            </select>
            <input id="byok_key_m" class="p-2 rounded-xl border border-slate-200/70 dark:bg-black/30" placeholder="Your API key (BYOK)" />
            <input id="byok_base_m" class="p-2 rounded-xl border border-slate-200/70 dark:bg-black/30 md:col-span-2" placeholder="Custom base URL (if custom provider)" />
            <button id="save_m" class="px-4 py-2 rounded-xl font-semibold border border-slate-300/60 hover:bg-white/50 touch-target" type="button">Save to my account</button>
          </div>
          <p class="text-xs text-slate-500 mt-2">Your BYOK is only used when you click “Generate with your BYOK”.</p>
        </details>

        <div class="mt-4 flex flex-wrap items-center gap-3">
          <button id="run_m" class="px-4 py-2 rounded-xl font-semibold text-white bg-black hover:opacity-90 touch-target" type="button">Generate</button>
          <button id="run-byok_m" class="px-4 py-2 rounded-xl font-semibold text-white bg-emerald-600 hover:opacity-90 touch-target" type="button">Generate with your BYOK</button>
          <button id="clear_m" class="px-4 py-2 rounded-xl font-semibold border border-slate-300/60 hover:bg:white/50 touch-target" type="button">Clear</button>
          <span id="status_m" class="text-sm text-slate-500" role="status" aria-live="polite"></span>
        </div>
      </div>

      <!-- NEW: Batch inputs panel (plan-gated by existing JS) -->
      <div class="card p-6 mt-6" id="batchCard">
        <div class="flex items-center justify-between gap-2 flex-wrap">
          <h3 class="text-lg font-bold">Batch inputs</h3>
          <span id="batchNote" class="chip">Upgrade to enable batch runs.</span>
        </div>
        <p class="text-sm text-slate-500 mt-2">Paste one idea per line. Each line generates a LinkedIn, X, Email & IG draft.</p>
        <textarea id="batch_inputs" class="mt-3 w-full h-32 p-3 rounded-xl border border-slate-200/70 focus:outline-none focus:ring-2 focus:ring-slate-300 dark:bg-black/30" placeholder="One idea per line…" disabled></textarea>
        <div class="mt-3 flex items-center gap-3">
          <button id="run_batch" class="px-4 py-2 rounded-xl font-semibold text-white bg-black hover:opacity-90 touch-target hidden" type="button">Run batch</button>
        </div>
        <ul id="batch_progress" class="mt-3 text-sm space-y-1"></ul>
      </div>

      <!-- Outputs + Publish -->
      <div class="grid lg:grid-cols-2 gap-5 mt-6">
        <!-- LinkedIn -->
        <div class="card p-5">
          <div class="flex justify-between items-center gap-2 flex-wrap">
            <strong class="tracking-tight inline-flex items-center gap-2">LinkedIn</strong>
            <div class="flex items-center gap-2">
              <button id="copy-li_m" class="px-3 py-1 rounded-full text-xs border touch-target" type="button">Copy</button>
              <button id="publish-li_m" class="px-3 py-1 rounded-full text-xs border touch-target" type="button">Publish</button>
              <button id="li-notion" class="px-3 py-1 rounded-full text-xs border hidden touch-target" type="button">Export to Notion</button>
              <button id="li-trello" class="px-3 py-1 rounded-full text-xs border hidden touch-target" type="button">Send to Trello</button>
              <button id="li-buffer" class="px-3 py-1 rounded-full text-xs border hidden touch-target" type="button">Queue in Buffer</button>
            </div>
          </div>
          <pre id="out-li_m" class="whitespace-pre-wrap text-sm mt-3"></pre>
        </div>

        <!-- X -->
        <div class="card p-5">
          <div class="flex justify-between items-center gap-2 flex-wrap">
            <strong class="tracking-tight inline-flex items-center gap-2">X (Twitter)</strong>
            <div class="flex items-center gap-2">
              <button id="copy-x_m" class="px-3 py-1 rounded-full text-xs border touch-target" type="button">Copy</button>
              <button id="publish-x_m" class="px-3 py-1 rounded-full text-xs border touch-target" type="button">Publish</button>
              <button id="x-notion" class="px-3 py-1 rounded-full text-xs border hidden touch-target" type="button">Export to Notion</button>
              <button id="x-trello" class="px-3 py-1 rounded-full text-xs border hidden touch-target" type="button">Send to Trello</button>
              <button id="x-buffer" class="px-3 py-1 rounded-full text-xs border hidden touch-target" type="button">Queue in Buffer</button>
            </div>
          </div>
          <pre id="out-x_m" class="whitespace-pre-wrap text-sm mt-3"></pre>
        </div>

        <!-- Email -->
        <div class="card p-5">
          <div class="flex justify-between items-center gap-2 flex-wrap">
            <strong class="tracking-tight inline-flex items-center gap-2">Email</strong>
            <div class="flex items-center gap-2">
              <button id="copy-em_m" class="px-3 py-1 rounded-full text-xs border touch-target" type="button">Copy</button>
              <button id="publish-em_m" class="px-3 py-1 rounded-full text-xs border touch-target" type="button">Preview &amp; Send</button>
              <button id="em-notion" class="px-3 py-1 rounded-full text-xs border hidden touch-target" type="button">Export to Notion</button>
              <button id="em-trello" class="px-3 py-1 rounded-full text-xs border hidden touch-target" type="button">Send to Trello</button>
              <button id="em-buffer" class="px-3 py-1 rounded-full text-xs border hidden touch-target" type="button">Queue in Buffer</button>
            </div>
          </div>
          <div class="text-xs text-slate-400">Subject:</div>
          <pre id="out-em-subj_m" class="whitespace-pre-wrap text-sm mt-1"></pre>
          <div class="text-xs text-slate-400 mt-3">Body:</div>
          <pre id="out-em-body_m" class="whitespace-pre-wrap text-sm mt-1"></pre>
        </div>

        <!-- Instagram -->
        <div class="card p-5">
          <div class="flex justify-between items-center gap-2 flex-wrap">
            <strong class="tracking-tight inline-flex items-center gap-2">Instagram</strong>
            <div class="flex items-center gap-2">
              <button id="copy-ig_m" class="px-3 py-1 rounded-full text-xs border touch-target" type="button">Copy</button>
              <button id="publish-ig_m" class="px-3 py-1 rounded-full text-xs border touch-target" type="button">Open Creator Studio</button>
              <button id="ig-notion" class="px-3 py-1 rounded-full text-xs border hidden touch-target" type="button">Export to Notion</button>
              <button id="ig-trello" class="px-3 py-1 rounded-full text-xs border hidden touch-target" type="button">Send to Trello</button>
              <button id="ig-buffer" class="px-3 py-1 rounded-full text-xs border hidden touch-target" type="button">Queue in Buffer</button>
            </div>
          </div>
          <pre id="out-ig_m" class="whitespace-pre-wrap text-sm mt-3"></pre>
        </div>
      </div>

      <!-- Saved Presets + Growth -->
      <div class="grid md:grid-cols-2 gap-5 mt-6">
        <!-- Saved Presets -->
        <div class="card p-5">
          <div class="flex items-center justify-between">
            <strong>Saved presets</strong>
            <button id="addPreset" class="px-3 py-1 rounded-xl border touch-target" type="button">Save current</button>
          </div>
          <p class="text-xs text-slate-500 mt-2">Free: 1 • Solo Creator: 10 • Creator/Business: Unlimited</p>
          <ul id="presetList" class="mt-3 text-sm space-y-2"></ul>
        </div>
        <!-- Growth / Referrals -->
        <div class="card p-5">
          <strong>Grow your daily quota</strong>
          <p class="text-sm text-slate-500 mt-2">Share your invite to unlock bonus runs (visual; enforcement handled by Worker).</p>
          <div class="mt-3 grid gap-2">
            <input id="refLink" class="p-2 rounded-xl border border-slate-200/70 dark:bg-black/30" readonly value="">
            <div class="flex flex-wrap gap-2">
              <button id="shareLi" class="px-3 py-2 rounded-xl border touch-target" type="button">Share on LinkedIn</button>
              <button id="shareX" class="px-3 py-2 rounded-xl border touch-target" type="button">Share on X</button>
              <button id="copyRef" class="px-3 py-2 rounded-xl border touch-target" type="button">Copy link</button>
            </div>
          </div>
          <p id="refNote" class="text-xs text-slate-500 mt-2">Referrals this month: <span id="refCount">0</span></p>
        </div>
      </div>

      <!-- Plan Features -->
      <div class="card p-6 mt-6">
        <h3 class="text-lg font-bold">Your plan includes</h3>
        <ul id="featureList" class="mt-3 text-sm space-y-1"></ul>
      </div>

      <!-- Integrations (Creator+/Business) -->
      <div class="card p-6 mt-6" id="integrationsCard">
        <h3 class="text-lg font-bold">Integrations</h3>
        <div class="grid md:grid-cols-3 gap-4 mt-3">
          <div class="p-4 rounded-xl border">
            <div class="flex items-center justify-between">
              <strong>Notion</strong><span id="notionState" class="chip">Disconnected</span>
            </div>
            <p class="text-xs text-slate-500 mt-1">Export pages to your workspace.</p>
            <div class="mt-3 flex gap-2">
              <button id="connectNotion" class="btn touch-target" type="button">Connect</button>
              <button id="disconnectNotion" class="btn hidden touch-target" type="button">Disconnect</button>
            </div>
          </div>
          <div class="p-4 rounded-xl border">
            <div class="flex items-center justify-between">
              <strong>Trello</strong><span id="trelloState" class="chip">Disconnected</span>
            </div>
            <p class="text-xs text-slate-500 mt-1">Send drafts as cards.</p>
            <div class="mt-3 flex gap-2">
              <button id="connectTrello" class="btn touch-target" type="button">Connect</button>
              <button id="disconnectTrello" class="btn hidden touch-target" type="button">Disconnect</button>
            </div>
          </div>
          <div class="p-4 rounded-xl border">
            <div class="flex items-center justify-between">
              <strong>Buffer</strong><span id="bufferState" class="chip">Disconnected</span>
            </div>
            <p class="text-xs text-slate-500 mt-1">Queue posts to social profiles.</p>
            <div class="mt-3 flex gap-2">
              <button id="connectBuffer" class="btn touch-target" type="button">Connect</button>
              <button id="disconnectBuffer" class="btn hidden touch-target" type="button">Disconnect</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Team (Business) -->
      <div class="card p-6 mt-6" id="teamCard">
        <h3 class="text-lg font-bold">Team (Business)</h3>
        <div class="mt-2 flex gap-2">
          <input id="inviteEmail" class="p-2 rounded-xl border flex-1" placeholder="teammate@company.com">
          <button id="inviteBtn" class="btn touch-target" type="button">Invite member</button>
        </div>
        <ul id="seatList" class="mt-3 text-sm space-y-1"></ul>
        <div class="mt-4 text-xs text-slate-500">Content Calendar (Coming Soon)</div>
      </div>

      <!-- NEW: Compact Pricing (members can upgrade easily) -->
      <div id="memberPricing" class="card p-6 mt-6">
        <div class="flex items-center justify-between gap-2 flex-wrap">
          <h3 class="text-lg font-bold">Upgrade your plan</h3>
          <button id="manageBilling2b" class="px-3 py-1 rounded-lg border touch-target hidden" type="button">Manage billing</button>
        </div>
        <p class="text-sm text-slate-500 mt-2">Unlock higher quotas, presets, and integrations.</p>
        <div class="grid sm:grid-cols-3 gap-4 mt-4">
          <button data-price="price_1S7y58JYjIKHzKcjzL7cIKiB" class="subBtn w-full px-4 py-2 rounded-xl font-semibold bg-white/70 dark:bg-white/10 border touch-target" type="button">Solo Creator — $9</button>
          <button data-price="price_1S7y77JYjIKHzKcjKQYjiqZH" class="subBtn w-full px-4 py-2 rounded-xl font-semibold bg-white/70 dark:bg:white/10 border touch-target" type="button">Creator — $19</button>
          <button data-price="price_1S7y8OJYjIKHzKcjqA9uJdyh" class="subBtn w-full px-4 py-2 rounded-xl font-semibold bg-black text-white hover:opacity-90 touch-target" type="button">Business — $49</button>
        </div>
      </div>
    </div>
  </section>
  <!-- ===== PRICING (shared anchor for both guest & member) ===== -->
  <section id="pricing" class="max-w-7xl mx-auto px-4 md:px-5 py-14">
    <h2 class="text-2xl md:text-3xl font-extrabold tracking-tight">Pricing</h2>
    <p class="text-slate-500 dark:text-slate-300 mt-2">Start free. Upgrade any time.</p>

    <div class="grid md:grid-cols-4 gap-5 mt-6">
      <!-- Free -->
      <div class="card p-6">
        <h3 class="text-lg font-bold">Free</h3>
        <div class="text-3xl font-black mt-2">$0<span class="text-sm font-normal text-slate-500">/mo</span></div>
        <ul class="mt-4 text-sm space-y-2">
          <li>• 5 runs / day (signed-in)</li>
          <li>• 5 demo runs / month (no login)</li>
          <li>• 1 saved preset</li>
          <li>• Single input per run</li>
        </ul>
        <button class="px-4 py-2 rounded-xl font-semibold bg-black text-white w-full mt-4 touch-target" id="chooseFree" type="button">Stay on Free</button>
      </div>

      <!-- Solo Creator -->
      <div class="card p-6">
        <h3 class="text-lg font-bold">Solo Creator</h3>
        <div class="text-3xl font-black mt-2">$9<span class="text-sm font-normal text-slate-500">/mo</span></div>
        <ul class="mt-4 text-sm space-y-2">
          <li>• Higher daily quota</li>
          <li>• Batch inputs</li>
          <li>• 10 saved presets</li>
          <li>• BYOK</li>
        </ul>
        <button data-price="price_1S7y58JYjIKHzKcjzL7cIKiB" class="subBtn px-4 py-2 rounded-xl font-semibold border w-full mt-4 touch-target" type="button">Choose Solo</button>
      </div>

      <!-- Creator -->
      <div class="card p-6">
        <h3 class="text-lg font-bold">Creator</h3>
        <div class="text-3xl font-black mt-2">$19<span class="text-sm font-normal text-slate-500">/mo</span></div>
        <ul class="mt-4 text-sm space-y-2">
          <li>• Even higher quota</li>
          <li>• Batch inputs</li>
          <li>• Unlimited presets</li>
          <li>• Notion, Trello, Buffer</li>
        </ul>
        <button data-price="price_1S7y77JYjIKHzKcjKQYjiqZH" class="subBtn px-4 py-2 rounded-xl font-semibold border w-full mt-4 touch-target" type="button">Choose Creator</button>
      </div>

      <!-- Business -->
      <div class="card p-6 border-2 border-black">
        <h3 class="text-lg font-bold">Business</h3>
        <div class="text-3xl font-black mt-2">$49<span class="text-sm font-normal text-slate-500">/mo</span></div>
        <ul class="mt-4 text-sm space-y-2">
          <li>• Team seats</li>
          <li>• Highest quota</li>
          <li>• Unlimited presets</li>
          <li>• All integrations</li>
        </ul>
        <button data-price="price_1S7y8OJYjIKHzKcjqA9uJdyh" class="subBtn px-4 py-2 rounded-xl font-semibold bg-black text-white w-full mt-4 touch-target" type="button">Choose Business</button>
      </div>
    </div>
  </section>

  <!-- ===== FOOTER ===== -->
  <footer class="border-t border-white/20 py-10">
    <div class="max-w-7xl mx-auto px-4 md:px-5 text-sm text-slate-500">
      <div class="flex items-center justify-between gap-4 flex-wrap">
        <div class="flex items-center gap-3">
          <svg width="28" height="28" viewBox="0 0 48 48" class="rounded-lg" aria-hidden="true">
            <defs><linearGradient id="gf" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#7AA2FF"/><stop offset="100%" stop-color="#FF2D2D"/></linearGradient></defs>
            <rect x="0" y="0" width="48" height="48" rx="12" fill="url(#gf)"/>
            <path d="M14 16h10a6 6 0 0 1 0 12H20v4h-6V16zm6 6v4h4a2 2 0 1 0 0-4h-4z" fill="white"/>
            <path d="M28 16h6v16h-6z" fill="white" opacity=".9"/>
          </svg>
          <span>© <span id="year"></span> ContentRepurpose.pro</span>
        </div>
        <nav class="flex items-center gap-4">
          <a href="/terms" class="hover:opacity-80">Terms</a>
          <a href="/privacy" class="hover:opacity-80">Privacy</a>
          <a href="mailto:hello@contentrepurpose.pro" class="hover:opacity-80">Contact</a>
        </nav>
      </div>
    </div>
  </footer>

  <!-- ===== APP SCRIPT ===== -->
  <script>
  ;(() => {
    const $ = (sel, root=document) => root.querySelector(sel);
    const $$ = (sel, root=document) => Array.from(root.querySelectorAll(sel));
    const on = (el, ev, fn) => el && el.addEventListener(ev, fn);

    const els = {
      body: document.body,
      // nav + auth
      planBadge: $('#planbadge'),
      planBadgeM: $('#planbadge_m'),
      manageBilling: $('#manageBilling'),
      manageBillingM: $('#manageBilling_m'),
      loginBtn: $('#loginBtn'),
      loginBtnM: $('#loginBtn_m'),
      logoutBtn: $('#logoutBtn'),
      logoutBtnM: $('#logoutBtn_m'),
      manageBilling2: $('#manageBilling2'),
      manageBilling2b: $('#manageBilling2b'),
      logoutBtn2: $('#logoutBtn2'),
      userEmail: $('#userEmail'),
      // containers
      heroBlock: $('#heroBlock'),
      guestView: $('#guestView'),
      memberView: $('#memberView'),
      batchCard: $('#batchCard'),
      batchInputs: $('#batch_inputs'),
      runBatch: $('#run_batch'),
      batchNote: $('#batchNote'),
      quotaCards: $('#quotaCards'),
      featureList: $('#featureList'),
      memberPlanBadge: $('#memberPlanBadge'),
      wlLabel: $('#wlLabel'),
      exportPack: $('#exportPack'),
      // outputs (guest)
      outLi: $('#out-li'), outX: $('#out-x'), outEmSubj: $('#out-em-subj'), outEmBody: $('#out-em-body'), outIg: $('#out-ig'),
      liLines: $('#li-lines'), xLen: $('#x-len'), xFlag: $('#x-flag'), igTags: $('#ig-tags'),
      // outputs (member)
      outLiM: $('#out-li_m'), outXM: $('#out-x_m'), outEmSubjM: $('#out-em-subj_m'), outEmBodyM: $('#out-em-body_m'), outIgM: $('#out-ig_m'),
      status: $('#status'), statusM: $('#status_m'),
      quotaGuest: $('#quota'),
      quotaMember: $('#quotaMember'),
      // preset
      presetList: $('#presetList'),
      addPreset: $('#addPreset'),
      // referrals
      refLink: $('#refLink'),
      refCount: $('#refCount'),
      // integrations
      integrationsCard: $('#integrationsCard'),
      notionState: $('#notionState'),
      trelloState: $('#trelloState'),
      bufferState: $('#bufferState'),
      connectNotion: $('#connectNotion'),
      disconnectNotion: $('#disconnectNotion'),
      connectTrello: $('#connectTrello'),
      disconnectTrello: $('#disconnectTrello'),
      connectBuffer: $('#connectBuffer'),
      disconnectBuffer: $('#disconnectBuffer'),
      // member publish buttons (no-ops placeholders)
      pub: {
        li: $('#publish-li_m'), x: $('#publish-x_m'), em: $('#publish-em_m'), ig: $('#publish-ig_m')
      },
      // misc
      year: $('#year'),
      promoBanner: $('#promoBanner'), promoDismiss: $('#promoDismiss'),
    };

    // ------ Helpers ------
    const state = {
      user: null,
      plan: 'free',            // 'free' | 'solo' | 'creator' | 'business'
      presets: [],             // saved presets
      maxPresets: 1,           // enforce per plan
      memberDailyQuota: 5,     // UI display; authoritative quota enforced server-side
    };

    const PLAN_LIMITS = {
      free:      { presets: 1, batch: false, wl: false, integrations: false },
      solo:      { presets: 10, batch: true,  wl: true,  integrations: false },
      creator:   { presets: Infinity, batch: true, wl: true, integrations: true },
      business:  { presets: Infinity, batch: true, wl: true, integrations: true, team: true },
    };

    const fmtPlan = (p) => p === 'solo' ? 'Solo Creator' : (p[0].toUpperCase()+p.slice(1));

    const setText = (el, v) => { if (el) el.textContent = v };
    const show = (el, yes=true) => { if (!el) return; el.classList.toggle('hidden', !yes) };
    const enable = (el, yes=true) => { if (!el) return; el.disabled = !yes; el.classList.toggle('opacity-50', !yes) };

    const toast = (msg) => {
      const t = document.createElement('div');
      t.role = 'status';
      t.className = 'fixed bottom-4 left-1/2 -translate-x-1/2 px-4 py-2 rounded-xl bg-black text-white text-sm shadow-xl z-[1000]';
      t.textContent = msg;
      document.body.appendChild(t);
      setTimeout(() => t.remove(), 2400);
    };

    // Promo banner dismiss
    try {
      const k = 'promo.dismissed.v1';
      if (localStorage.getItem(k)) show(els.promoBanner, false);
      on(els.promoDismiss, 'click', () => { localStorage.setItem(k, '1'); show(els.promoBanner, false); });
    } catch {}

    // Mobile nav
    const navSheet = $('#mobileNav'), navToggle = $('#navToggle'), navClose = $('#navClose');
    const setNav = (open) => { document.documentElement.classList.toggle('nav-open', open); navSheet.setAttribute('aria-hidden', open ? 'false' : 'true'); navToggle?.setAttribute('aria-expanded', open?'true':'false'); };
    on(navToggle, 'click', () => setNav(true));
    on(navClose, 'click', () => setNav(false));
    on(navSheet, 'click', (e) => { if (e.target === navSheet) setNav(false) });

    // Year
    setText(els.year, new Date().getFullYear());

    // Live activity (best-effort UI)
    const liveCount = $('#liveCount'), liveFeed = $('#liveFeed');
    const refreshLive = async () => {
      try {
        const r = await fetch('/api/live').then(r => r.ok ? r.json() : null);
        if (!r) return;
        if (liveCount) liveCount.textContent = r.today ?? '—';
        if (liveFeed && Array.isArray(r.recent)) {
          liveFeed.innerHTML = r.recent.map(x => `<span class="chip">${x}</span>`).join('');
        }
      } catch {}
    };
    refreshLive(); setInterval(refreshLive, 30000);

    // -------- AUTH / PLAN UI --------
    async function fetchUser() {
      try {
        const r = await fetch('/api/me', { credentials: 'include' });
        if (!r.ok) throw 0;
        const me = await r.json();
        return me; // { email, plan, quota:{used,limit}, referrals, integrations:{notion,trello,buffer}, presets:[...] }
      } catch { return null }
    }

    function applyPlanUI(plan) {
      state.plan = plan || 'free';
      const L = PLAN_LIMITS[state.plan] || PLAN_LIMITS.free;
      state.maxPresets = L.presets;

      // Badges
      const planLabel = `Plan: ${fmtPlan(state.plan)}`;
      setText(els.planBadge, planLabel);
      setText(els.planBadgeM, planLabel);
      setText(els.memberPlanBadge, planLabel);

      // Batch
      if (L.batch) {
        enable(els.batchInputs, true);
        show(els.runBatch, true);
        setText(els.batchNote, 'Batch enabled');
      } else {
        enable(els.batchInputs, false);
        show(els.runBatch, false);
        setText(els.batchNote, 'Upgrade to enable batch runs.');
      }

      // White-label + export pack (Creator+)
      show(els.wlLabel, !!L.wl);
      show(els.exportPack, !!L.wl);

      // Integrations visibility (Creator+)
      show(els.integrationsCard, true); // always visible, but gated by connect buttons
      const integChip = (on) => on ? 'Connected' : 'Disconnected';
      // buttons are wired after we know connection states (in loadMember)

      // Manage billing buttons (members only)
      const isPaid = state.plan !== 'free';
      show(els.manageBilling, isPaid);
      show(els.manageBillingM, isPaid);
      show(els.manageBilling2, isPaid);
      show(els.manageBilling2b, isPaid);
    }

    function showGuest() {
      els.body.dataset.auth = 'guest';
      show(els.heroBlock, true);
      show(els.guestView, true);
      show(els.memberView, false);
      show(els.loginBtn, true); show(els.loginBtnM, true);
      show(els.logoutBtn, false); show(els.logoutBtnM, false); show(els.logoutBtn2, false);
    }

    function showMember(email, quota) {
      els.body.dataset.auth = 'member';
      show(els.heroBlock, false);
      show(els.guestView, false);
      show(els.memberView, true);
      show(els.loginBtn, false); show(els.loginBtnM, false);
      show(els.logoutBtn, true); show(els.logoutBtnM, true); show(els.logoutBtn2, true);
      setText(els.userEmail, email || '');
      if (quota) setText(els.quotaMember, `Today: ${quota.used}/${quota.limit}`);
    }

    async function load() {
      const me = await fetchUser();
      if (!me) { showGuest(); applyPlanUI('free'); initGuestQuota(); return; }

      state.user = me;
      applyPlanUI((me.plan || 'free').toLowerCase());
      showMember(me.email, me.quota);

      // quotas (UI)
      if (me.quota) setText(els.quotaMember, `Today: ${me.quota.used}/${me.quota.limit}`);

      // presets
      state.presets = Array.isArray(me.presets) ? me.presets : [];
      renderPresets();

      // referrals
      if (els.refLink) els.refLink.value = me.referral_url || (location.origin + '/?ref=' + encodeURIComponent(me.email||''));
      if (els.refCount) setText(els.refCount, String(me.referrals || 0));

      // integrations states
      const integ = me.integrations || {};
      setText(els.notionState, integ.notion ? 'Connected' : 'Disconnected');
      setText(els.trelloState, integ.trello ? 'Connected' : 'Disconnected');
      setText(els.bufferState, integ.buffer ? 'Connected' : 'Disconnected');

      // feature list
      renderFeatureList();
    }

    // ------ Guest demo quota ------
    function initGuestQuota() {
      try {
        const k = 'demo.quota.v1';
        const v = JSON.parse(localStorage.getItem(k) || '{"used":0,"limit":5}');
        setText(els.quotaGuest, `Demo: ${v.used}/${v.limit} this month`);
      } catch { setText(els.quotaGuest, 'Demo: 0/5 this month'); }
    }
    function addGuestDemoUse() {
      try {
        const k = 'demo.quota.v1';
        const v = JSON.parse(localStorage.getItem(k) || '{"used":0,"limit":5}');
        v.used = (v.used||0) + 1;
        localStorage.setItem(k, JSON.stringify(v));
        setText(els.quotaGuest, `Demo: ${v.used}/${v.limit} this month`);
        return v;
      } catch { return { used: 1, limit: 5 } }
    }

    // ------ Presets ------
    function renderPresets() {
      if (!els.presetList) return;
      els.presetList.innerHTML = (state.presets || []).map((p, i) =>
        `<li class="flex items-center justify-between gap-2">
          <span class="truncate">${p.name || 'Preset ' + (i+1)}</span>
          <div class="flex items-center gap-2">
            <button data-i="${i}" class="btn btn--apply px-2 py-1 text-xs touch-target">Apply</button>
            <button data-i="${i}" class="btn btn--delete px-2 py-1 text-xs touch-target">Delete</button>
          </div>
        </li>`
      ).join('') || `<li class="text-slate-500">No presets yet.</li>`;

      $$('.btn--apply', els.presetList).forEach(b => on(b, 'click', () => {
        const i = +b.dataset.i; const p = state.presets[i];
        if (!p) return;
        // apply minimal: model/provider fields
        const map = {
          model: ['#model_m','#model'],
          byok_provider: ['#byok_provider_m','#byok_provider'],
          byok_key: ['#byok_key_m','#byok_key'],
          byok_base: ['#byok_base_m','#byok_base'],
        };
        Object.entries(map).forEach(([k, sels]) => {
          sels.forEach(sel => { const el = $(sel); if (el && p[k] != null) el.value = p[k]; });
        });
        toast('Preset applied');
      }));

      $$('.btn--delete', els.presetList).forEach(b => on(b, 'click', async () => {
        const i = +b.dataset.i;
        const p = state.presets[i];
        if (!p) return;
        try {
          await fetch('/api/presets/'+encodeURIComponent(p.id||i), { method: 'DELETE', credentials: 'include' });
        } catch {}
        state.presets.splice(i,1);
        renderPresets();
        toast('Preset removed');
      }));
    }

    on(els.addPreset, 'click', async () => {
      const L = PLAN_LIMITS[state.plan];
      if ((state.presets?.length || 0) >= (L.presets ?? 0)) {
        toast(`Free plan allows ${L.presets === Infinity ? 'unlimited' : L.presets} preset${L.presets>1?'s':''}. Upgrade to save more.`);
        return;
      }
      const payload = {
        name: 'Preset ' + (state.presets.length + 1),
        model: $('#model_m')?.value || '',
        byok_provider: $('#byok_provider_m')?.value || '',
        byok_key: $('#byok_key_m')?.value ? '***' : '', // never store raw key in UI
        byok_base: $('#byok_base_m')?.value || '',
      };
      try {
        const r = await fetch('/api/presets', { method: 'POST', credentials: 'include', headers:{'Content-Type':'application/json'}, body: JSON.stringify(payload) });
        const saved = r.ok ? await r.json() : payload;
        state.presets = [...(state.presets||[]), saved];
        renderPresets();
        toast('Preset saved');
      } catch { toast('Could not save preset') }
    });

    // ------ Features per plan (visual list) ------
    function renderFeatureList() {
      if (!els.featureList) return;
      const L = PLAN_LIMITS[state.plan];
      const items = [
        { label:'Daily quota', value: state.plan==='free' ? '5' : 'Higher' },
        { label:'Batch inputs', value: L.batch ? 'Yes' : 'No' },
        { label:'Saved presets', value: L.presets===Infinity ? 'Unlimited' : String(L.presets) },
        { label:'White-label export', value: L.wl ? 'Yes' : 'No' },
        { label:'Integrations (Notion, Trello, Buffer)', value: L.integrations ? 'Yes' : 'No' },
        { label:'Team seats', value: L.team ? 'Yes' : 'No' },
      ];
      els.featureList.innerHTML = items.map(i => `<li>• ${i.label}: <strong>${i.value}</strong></li>`).join('');
    }

    // ------ Copy helpers ------
    const copy = async (text) => {
      try { await navigator.clipboard.writeText(text); toast('Copied to clipboard'); }
      catch { toast('Copy failed'); }
    };

    // Guest copy buttons
    on($('#copy-li'), 'click', () => copy(els.outLi?.textContent||''));
    on($('#copy-x'), 'click', () => copy(els.outX?.textContent||''));
    on($('#copy-em'), 'click', () => copy(`${els.outEmSubj?.textContent||''}\n\n${els.outEmBody?.textContent||''}`));
    on($('#copy-ig'), 'click', () => copy(els.outIg?.textContent||''));

    // Member copy buttons
    on($('#copy-li_m'), 'click', () => copy(els.outLiM?.textContent||''));
    on($('#copy-x_m'), 'click', () => copy(els.outXM?.textContent||''));
    on($('#copy-em_m'), 'click', () => copy(`${els.outEmSubjM?.textContent||''}\n\n${els.outEmBodyM?.textContent||''}`));
    on($('#copy-ig_m'), 'click', () => copy(els.outIgM?.textContent||''));

    // ------ Generation ------
    function fillGuestOutputs(o={}) {
      setText(els.outLi, o.li || '');
      setText(els.outX, o.x || '');
      setText(els.outEmSubj, o.em_subj || '');
      setText(els.outEmBody, o.em_body || '');
      setText(els.outIg, o.ig || '');

      setText(els.liLines, (o.li||'').split(/\n/).filter(Boolean).length);
      const xlen = (o.x||'').length;
      setText(els.xLen, xlen);
      setText(els.xFlag, xlen>280 ? '⚠︎ >280' : '✓ ok');
      setText(els.igTags, ((o.ig||'').match(/#\w+/g)||[]).length);

      // enable downloads when we have content
      const has = !!(o.li || o.x || o.em_subj || o.em_body || o.ig);
      enable($('#dl-md'), has);
      enable($('#dl-csv'), has);
    }

    function fillMemberOutputs(o={}) {
      setText(els.outLiM, o.li || '');
      setText(els.outXM, o.x || '');
      setText(els.outEmSubjM, o.em_subj || '');
      setText(els.outEmBodyM, o.em_body || '');
      setText(els.outIgM, o.ig || '');
    }

    async function apiGenerate(path, body, opts={member:false}) {
      const tgtStatus = opts.member ? els.statusM : els.status;
      setText(tgtStatus, 'Generating…');
      try {
        const r = await fetch(path, {
          method: 'POST',
          credentials: 'include',
          headers: {'Content-Type':'application/json'},
          body: JSON.stringify(body)
        });
        const data = await r.json().catch(()=> ({}));
        setText(tgtStatus, r.ok ? 'Done' : (data?.error || 'Error'));
        return r.ok ? data : null;
      } catch {
        setText(tgtStatus, 'Network error'); return null;
      }
    }

    // Guest Generate
    on($('#run'), 'click', async () => {
      const source = $('#source')?.value?.trim();
      if (!source) return toast('Please paste some text');
      const q = addGuestDemoUse();
      if (q.used > q.limit) { toast('Monthly demo limit reached. Sign in for the Free plan.'); return; }
      const model = $('#model')?.value || '';
      const data = await apiGenerate('/api/generate', { source, model, channels:['linkedin','x','email','instagram'] }, {member:false});
      if (data) fillGuestOutputs(data);
    });

    on($('#run-byok'), 'click', async () => {
      const source = $('#source')?.value?.trim();
      if (!source) return toast('Please paste some text');
      const provider = $('#byok_provider')?.value || '';
      const key = $('#byok_key')?.value || '';
      const base = $('#byok_base')?.value || '';
      if (!key) return toast('Enter your BYOK key first.');
      const model = $('#model')?.value || '';
      const data = await apiGenerate('/api/generate/byok', { source, model, byok:{provider, key, base}, channels:['linkedin','x','email','instagram'] }, {member:false});
      if (data) fillGuestOutputs(data);
    });

    on($('#clear'), 'click', () => fillGuestOutputs({}));

    // Guest downloads
    on($('#dl-md'), 'click', () => {
      const parts = [
        '# LinkedIn\n\n'+(els.outLi?.textContent||''),
        '\n\n# X (Twitter)\n\n'+(els.outX?.textContent||''),
        '\n\n# Email\n\n**Subject:** '+(els.outEmSubj?.textContent||'')+'\n\n'+(els.outEmBody?.textContent||''),
        '\n\n# Instagram\n\n'+(els.outIg?.textContent||'')
      ];
      const blob = new Blob([parts.join('\n')], {type:'text/markdown'});
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'repurpose.md';
      a.click();
      URL.revokeObjectURL(a.href);
    });

    on($('#dl-csv'), 'click', () => {
      const row = (v) => `"${String(v||'').replace(/"/g,'""')}"`;
      const csv = [
        'channel,content',
        'linkedin,'+row(els.outLi?.textContent||''),
        'x,'+row(els.outX?.textContent||''),
        'email-subject,'+row(els.outEmSubj?.textContent||''),
        'email-body,'+row(els.outEmBody?.textContent||''),
        'instagram,'+row(els.outIg?.textContent||''),
      ].join('\n');
      const blob = new Blob([csv], {type:'text/csv'});
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'repurpose.csv';
      a.click();
      URL.revokeObjectURL(a.href);
    });

    // Member Generate
    on($('#run_m'), 'click', async () => {
      const source = $('#source_m')?.value?.trim();
      if (!source) return toast('Please paste some text');
      const model = $('#model_m')?.value || '';
      const data = await apiGenerate('/api/generate', { source, model, channels:['linkedin','x','email','instagram'] }, {member:true});
      if (data) fillMemberOutputs(data);
    });

    on($('#run-byok_m'), 'click', async () => {
      const source = $('#source_m')?.value?.trim();
      if (!source) return toast('Please paste some text');
      const provider = $('#byok_provider_m')?.value || '';
      const key = $('#byok_key_m')?.value || '';
      const base = $('#byok_base_m')?.value || '';
      if (!key) return toast('Enter your BYOK key first.');
      const model = $('#model_m')?.value || '';
      const data = await apiGenerate('/api/generate/byok', { source, model, byok:{provider, key, base}, channels:['linkedin','x','email','instagram'] }, {member:true});
      if (data) fillMemberOutputs(data);
    });

    on($('#clear_m'), 'click', () => fillMemberOutputs({}));

    // Batch (plan gated)
    on(els.runBatch, 'click', async () => {
      const lines = (els.batchInputs?.value||'').split('\n').map(s=>s.trim()).filter(Boolean);
      if (!lines.length) return toast('Add at least one line');
      if (!PLAN_LIMITS[state.plan].batch) return toast('Upgrade to use batch runs');
      const progress = $('#batch_progress'); progress.innerHTML = '';
      for (let i=0;i<lines.length;i++) {
        const li = document.createElement('li'); li.textContent = `#${i+1} — running…`; progress.appendChild(li);
        const data = await apiGenerate('/api/generate', { source: lines[i], channels:['linkedin','x','email','instagram'] }, {member:true});
        li.textContent = `#${i+1} — ${data ? 'done' : 'failed'}`;
      }
    });

    // Integrations (visual connect/disconnect only; server enforces)
    const togg = async (svc, on) => {
      try {
        await fetch('/api/integrations/'+svc, { method: on?'POST':'DELETE', credentials: 'include' });
        toast(`${svc} ${on?'connected':'disconnected'}`);
        load();
      } catch { toast('Action failed') }
    };
    on(els.connectNotion, 'click', () => togg('notion', true));
    on(els.disconnectNotion, 'click', () => togg('notion', false));
    on(els.connectTrello, 'click', () => togg('trello', true));
    on(els.disconnectTrello, 'click', () => togg('trello', false));
    on(els.connectBuffer, 'click', () => togg('buffer', true));
    on(els.disconnectBuffer, 'click', () => togg('buffer', false));

    // Publish buttons (placeholder actions)
    Object.entries(els.pub).forEach(([k, btn]) => on(btn, 'click', () => toast('Publishing flow opens in a new window…')));

    // Auth buttons (stubs to your auth routes)
    on($('#heroSignIn'), 'click', () => location.href='/login');
    on(els.loginBtn, 'click', () => location.href='/login');
    on(els.loginBtnM, 'click', () => location.href='/login');
    const doLogout = () => fetch('/api/logout', { method:'POST', credentials:'include' }).finally(()=> location.reload());
    on(els.logoutBtn, 'click', doLogout);
    on(els.logoutBtnM, 'click', doLogout);
    on(els.logoutBtn2, 'click', doLogout);

    // Billing / subscriptions
    $$('.subBtn').forEach(b => on(b, 'click', async () => {
      const price = b.getAttribute('data-price');
      try {
        const r = await fetch('/api/checkout', { method:'POST', credentials:'include', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ price }) });
        const { url } = await r.json();
        if (url) location.href = url; else toast('Checkout unavailable');
      } catch { toast('Checkout failed') }
    }));
    on(els.manageBilling, 'click', async () => {
      try { const r = await fetch('/api/billing-portal', { method:'POST', credentials:'include' }); const { url } = await r.json(); if (url) location.href=url } catch { toast('Portal unavailable') }
    });
    on(els.manageBillingM, 'click', async () => {
      try { const r = await fetch('/api/billing-portal', { method:'POST', credentials:'include' }); const { url } = await r.json(); if (url) location.href=url } catch { toast('Portal unavailable') }
    });
    on(els.manageBilling2, 'click', async () => {
      try { const r = await fetch('/api/billing-portal', { method:'POST', credentials:'include' }); const { url } = await r.json(); if (url) location.href=url } catch { toast('Portal unavailable') }
    });
    on(els.manageBilling2b, 'click', async () => {
      try { const r = await fetch('/api/billing-portal', { method:'POST', credentials:'include' }); const { url } = await r.json(); if (url) location.href=url } catch { toast('Portal unavailable') }
    });
    on($('#chooseFree'), 'click', () => toast('You are on the Free plan'));

    // Referrals share
    on($('#copyRef'), 'click', () => { if (els.refLink?.value) copy(els.refLink.value) });
    on($('#shareLi'), 'click', () => {
      const u = encodeURIComponent(els.refLink?.value || location.origin);
      const t = encodeURIComponent('I’m using ContentRepurpose.pro to spin one idea into everywhere content → ');
      window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${u}`, '_blank');
    });
    on($('#shareX'), 'click', () => {
      const u = encodeURIComponent(els.refLink?.value || location.origin);
      const t = encodeURIComponent('Turning one idea into LinkedIn, X, Email & IG drafts with @contentflow — ');
      window.open(`https://twitter.com/intent/tweet?text=${t}&url=${u}`, '_blank');
    });

    // Save BYOK locally (guest) or to account (member)
    on($('#save'), 'click', () => { toast('Saved for this tab'); });
    on($('#save_m'), 'click', async () => {
      try {
        await fetch('/api/byok', { method:'POST', credentials:'include', headers:{'Content-Type':'application/json'},
          body: JSON.stringify({ provider: $('#byok_provider_m')?.value||'', key: $('#byok_key_m')?.value||'', base: $('#byok_base_m')?.value||'', model: $('#model_m')?.value||'' }) });
        toast('BYOK saved to your account');
      } catch { toast('Could not save BYOK') }
    });

    // Initial load
    load();
  })();
  </script>
</body>
</html>
